<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="keywords" content="key1, key2" />
<meta name="description" content=â€â€>
<meta name="author" content="nate">
<meta name="author" content="nate &lt;jiwanger@126.com&gt;">
<link href="images/favicon.ico" rel="bookmark" type="image/x-icon" />
<link href="images/favicon.ico" rel="icon" type="image/x-icon" />
<link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon" />
<title>NATE--ç¬”è®°--JAVA</title>
<!-- Bootstrap -->
<link href="../support/bootstrap/theme/yeti-bootstrap.min.css"
	rel="stylesheet">
<!-- 
<link href="../support/bootstrap/css/bootstrap.css" rel="stylesheet">
-->
<link rel="stylesheet"
	href="../support/syntaxhighlighter/styles/shCoreDefault.css" />
<link href="../commons/css/common.css" rel="stylesheet">
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
      <script src="http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
	<!-- nav start -->
	<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target="#bs-example-navbar-collapse-1">
					<span class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="../index.html">
					<img src="../commons/images/icon.png">
				</a>
			</div>

			<div class="collapse navbar-collapse"
				id="bs-example-navbar-collapse-1">
				<ul id="my-nav" class="nav navbar-nav">

				</ul>
			</div>
		</div>
	</nav>
	<!-- nav end -->


	<div class="container">
		<div class="row">
			<!-- left-menu start -->
			<div class="col-md-3">
				<div class="panel panel-default"
					  id="left_menu_modify">
					<div class="panel-heading">
						<h3 class="panel-title">JAVA</h3>
					</div>
					<div class="list-group">
						<a href="#" class="list-group-item">Java æ–‡æ¡£</a>
						<a id="tttt" class="list-group-item active dropdown"
							data-toggle="collapse" data-parent="#accordion"
							href="#java-tools" aria-expanded="true">
							Java å·¥å…·<span class="caret pull-right" style="margin-top: 5px;"></span>
						</a>
						<div id="java-tools" class="panel-collapse collapse"
							role="tabpanel">
							<a href="#java-javac" class="list-group-item"
								style="border-top: 1px solid #DDDDDD;">javac å·¥å…·</a>
							<a href="#java-java" class="list-group-item">java å·¥å…·</a>
							<a href="#java-jar" class="list-group-item">jar å·¥å…·</a>
							<a href="#java-keytool" class="list-group-item">keytool å·¥å…·</a>
							<a href="#java-examples" class="list-group-item">examples</a>
						</div>
						<a href="#java-base" class="list-group-item">Java åŸºæœ¬æ•°æ®ç±»å‹å’Œ String</a>
						<a href="#java-syntax" class="list-group-item">Java ä¸­çš„å‡ ä¸ªå…³é”®å­—</a>
						<a href="#java-class-loader" class="list-group-item">ClassLoader åŸç†</a>
						<a href="#java-generics" class="list-group-item">Java æ³›å‹</a>
						<a href="#java-reflect" class="list-group-item">Java åå°„</a>
						<a href="#java-annotation" class="list-group-item">Java æ³¨è§£</a>
						<a href="#java-thread" class="list-group-item">å¤šçº¿ç¨‹</a>
						<a href="#java-thread-pool" class="list-group-item">çº¿ç¨‹æ± </a>
						<a href="#java-memory" class="list-group-item">å†…å­˜ç®¡ç†</a>
						<a href="#java-encrypt" class="list-group-item">åŠ å¯†ä¸è§£å¯†</a>
						<a href="#java-openssl" class="list-group-item">OpenSSL</a>
						<a href="#java-jni" class="list-group-item">Java æœ¬åœ°ç¼–ç¨‹ -- JNI</a>
						<a href="#java-" class="list-group-item"></a>
					</div>
				</div>
			</div>
			<!-- left-menu over -->
		</div>
	</div>


	<div class="container" style="margin-top: 70px;">
		<div class="row">
			<div class="col-md-9 col-md-push-3" style="float: left;">
				<!-- item start -->
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 id="java-docs" class="panel-title">Java-1.8 æ–‡æ¡£</h3>
					</div>
					<div class="panel-body">
						<p>
							<a target="_blank" href="./docs/docs-java/index.html">Java
								Platform Standard Edition 8 Documentation</a>
						</p>
						<p>
							<a target="_blank" href="./docs/docs-java/api/index.html">Java
								SE API</a>
							--
							<a target="_blank" href="./docs/docs-java/api-zh/index.html">JAVA
								SE 1.6ä¸­æ–‡ç‰ˆæœ¬ API</a>
						</p>

						<img src="images/java-construct.png" class="img img-responsive">
					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-javac"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">javac å·¥å…·</h3>
					</div>
					<div class="panel-body">
						<p>
							å®ä¾‹å‚è§: --
							<a href="#java-examples">examples</a>
						<pre class="brush: bash;">
$ javac [ options ] [ sourcefiles ] [ classes] [ @argfiles ]

# options -- å‘½ä»¤è¡Œé€‰é¡¹
# sourcefiles -- ä¸€ä¸ªæˆ–å¤šä¸ªè¦ç¼–è¯‘çš„æºæ–‡ä»¶
# classes -- ä¸€ä¸ªæˆ–å¤šä¸ªç¼–è¯‘ä½¿ç”¨çš„æ³¨è§£ç±»æ–‡ä»¶
# @argfiles -- ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹æºæ–‡ä»¶è¿›è¡Œåˆ—è¡¨çš„æ–‡ä»¶
</pre>
						<h5 class="text-primary">options</h5>
						<ul>
							<li>
								<p>
									<code>-classpath &lt;path&gt; </code>
									-- æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶å’Œæ³¨é‡Šå¤„ç†ç¨‹åºçš„ä½ç½®
								</p>
							</li>
							<li>
								<p>
									<code>-cp &lt;path&gt; </code>
									-- æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶å’Œæ³¨é‡Šå¤„ç†ç¨‹åºçš„ä½ç½®
								</p>
							</li>
							<li>
								<p>
									<code>-sourcepath &lt;path&gt; </code>
									-- æŒ‡å®šæŸ¥æ‰¾è¾“å…¥æºæ–‡ä»¶çš„ä½ç½®
								</p>
							</li>
							<li>
								<p>
									<code>-d &lt;dir&gt; </code>
									-- æŒ‡å®šæ”¾ç½®ç”Ÿæˆçš„ç±»æ–‡ä»¶çš„ä½ç½®
								</p>
							</li>
							<li>
								<p>
									<code>-s &lt;dir&gt; </code>
									-- æŒ‡å®šæ”¾ç½®ç”Ÿæˆçš„æºæ–‡ä»¶çš„ä½ç½®
								</p>
							</li>
							<li>
								<p>
									<code>-g</code>
									-- ç”Ÿæˆæ‰€æœ‰è°ƒè¯•ä¿¡æ¯
								</p>
							</li>
							<li>
								<p>
									<code>-g:non e</code>
									-- ä¸ç”Ÿæˆä»»ä½•è°ƒè¯•ä¿¡æ¯
								</p>
							</li>
							<li>
								<p>
									<code>-g:{lines,vars,source}</code>
									-- åªç”ŸæˆæŸäº›è°ƒè¯•ä¿¡æ¯
								</p>
							</li>
							<li>
								<p>
									<code>-nowarn</code>
									-- ä¸ç”Ÿæˆä»»ä½•è­¦å‘Š
								</p>
							</li>
							<li>
								<p>
									<code>-verbose</code>
									-- è¾“å‡ºæœ‰å…³ç¼–è¯‘å™¨æ­£åœ¨æ‰§è¡Œçš„æ“ä½œçš„æ¶ˆæ¯
								</p>
							</li>
							<li>
								<p>
									<code>-deprecation</code>
									-- è¾“å‡ºä½¿ç”¨å·²è¿‡æ—¶çš„ API çš„æºä½ç½®
								</p>
							</li>
							<li>
								<p>
									<code>-bootclasspath &lt;path&gt; </code>
									-- è¦†ç›–å¼•å¯¼ç±»æ–‡ä»¶çš„ä½ç½®
								</p>
							</li>
							<li>
								<p>
									<code>-extdirs &lt;dir&gt; </code>
									-- è¦†ç›–æ‰€å®‰è£…æ‰©å±•çš„ä½ç½®
								</p>
							</li>
							<li>
								<p>
									<code>-endorseddirs &lt;dir&gt; </code>
									-- è¦†ç›–ç­¾åçš„æ ‡å‡†è·¯å¾„çš„ä½ç½®
								</p>
							</li>
							<li>
								<p>
									<code>-proc:{none,only}</code>
									-- æ§åˆ¶æ˜¯å¦æ‰§è¡Œæ³¨é‡Šå¤„ç†å’Œ/æˆ–ç¼–è¯‘ã€‚
								</p>
							</li>
							<li>
								<p>
									<code>-processor
										&lt;class1&gt;[,&lt;class2&gt;,&lt;class3&gt;...] </code>
									-- è¦è¿è¡Œçš„æ³¨é‡Šå¤„ç†ç¨‹åºçš„åç§°; ç»•è¿‡é»˜è®¤çš„æœç´¢è¿›ç¨‹
								</p>
							</li>
							<li>
								<p>
									<code> -processorpath &lt;path&gt; </code>
									-- æŒ‡å®šæŸ¥æ‰¾æ³¨é‡Šå¤„ç†ç¨‹åºçš„ä½ç½®
								</p>
							</li>
							<li>
								<p>
									<code>-implicit:{none,class}</code>
									-- æŒ‡å®šæ˜¯å¦ä¸ºéšå¼å¼•ç”¨æ–‡ä»¶ç”Ÿæˆç±»æ–‡ä»¶
								</p>
							</li>
							<li>
								<p>
									<code>-encoding &lt;encode&gt; </code>
									-- æŒ‡å®šæºæ–‡ä»¶ä½¿ç”¨çš„å­—ç¬¦ç¼–ç 
								</p>
							</li>
							<li>
								<p>
									<code>-source &lt;version&gt; </code>
									-- æä¾›ä¸æŒ‡å®šå‘è¡Œç‰ˆçš„æºå…¼å®¹æ€§
								</p>
							</li>
							<li>
								<p>
									<code>-target &lt;version&gt; </code>
									-- ç”Ÿæˆç‰¹å®š VM ç‰ˆæœ¬çš„ç±»æ–‡ä»¶
								</p>
							</li>
							<li>
								<p>
									<code>-version</code>
									-- ç‰ˆæœ¬ä¿¡æ¯
								</p>
							</li>
							<li>
								<p>
									<code>-help</code>
									-- è¾“å‡ºæ ‡å‡†é€‰é¡¹çš„æè¦
								</p>
							</li>
							<li>
								<p>
									<code>-Akey[=value]</code>
									-- ä¼ é€’ç»™æ³¨é‡Šå¤„ç†ç¨‹åºçš„é€‰é¡¹
								</p>
							</li>
							<li>
								<p>
									<code>-X</code>
									-- è¾“å‡ºéæ ‡å‡†é€‰é¡¹çš„æè¦
								</p>
							</li>
							<li>
								<p>
									<code> -J &lt;tag&gt; </code>
									-- ç›´æ¥å°† &lt;tag&gt; ä¼ é€’ç»™è¿è¡Œæ—¶ç³»ç»Ÿ
								</p>
							</li>
							<li>
								<p>
									<code>-Werror</code>
									-- å‡ºç°è­¦å‘Šæ—¶ç»ˆæ­¢ç¼–è¯‘
								</p>
							</li>
						</ul>


					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-java"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">java å·¥å…·</h3>
					</div>
					<div class="panel-body">
						<p>
							å®ä¾‹å‚è§: --
							<a href="#java-examples">examples</a>
						<pre class="brush: bash;">
$ java [options] classname [args]

$ java [options] -jar filename [args]
</pre>

						<p>Javaå¯åŠ¨å‘½ä»¤å¯é€‰é¡¹(options)å¤§è‡´å¯åˆ†ä¸ºæ ‡å‡†å’Œéæ ‡å‡†ä¸¤ç§ï¼Œéæ ‡å‡†çš„å¯é€‰é¡¹ä¸ä¿è¯åœ¨æ‰€æœ‰å¹³å°ä¸Šéƒ½å®ç°ï¼Œå¹¶ä¸”æœªæ¥çš„ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šè¢«ä¿®æ”¹ä¸”ä¸å‘ŠçŸ¥ï¼Œæ€»ä¹‹å°±æ˜¯ä¸ç¨³å®š(Unstable)ã€‚ä¸è¿‡æœ‰çš„éæ ‡å‡†å¯é€‰é¡¹è¿˜æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œåé¢æˆ‘ä»¬ä¼šè°ˆåˆ°ã€‚</p>
						<h5 class="text-primary">æ ‡å‡†å¯é€‰é¡¹(Standard options)</h5>
						<ul>
							<li>
								<p>
									<strong>-client</strong> ä¸ <strong>-server</strong><br>
									ä»¥clienæˆ–è€…serveræ¨¡å¼å¯åŠ¨ï¼ŒäºŒé€‰ä¸€ï¼ŒJavaè¿è¡Œæ—¶ç¯å¢ƒä¼šä¾åœºæ™¯æ¥ä¼˜åŒ–è‡ªå·±çš„é…ç½®ç­–ç•¥ã€‚å€¼å¾—æŒ‡å‡ºçš„æ˜¯64ä½çš„Javaä¸æ”¯æŒclientæ¨¡å¼ï¼Œé»˜è®¤å°±æ˜¯serverã€‚ä¸åŒå¹³å°çš„é»˜è®¤é…ç½®å¯ä»¥å‚è€ƒ
									<a target="_blank"
										href="http://docs.oracle.com/javase/6/docs/technotes/guides/vm/server-class.html">Server-Class
										Machine Detection</a>
								</p>
							</li>
							<li>
								<p>
									<strong>-d32</strong> ä¸ <strong>-d64</strong> <br>
									ç¨‹åºè¿è¡Œåœ¨32ä½æˆ–è€…64ä½ç¯å¢ƒ
								</p>
							</li>
							<li>
								<p>
									<strong>-cp</strong> å’Œ <strong>-classpath</strong><br>
									æœ€é‡è¦çš„å¯é€‰é¡¹ä¹‹ä¸€ï¼ŒæŒ‡å®šJavaè¿è¡Œæ—¶ç¯å¢ƒæœç´¢classçš„è·¯å¾„ã€‚<strong>-cpåªæ˜¯-classpathçš„ç®€å†™ï¼Œåšç›¸åŒçš„äº‹æƒ…</strong>ï¼Œç”¨å…¶ä¸­ä¹‹ä¸€å³å¯ã€‚å¤šä¸ªè·¯å¾„ç”¨<strong>è‹±æ–‡é‡Œé¢çš„åˆ†å·</strong>åˆ†éš”ã€‚å¦‚æœ-cpå’Œ-classpathéƒ½æ²¡æœ‰ä½¿ç”¨ï¼ŒCLASSPATHç¯å¢ƒå˜é‡ä¹Ÿæ²¡ç”¨è®¾å®šï¼Œé‚£ä¹ˆå°±æ˜¯å½“å‰è·¯å¾„(.)ã€‚
								</p>
							</li>
							<li>
								<p>
									<strong>-Dproperty=value</strong><br>
									è®¾å®šç³»ç»Ÿå±æ€§å€¼ï¼Œæ¯”å¦‚ç¼–ç -Dfile.encoding=UTF-8ã€‚å¯ä»¥è®¾å®šä¸€äº›ç³»ç»Ÿä½¿ç”¨çš„å±æ€§ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å‘ç¨‹åºä¼ é€’å€¼ï¼Œæ¯”å¦‚ç¨‹åºçš„æ ¹ç›®å½•ã€‚
									å¯ä»¥é€šè¿‡
									<code>System.getProperty("keyname")</code>
									æ¥è·å–å±æ€§ã€‚
								</p>
							</li>
							<li>
								<p>
									<strong>-help</strong>ä¸<strong>-?</strong><br> éƒ½æ˜¯è¦æ±‚æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
								</p>
							</li>
							<li>
								<p>
									<strong>-disableassertions[:[packagename]...|:classname]</strong>ä¸<strong>-da[:[packagename]...|:classname]</strong><br>
									ç¦ç”¨æ–­è¨€ï¼Œå¯ä»¥æŒ‡å®šåŒ…å(æ³¨æ„åŒ…åé¢çš„ä¸‰ä¸ªç‚¹)æˆ–è€…classçš„åç§°ã€‚é»˜è®¤å°±æ˜¯ç¦ç”¨çš„ã€‚daåªæ˜¯disableassertionsçš„ç¼©å†™ï¼Œä½¿ç”¨æ–¹æ³•å®Œå…¨ä¸€æ ·ã€‚
									ç¦ç”¨åŒ…:
									<code> da:org.slf4j...</code>
									<br> ç¦ç”¨ç±»:
									<code>da:org.slf4j.LoggerFactory</code>
								</p>
							</li>
							<li>
								<p>
									<strong>enableassertions[:packagename...|:classname]</strong>ä¸<strong>ea[:packagename...|:classname]</strong><br>
									å¯ç”¨æ–­è¨€ï¼Œå¯ä»¥æŒ‡å®šåŒ…å(æ³¨æ„åŒ…åé¢çš„ä¸‰ä¸ªç‚¹)æˆ–è€…classçš„åç§°ã€‚eaåªæ˜¯enableassertionsçš„ç¼©å†™ï¼Œä½¿ç”¨æ–¹æ³•å®Œå…¨ä¸€æ ·ã€‚
									å¯ç”¨åŒ…:
									<code>ea:org.slf4j...</code>
									<br> å¯ç”¨ç±»:
									<code>ea:org.slf4j.LoggerFactory</code>
								</p>
							</li>
							<li>
								<p>
									<strong>disablesystemassertions</strong>ä¸<strong>dsa</strong><br>
									ç¦ç”¨ç³»ç»Ÿç±»(syetem class)æ–­è¨€
								</p>
							</li>
							<li>
								<p>
									<strong>enablesystemassertions</strong>ä¸<strong>esa</strong><br>
									å¯ç”¨ç³»ç»Ÿç±»(syetem class)æ–­è¨€
								</p>
							</li>
							<li>
								<p>
									<strong>-version</strong> ä¸ <strong>-showversion</strong><br>
									è¿™ä¸¤ä¸ªéƒ½æ˜¾ç¤ºJavaçš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œä¸è¿‡åè€…ä¼šæŠŠhelpçš„ä¿¡æ¯ä¹Ÿæ˜¾ç¤ºå‡ºæ¥ã€‚
								</p>
							</li>
							<li>
								<p>
									<strong>verbose:class</strong>, <strong>verbose:gc</strong>,
									"verbose:jni"<br>
									verbose:classæ˜¾ç¤ºclassåŠ è½½ä¿¡æ¯ï¼Œverbose:gcæ˜¾ç¤ºJavaåƒåœ¾å›æ”¶çš„ä¿¡æ¯ã€‚verbose:jniæ˜¾ç¤ºJNI(Java
									Native Interface)ä¿¡æ¯ã€‚
								</p>
							</li>
							<li>
								<p>
									<strong>-agentlib:libname[=options]</strong>ä¸<strong>-agentpath:pathname[=options]</strong><br>
									éƒ½æ˜¯åŠ è½½æœ¬åœ°ä»£ç†åº“(Native Agent
									Library)ï¼Œ-agentlibåªéœ€è¦libraryçš„åç§°ï¼Œä¸”ä¼šæ ¹æ®ä¸åŒçš„æ“ä½œç³»ç»Ÿè½¬ä¸ºå¯¹åº”çš„æ–‡ä»¶(Windowsä¸ºDLL)ã€‚
									-agentpathæŒ‡å®šlibraryçš„ç»å¯¹è·¯å¾„ã€‚
								</p>
							</li>
						</ul>
						<h5 class="text-primary">éæ ‡å‡†å¯é€‰é¡¹(Nonstandard Options)</h5>
						<p>éæ ‡å‡†çš„å¯é€‰é¡¹éƒ½ä»¥-Xå¼€å§‹ï¼Œå…¶ä¸­çš„éƒ¨åˆ†é€‰é¡¹å¦‚ä¸‹:</p>
						<ul>
							<li>
								<p>
									<strong>-X</strong><br> æ˜¾ç¤ºæ‰€æœ‰éæ ‡å‡†é€‰é¡¹çš„ä¿¡æ¯ã€‚çœ‹çœ‹éƒ½æœ‰äº›ä»€ä¹ˆéæ ‡å‡†é€‰é¡¹å§ã€‚
									<code>java -X</code>
									ã€‚
								</p>
							</li>
							<li>
								<p>
									<strong>-Xms&lt;size&gt;</strong><br> è®¾ç½®Javaå †çš„åˆå§‹åŒ–å¤§å°ã€‚ä¾‹å¦‚
									-Xms1024mï¼ŒJavaå †çš„åˆå§‹åŒ–å¤§å°å°±è®¾ç½®ä¸º1Gã€‚
								</p>
							</li>
							<li>
								<p>
									<strong>-Xmx&lt;size&gt;</strong><br> è®¾ç½®Javaå †çš„æœ€å¤§å€¼ã€‚ä¾‹å¦‚
									-Xmx3072mï¼ŒJavaå †çš„æœ€å¤§å€¼å°±è®¾ç½®ä¸º3Gã€‚
								</p>
							</li>
							<li>
								<p>
									<strong>-Xss&lt;size&gt;</strong><br> è®¾ç½®Javaçº¿ç¨‹æ ˆçš„å€¼ã€‚ä¾‹å¦‚
									-Xss128mï¼ŒJavaçº¿ç¨‹æ ˆçš„å€¼å°±è®¾ç½®ä¸º128å…†ã€‚
								</p>
							</li>
							<li>
								<p>
									<strong>-Xnoclassgc</strong><br> ç¦ç”¨Javaåƒåœ¾å›æ”¶å™¨ã€‚
								</p>
							</li>
							<li>
								<p>
									<strong>-Xincgc</strong><br> å¯ç”¨Javaå¢é‡å¼åƒåœ¾å›æ”¶å™¨ã€‚
								</p>
							</li>
							<li>
								<p>
									<strong>-Xmixed</strong><br> è§£é‡Šæ¨¡å¼å’Œç¼–è¯‘æ¨¡å¼æ··åˆæ‰§è¡Œ
								</p>
							</li>
							<li>
								<p>
									<strong>-Xint</strong><br> ä»…è§£é‡Šæ¨¡å¼æ‰§è¡Œ
								</p>
							</li>
							<li>
								<p>
									<strong>-Xshare:on</strong>ï¼Œ<strong>-Xshare:off</strong>ï¼Œ<strong>-Xshare:auto</strong>
									è®¾å®šç±»æ•°æ®å…±äº«CDS(Class data
									sharing)æ˜¯å¦å¼€å¯ã€‚-Xshare:onè¦æ±‚ä¸€å®šè¦ç”¨å…±äº«çš„ç±»æ•°æ®ï¼›-Xshare:autoè¡¨ç¤ºè®©ç³»ç»Ÿè‡ªå·±åˆ¤æ–­
									æ˜¯å¦æœ‰ç±»å…±äº«æ•°æ®ï¼Œæœ‰å°±ç”¨ï¼Œæ²¡æœ‰ä¸ç”¨ï¼›-Xshare:offç¦ç”¨å…±äº«ç±»æ•°æ®ã€‚
								</p>
							</li>
							<li>
								<p>
									<strong>-Xcheck:jni</strong><br> é’ˆå¯¹JNIå‡½æ•°åšé¢å¤–çš„æ£€æŸ¥
								</p>
							</li>
						</ul>
						<h5 class="text-primary">ä¸ç¨³å®š(Unstable)çš„é€‰é¡¹</h5>
						<p>ä¸ç¨³å®šçš„é€‰é¡¹å½“ç„¶æ˜¯éæ ‡å‡†çš„ï¼Œéƒ½ä»¥-XXå¼€å¤´ã€‚è¿™ä¸€ç±»å‚æ•°æœ‰å¾ˆå¤šï¼Œæš‚æ—¶åªåˆ—å…¶ä¸­çš„å‡ ä¸ª:</p>
						<ul>
							<li>
								<p>
									<strong>-XX:PermSize&lt;=size&gt;</strong>å’Œ<strong>-XX:MaxPermSize&lt;=size&gt;</strong><br>
									è®¾ç½®Javaæ°¸ä¹…ä¿å­˜åŒºåŸŸ(Permanent Generation
									Space)çš„å¤§å°ã€‚PermSizeè®¾ç½®åˆå§‹å€¼ï¼ŒMaxPermSizeè®¾ç½®æœ€å¤§å€¼ã€‚ <strong>
										è¯¥åŒºåŸŸä¸»è¦å­˜å‚¨classçš„ä¿¡æ¯ï¼Œä¸”ä¸ä¼šè¢« åƒåœ¾å›æ”¶å™¨å›æ”¶</strong>ï¼Œå¦‚æœåŠ è½½çš„classè¿‡å¤šï¼Œå°±ä¼šæŠ¥é”™:java.lang.OutOfMemoryError:
									PermGen spaceã€‚ -XX:PermSize=64m
									-XX:MaxPermSize=128mï¼Œè¡¨ç¤ºJavaæ°¸ä¹…ä¿å­˜åŒºåŸŸå¤§å°åˆå§‹åŒ–é—®ä¸º64å…†ï¼Œæœ€å¤§ä¸º128å…†ã€‚
								</p>
							</li>
							<li>
								<p>
									<strong>-XX:+UseParallelGC</strong><br> å¼€å¯å¹¶è¡ŒJavaå›æ”¶å™¨
								</p>
							</li>
							<li>
								<p>
									<strong>-XX:+PrintGCDetails</strong><br> æ˜¾ç¤ºæ¯”
									<code>-verbose:gc</code>
									æ›´å¤šæ›´å‡†ç¡®çš„åƒåœ¾å›æ”¶ä¿¡æ¯
								</p>
							</li>
							<li>
								<p>
									<strong>-XX:+TraceClassLoading</strong><br> æ˜¾ç¤ºç±»åŠ è½½ä»¥åŠå¸è½½çš„ä¿¡æ¯
								</p>
							</li>
						</ul>
					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-jar"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">jar å·¥å…·</h3>
					</div>
					<div class="panel-body">
						<p>
							å®ä¾‹å‚è§: --
							<a href="#java-examples">examples</a>
						<pre class="brush: bash;">
# åˆ›å»º jar
$ jar c[efmMnv0] [entrypoint] [jarfile] [manifest] [-C dir] file ... [-Joption ...] [@arg-file ...]

# æ›´æ–° jar
$ jar u[efmMnv0] [entrypoint] [jarfile] [manifest] [-C dir] file ... [-Joption ...] [@arg-file ...]

# è§£å‹ jar
$ jar x[vf] [jarfile] file ... [-Joption ...] [@arg-file ...]

# æŸ¥çœ‹ jar åˆ—å‡º jar å†…å®¹
$ jar t[vf] [jarfile] file ... [-Joption ...] [@arg-file ...]

# ä¸º jar åˆ›å»ºç´¢å¼•
$ jar i jarfile [-Joption ...] [@arg-file ...]
</pre>
						<h5 class="text-primary">example</h5>
						<pre class="brush: bash;">
$ jar [cuxti][efmMnv0] jarfile [-C dir] [@arg-file ...] # å‰é¢5ä¸ªå‚æ•°å¿…å…ˆå…¶ä¸€
# f æŒ‡å®šjaråŒ…è·¯å¾„
# v ç”Ÿæˆè¯¦ç»†çš„æŠ¥é€ ï¼Œå¹¶è¾“å‡ºè‡³æ ‡å‡†è®¾å¤‡
# m æŒ‡å®šMANIFEST.MFé…ç½®æ–‡ä»¶ä½ç½®
 -M ä¸äº§ç”Ÿæ‰€æœ‰æ–‡ä»¶çš„æ¸…å•æ–‡ä»¶(Manifest.mf)
# 0 äº§ç”ŸjaråŒ…æ—¶ä¸å¯¹å…¶ä¸­çš„å†…å®¹è¿›è¡Œå‹ç¼©å¤„ç†
# i ä¸ºæŒ‡å®šçš„jaræ–‡ä»¶åˆ›å»ºç´¢å¼•æ–‡ä»¶
# -C è¡¨ç¤ºè½¬åˆ°ç›¸åº”çš„ç›®å½•ä¸‹æ‰§è¡Œjarå‘½ä»¤,ç›¸å½“äºcdåˆ°é‚£ä¸ªç›®å½•ï¼Œç„¶åä¸å¸¦-Cæ‰§è¡Œjarå‘½ä»¤

# æ‰“æˆjaråŒ…
$ jar cvf build/libs/demo.jar -C build/classes/ cm

# æ‰“æˆjaråŒ…, åœ¨è¿™é‡ŒæŒ‡å®šã€€MANIFEST.MF é…ç½®æ–‡ä»¶ä¸ºï¼šconfig/manifest-config.txt
$ jar cvfm build/libs/demo.jar config/manifest-config.txt -C build/classes/ cm

# åˆ—å‡º jar å†…å®¹
$ jar tvf build/libs/demo.jar
</pre>
					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-keytool"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">keytool å·¥å…·</h3>
					</div>
					<div class="panel-body">
						<p><b>keytool</b> æ˜¯ä¸€ä¸ª Java çš„å¯†é’¥å’Œè¯ä¹¦ç®¡ç†ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿç®¡ç†è‡ªå·±çš„å…¬é’¥/ç§é’¥å¯¹å’Œç›¸å…³è¯ä¹¦ä»¥ä¾›è‡ªå·±ä½¿ç”¨æˆ–ä½¿ç”¨æ•°å­—ç­¾åçš„æ•°æ®å®Œæ•´æ€§å’Œèº«ä»½éªŒè¯æœåŠ¡ã€‚å°†å¯†é’¥å’Œè¯ä¹¦å­˜åœ¨ä¸€ä¸ªç§°ä¸º keystore çš„æ–‡ä»¶ä¸­ã€‚</p>
                        <p><b>keytool</b> å‘½ä»¤ï¼š</p>
                        <pre class="brush: bash;">
## 1.åˆ›å»º/æ·»åŠ æ•°æ®åˆ° keystore
    -genseckey            ## ç”Ÿæˆå¯†é’¥
    -genkeypair/-genkey   ## ç”Ÿæˆå…¬é’¥/ç§é’¥å¯¹
    -gencert              ## ç”Ÿæˆè¯ä¹¦
    -importcert/import    ## å¯¼å…¥è¯ä¹¦
    -importpassword       ## å¯¼å…¥å¯†ç 

## 2.ä»å¦ä¸€ä¸ª keystore å¯¼å…¥å†…å®¹
    -importkeystore       ## å¯¼å…¥å†…å®¹

## 3.ç”Ÿæˆè¯ä¹¦è¯·æ±‚
    -certreq              ## ç”Ÿæˆè¯ä¹¦è¯·æ±‚

## 4.å¯¼å‡ºæ•°æ®
    -exportcert           ## å¯¼å‡ºæ•°æ®

## 5.æ˜¾ç¤ºæ•°æ®
    -list                 ## æŸ¥çœ‹ keystore ä¿¡æ¯
    -printcert            ## æŸ¥çœ‹è¯ä¹¦ä¿¡æ¯
    -printcertreq         ##
    -printcrl             ##

## 6.ç®¡ç† keystore
    -storepasswd          ## æ›´æ”¹ storepass
    -keypasswd            ## æ›´æ”¹ keypass
    -delete               ## åˆ é™¤
    -changealias          ## æ›´æ”¹åˆ«å
</pre>
						<p><b>keytool</b> é»˜è®¤å‚æ•°ï¼š</p>
						<pre class="brush: bash;">
-alias    ## åˆ«åï¼Œå¦‚ä¸æŒ‡å®šï¼Œé»˜è®¤ä¸ºï¼š mykey
-keyalg   ## åŠ å¯†ç®—æ³•
   ## "DSA" å¦‚ä¸æŒ‡å®šç®—æ³•ï¼Œåœ¨åˆ›å»ºå…¬é’¥/ç§é’¥å¯¹çš„æ—¶å€™(-genkeypair)
   ## "DES" å¦‚ä¸æŒ‡å®šç®—æ³•ï¼Œåœ¨åˆ›å»ºå¯†é’¥çš„æ—¶å€™(-genseckey)é»˜è®¤ä¸º: DES
-keysize  ## å¯†ç é•¿åº¦
   ## 2048 å¦‚ä¸æŒ‡å®šå¤§å°ï¼Œåœ¨åˆ›å»ºå…¬é’¥/ç§é’¥å¯¹ï¼Œå¹¶ä¸”åŠ å¯†ç®—æ³•ä¸º RSA çš„æ—¶å€™(-genkeypair and -keyalg "RSA")
   ## 1024 å¦‚ä¸æŒ‡å®šå¤§å°ï¼Œåœ¨åˆ›å»ºå…¬é’¥/ç§é’¥å¯¹ï¼Œå¹¶ä¸”åŠ å¯†ç®—æ³•ä¸º RSA çš„æ—¶å€™(-genkeypair and -keyalg "DSA")
   ## 256 å¦‚ä¸æŒ‡å®šå¤§å°ï¼Œåœ¨åˆ›å»ºå…¬é’¥/ç§é’¥å¯¹ï¼Œå¹¶ä¸”åŠ å¯†ç®—æ³•ä¸º EC çš„æ—¶å€™(-genkeypair and -keyalg "EC")
   ## 56 å¦‚ä¸æŒ‡å®šå¤§å°ï¼Œåœ¨åˆ›å»ºå¯†é’¥ï¼Œå¹¶ä¸”åŠ å¯†ç®—æ³•ä¸º DES çš„æ—¶å€™(-genseckey and -keyalg "DES")
   ## 168 å¦‚ä¸æŒ‡å®šå¤§å°ï¼Œåœ¨åˆ›å»ºå¯†é’¥ï¼Œå¹¶ä¸”åŠ å¯†ç®—æ³•ä¸º DESede çš„æ—¶å€™(-genseckey and -keyalg "DESede")
-validity  ## å¦‚ä¸æŒ‡å®šï¼Œé»˜è®¤ä¸ºï¼š 90 å¤©
-keystore  ## å¦‚ä¸æŒ‡å®šï¼Œé»˜è®¤ä¸ºï¼šï½/.keystore
-storetype ## é»˜è®¤ä¸º: KeyStore.getDefaultType();å¯é€‰ï¼šjceks(-genseckey åªèƒ½ç”¨è¿™ä¸ª), jks, dks, pkcs11, pkcs12
-file
   stdin è¯»ä¸ºæ ‡å‡†è¾“å…¥
   stdout å†™ä¸ºæ ‡å‡†è¾“å‡º
-protected false
</pre>

						<p><b>keytool</b> å®ä¾‹ï¼š</p>
						<pre class="brush: bash;">
## 1.åˆ›å»º DES åŠ å¯†çš„å¯†é’¥(é»˜è®¤ä¸º DES åŠ å¯†)
$ keytool -genseckey -alias des -storepass ilesson -keypass ilessonKey -storetype jceks -keystore des.jce

## 2.åˆ›å»º DESede åŠ å¯†çš„å¯†é’¥(æœªæŒ‡å®š keypass, éœ€è¦åœ¨æ§åˆ¶å°è¾“å…¥)
$ keytool -genseckey -alias DESede -storepass ilesson -keyalg DESede -storetype jceks -keystore des.jce

## 3.æŸ¥çœ‹ keystore ä¸­çš„å¯†é’¥ä¿¡æ¯
$ keytool -list -v -keystore des.jce -storepass ilesson -storetype jceks
$ keytool -list -rfc -keystore des.jce -storepass ilesson -storetype jceks

## 4.ç”Ÿæˆ RSA åŠ å¯†ï¼ŒSHA256withRSA ç­¾åï¼Œæœ‰æ•ˆæœŸ 365 å¤©çš„ 2048 ä½ç§é’¥
$ keytool -genkeypair -alias rsa -storepass ilesson -storetype jceks -keystore private.jce -keyalg RSA -validity 365 -dname "CN=lesson1234.com, OU=ilesson, O=ilesson, L=ShenZhen, ST=GuangDong, C=CN"
$ keytool -list -v -keystore private.jce -storepass ilesson -storetype jceks    ## æŸ¥çœ‹æœ‰æ•ˆæœŸï¼ŒåŠ å¯†ç®—æ³•...
$ keytool -list -rfc -keystore private.jce -storepass ilesson -storetype jceks  ## æŸ¥çœ‹ Base64 æ ¼å¼çš„å¯†ç 

## 5.å¯¼å‡ºä¸ºå•ä¸ªæ¡ç›®ä¸º CRT æ–‡ä»¶
$ keytool -exportcert -alias rsa -keystore private.jce -file private.crt -storepass ilesson
$ keytool -printcert -file private.crt -rfc  ## æŸ¥çœ‹è¯ä¹¦ä¿¡æ¯

## 6.å¯¼å…¥ä¸€ä¸ªè¯ä¹¦åˆ° keystore
$ keytool -importcert -keystore des.jce -storepass ilesson -storetype jceks -file private.crt

## 7.åˆ é™¤æŒ‡å®šåˆ«åçš„æ¡ç›®
$ keytool -delete -alias rsa -keystore private.jce -storepass ilesson

## 8.ä¿®æ”¹ storepass
$ keytool -storepasswd -keystore private.jce -storepass ilesson -new ilesson_modify

## 9.ä¿®æ”¹ keypass
$ keytool -keypasswd -alias rsa -keypass ilessonKey -new ilessonKey_modify  -keystore private.jce -storepass ilesson
</pre>

						<p><b>keytool</b> å‘½ä»¤è¯¦æƒ…ï¼š</p>
						<pre class="brush: bash;">
-genseckey
	-alias &lt;alias>                  ## åˆ«å
	-storepass &lt;arg>                ## keystore å¯†ç 
	-storetype &lt;storetype>          ## keystore ç±»å‹
	-keystore &lt;keystore>            ## keystore è·¯å¾„
	-keyalg &lt;keyalg>                ## åŠ å¯†ç®—æ³•
	-keysize &lt;keysize>              ## å¯†é’¥å¤§å°
	-keypass &lt;arg>                  ## key å¯†ç 
    -v                              ## verbose è¾“å‡º
	-protected                      ## é€šè¿‡å—ä¿æŠ¤çš„èº«ä»½éªŒè¯è·¯å¾„

-genseckeypair
	-alias &lt;alias>                  ## åˆ«å
	-destalias &lt;destalias>          ## ç›®æ ‡åˆ«å
	-storepass &lt;arg>                ## keystore å¯†ç 
	-storetype &lt;storetype>          ## keystore ç±»å‹
	-keystore &lt;keystore>            ## keystore è·¯å¾„
	-keyalg &lt;keyalg>                ## åŠ å¯†ç®—æ³•
	-keysize &lt;keysize>              ## å¯†é’¥å¤§å°
	-keypass &lt;arg>                  ## key å¯†ç 
	-sigalg &lt;sigalg>                ## ç­¾åç®—æ³•
	-startdate &lt;startdate>          ## è¯ä¹¦æœ‰æ•ˆæœŸå¼€å§‹æ—¥æœŸï¼Œä¸€èˆ¬ä»ç°åœ¨å¼€å§‹ï¼Œä¸ç”¨å†™ï¼Œæ ¼å¼ä¸ºï¼š yyyy/mm/dd HH:MM:SS
	-validity &lt;valDays>             ## æœ‰æ•ˆæœŸ
	-ext &lt;value>                    ##
	-dname &lt;dname>  ## CN=(åå­—), OU=(ç»„ç»‡å•ä½åç§°), O=(ç»„ç»‡åç§°), L=(åŸå¸‚), ST=(çœä»½), C=(ä¸¤ä½å›½å®¶ä»£ç )
	-v                              ## verbose è¾“å‡º
	-protected                      ## é€šè¿‡å—ä¿æŠ¤çš„èº«ä»½éªŒè¯è·¯å¾„


</pre>
					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-examples"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">examples</h3>
					</div>
					<div class="panel-body">
						<div class="row">
							<div class="col-md-7">
								<ul>
									<li>
										<p>
											åªæœ‰æºæ–‡ä»¶ï¼Œä¸å¼•ç”¨ç¬¬ä¸‰æ–¹jarï¼Œç¼–è¯‘è¿è¡Œï¼Œæ‰“åŒ…ï¼š(è¿˜æ²¡æœ‰ä½¿ç”¨
											<code>libs/commons-lang3-3.5.jar</code>
											ä¸­çš„
											<code>StringUtils</code>
											ç±»)
										</p>
										<pre class="brush: bash;">
# ç¼–è¯‘ java æºä»£ç 
$ javac -d build/classes/ \
	src/cm/nate/model/Person.java \
	src/cm/nate/Main.java
# è¦ç¼–è¯‘çš„æºæ–‡ä»¶å¤ªå¤šæ—¶ï¼Œå¯ä»¥å†™å…¥ res/source-list.txt æ–‡ä»¶
$ javac -d build/classes @config/source-list.txt

# ç›´æ¥è¿è¡Œclass
$ java -cp "build/classes" cm.nate.Main

# æ‰“æˆjaråŒ…
$ jar cvf build/libs/demo.jar -C build/classes/ cm

# è¿è¡ŒjaråŒ…
$ java -cp build/libs/demo.jar cm.nate.Main
</pre>
									</li>
									<li>
										<p>
											æºæ–‡ä»¶å¼•ç”¨ç¬¬ä¸‰æ–¹jarï¼Œç¼–è¯‘è¿è¡Œï¼Œæ‰“åŒ…ï¼š(ä½¿ç”¨
											<code>libs/commons-lang3-3.5.jar</code>
											ä¸­çš„
											<code>StringUtils</code>
											ç±»)
										</p>
										<pre class="brush: bash;">
# ç¼–è¯‘ java æºä»£ç 
$ javac -d build/classes \
	-cp libs/commons-lang3-3.5.jar \
	@config/source-list.txt

# ç›´æ¥è¿è¡Œclass
$ java -cp \
	"build/classes:libs/commons-lang3-3.5.jar" \
 	cm.nate.Main

# æ‰“æˆjaråŒ…
$ jar cvf build/libs/demo.jar -C build/classes/ cm

# è¿è¡ŒjaråŒ…
$ java -cp \
	build/libs/demo.jar:libs/commons-lang3-3.5.jar \
	cm.nate.Main
</pre>
									</li>
								</ul>
							</div>
							<div class="col-md-5">
								<p>ç›®å½•ç»“æ„å¦‚ä¸‹:</p>
								<pre class="brush: bash;">
â”œâ”€â”€ build
â”‚Â Â  â”œâ”€â”€ classes
â”‚Â Â  â”‚Â Â  â””â”€â”€ cm
â”‚Â Â  â”‚Â Â      â””â”€â”€ nate
â”‚Â Â  â”‚Â Â          â”œâ”€â”€ Main.class
â”‚Â Â  â”‚Â Â          â””â”€â”€ model
â”‚Â Â  â”‚Â Â              â””â”€â”€ Person.class
â”‚Â Â  â”œâ”€â”€ docs
â”‚Â Â  â””â”€â”€ libs
â”‚Â Â      â”œâ”€â”€ demo.jar
â”‚Â Â      â””â”€â”€ libs
â”‚Â Â          â””â”€â”€ commons-lang3-3.5.jar
â”œâ”€â”€ config
â”‚Â Â  â”œâ”€â”€ manifest-config.txt
â”‚Â Â  â””â”€â”€ source-list.txt
â”œâ”€â”€ libs
â”‚Â Â  â””â”€â”€ commons-lang3-3.5.jar
â””â”€â”€ src
    â””â”€â”€ cm
        â””â”€â”€ nate
            â”œâ”€â”€ Main.java
            â””â”€â”€ model
                â””â”€â”€ Person.java
</pre>
							</div>
						</div>

						<ul>
							<li>
								<p>
									æ‰“åŒ…å¯è¿è¡Œçš„jaråŒ…(åœ¨
									<code>MANIFEST.MF</code>
									æ–‡ä»¶ä¸­æŒ‡å®šä¸»ç±»),å› ä¸ºè¿™é‡Œå¼•ç”¨äº†ç¬¬ä¸‰æ–¹çš„jarï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä¸¤ç§æ–¹æ³•ï¼š
								</p>
								<ol>
									<li>
										<p>
											åœ¨
											<code>manifest-config.txt</code>
											æ–‡ä»¶ä¸­æŒ‡å®š
											<code>Class-Path(å¤šä¸ªjarç”¨ç©ºæ ¼åˆ†å‰²)</code>
											å’Œ
											<code>Main-Class</code>
											,<span class="text-danger">æ³¨æ„æœ€åæœ‰ç©ºè¡Œè¦ä¿ç•™</span>
										</p>
										<pre class="brush: bash;">
Class-Path: libs/commons-lang3-3.5.jar
Main-Class: cm.nate.Main
 
</pre>
										<p>
											è¦æ³¨æ„çš„æ˜¯å½“å‰ç›®å½•ä¸‹è¦æœ‰
											<code>libs/commons-lang3-3.5.jar</code>
										</p>
										<pre class="brush: bash;">
# ç¼–è¯‘ java æºä»£ç 
$ javac -d build/classes -cp libs/commons-lang3-3.5.jar @config/source-list.txt

# ç›´æ¥è¿è¡Œclass
$ java -cp "build/classes:libs/commons-lang3-3.5.jar" cm.nate.Main

# æ‰“æˆjaråŒ…, åœ¨è¿™é‡ŒæŒ‡å®šã€€MANIFEST.MF é…ç½®æ–‡ä»¶ä¸ºï¼šconfig/manifest-config.txt
$ jar cvfm build/libs/demo.jar config/manifest-config.txt -C build/classes/ cm

# è¿è¡ŒjaråŒ…ï¼Œèƒ½è¿è¡Œæ˜¯å› ä¸ºåœ¨å½“å‰ç›®å½•ä¸‹æœ‰ libs/commons-lang3-3.5.jarå­˜åœ¨
$ java -jar build/libs/demo.jar
</pre>
									</li>
									<li>
										<p>
											åœ¨
											<code>manifest-config.txt</code>
											æ–‡ä»¶ä¸­æŒ‡å®š
											<code>Main-Class</code>
											,<span class="text-danger">æ³¨æ„æœ€åæœ‰ç©ºè¡Œè¦ä¿ç•™</span>
										</p>
										<pre class="brush: bash;">
Main-Class: cm.nate.Main
 
</pre>
										<p>è¦æ³¨æ„çš„æ˜¯è¦è§£æä¾èµ–çš„jaråŒ…ï¼Œç„¶åæ‰“åŒ…çš„æ—¶å€™ä¸€èµ·æ‰“åŒ…è¿›å»</p>
										<pre class="brush: bash;">
# ç¼–è¯‘ java æºä»£ç 
$ javac -d build/classes -cp libs/commons-lang3-3.5.jar @config/source-list.txt

# ç›´æ¥è¿è¡Œclass
$ java -cp "build/classes:libs/commons-lang3-3.5.jar" cm.nate.Main

# å°†ä¾èµ–çš„jar è§£å‹åˆ° build/classesã€€ç›®å½•ä¸‹,ä¸‹ä¸€æ­¥ä¸€èµ·æ‰“åŒ…æˆè‡ªå·±çš„jar
$ unzip libs/commons-lang3-3.5.jar -d build/classes

# æ‰“æˆjaråŒ…, åœ¨è¿™é‡ŒæŒ‡å®šã€€MANIFEST.MF é…ç½®æ–‡ä»¶ä¸ºï¼šconfig/manifest-config.txt
$ jar cvf build/libs/demo.jar config/manifest-config.txt \
	-C build/classes/ cm -C build/classes org

# è¿è¡ŒjaråŒ…ï¼Œèƒ½è¿è¡Œæ˜¯å› ä¸ºä¾èµ–çš„jaråŒ…ï¼Œæ‰€æœ‰çš„classè¢«ä¸€èµ·æ‰“åŒ…åˆ° demo.jarä¸­äº†
$ java -jar build/libs/demo.jar
</pre>
								</ol>
							</li>
						</ul>
					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-base"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">Java åŸºæœ¬æ•°æ®ç±»å‹å’Œ String</h3>
					</div>
					<div class="panel-body">
						<div class="sub-item">
							<p>åŸºæœ¬æ•°æ®ç±»å‹åŒ…æ‹¬ booleanï¼ˆå¸ƒå°”å‹ï¼‰ã€floatï¼ˆå•ç²¾åº¦æµ®ç‚¹å‹ï¼‰ã€charï¼ˆå­—ç¬¦å‹ï¼‰ã€byteï¼ˆå­—èŠ‚å‹ï¼‰ã€shortï¼ˆçŸ­æ•´å‹ï¼‰ã€intï¼ˆæ•´å‹ï¼‰ã€longï¼ˆé•¿æ•´å‹ï¼‰å’Œ double ï¼ˆåŒç²¾åº¦æµ®ç‚¹å‹ï¼‰å…± 8 ç§åŸºæœ¬æ•°æ®ç±»å‹åŒ…æ‹¬ booleanï¼ˆå¸ƒå°”å‹ï¼‰ã€floatï¼ˆå•ç²¾åº¦æµ®ç‚¹å‹ï¼‰ã€charï¼ˆå­—ç¬¦å‹ï¼‰ã€byteï¼ˆå­—èŠ‚å‹ï¼‰ã€shortï¼ˆçŸ­æ•´å‹ï¼‰ã€intï¼ˆæ•´å‹ï¼‰ã€longï¼ˆé•¿æ•´å‹ï¼‰å’Œ double ï¼ˆåŒç²¾åº¦æµ®ç‚¹å‹ï¼‰å…± 8 ç§: </p>
							<table class="table table-bordered table-responsive">
								<tr>
									<th>ç±»å‹åç§°</th>
									<th>å…³é”®å­—</th>
									<th>å ç”¨å†…å­˜</th>
									<th>å–å€¼èŒƒå›´</th>
								</tr>
								<tr>
									<td>å­—èŠ‚å‹</td>
									<td>byte</td>
									<td>1 å­—èŠ‚</td>
									<td>-128~127, <code>-0x80~0x7F</code></td>
								</tr>
								<tr>
									<td>çŸ­æ•´å‹</td>
									<td>short</td>
									<td>2 å­—èŠ‚</td>
									<td>-32768~32767, <code>-0x8000~0x7FFF</code></td>
								</tr>
								<tr>
									<td>æ•´å‹</td>
									<td>int</td>
									<td>4 å­—èŠ‚</td>
									<td>-2147483648~2147483647, <code>-0x80000000~0x7FFFFFFF</code></td>
								</tr>
								<tr>
									<td>é•¿æ•´å‹</td>
									<td>long</td>
									<td>8 å­—èŠ‚</td>
									<td>-9223372036854775808L~9223372036854775807L, <code>-0x8000000000000000L~0x7FFFFFFFFFFFFFFFL</code></td>
								</tr>
								<tr>
									<td>å•ç²¾åº¦æµ®ç‚¹å‹</td>
									<td>float</td>
									<td>4 å­—èŠ‚</td>
									<td>+/-3.4E+38Fï¼ˆ6~7 ä¸ªæœ‰æ•ˆä½ï¼‰</td>
								</tr>
								<tr>
									<td>åŒç²¾åº¦æµ®ç‚¹å‹</td>
									<td>double</td>
									<td>8 å­—èŠ‚</td>
									<td>+/-1.8E+308 (15 ä¸ªæœ‰æ•ˆä½ï¼‰</td>
								</tr>
								<tr>
									<td>å­—ç¬¦å‹</td>
									<td>char</td>
									<td>2 å­—èŠ‚</td>
									<td>ISO å•ä¸€å­—ç¬¦é›†, <code>\u0000~\uFFFF</code></td>
								</tr>
								<tr>
									<td>å¸ƒå°”å‹</td>
									<td>boolean</td>
									<td>1 å­—èŠ‚</td>
									<td>true æˆ– false</td>
								</tr>
							</table>
							<p><b>åŸºæœ¬ç±»å‹çš„å­˜å–</b></p>
							<pre class="brush: java;">
try {
	// åˆ›å»ºä¸´æ—¶æ–‡ä»¶ï¼Œå¹¶åœ¨é€€å‡ºæ—¶åˆ é™¤
	File f = File.createTempFile("base", ".tmp");
	f.deleteOnExit();

	// å†™å…¥åŸºæœ¬ç±»å‹ï¼Œåœ¨å†™ UTF æ—¶ï¼Œå…¶å®åœ¨å‰é¢åŠ äº†ä¸¤ä¸ªå­—èŠ‚æ ‡è¯†å…¶é•¿åº¦ï¼Œå› æ­¤å…è®¸æœ€å¤§é•¿åº¦ä¸º 65535
	DataOutputStream dos = new DataOutputStream(new FileOutputStream(f));
	dos.writeBoolean(true);
	dos.writeBoolean(false);
	dos.writeChar('1');
	dos.writeByte(1);
	dos.writeInt(1);
	dos.writeShort(1);
	dos.writeLong(1L);
	dos.writeFloat(3.14f);
	dos.writeDouble(3.14);
	dos.writeUTF("Hello");
	dos.writeInt(1024);
	dos.flush();
	dos.close();

	DataInputStream dis = new DataInputStream(new FileInputStream(f));
	/** å…ˆæ¥çœ‹å†™å…¥æ–‡ä»¶çš„äºŒè¿›åˆ¶ï¼Œè¿™é‡Œç”¨åå…­è¿›åˆ¶å±•ç¤ºï¼š
	 * 01 00 0031 01 00000001 0001 0000000000000001 4048F5C3 40091EB851EB851F 000548656C6C6F 00000400
	 * 01 -- boolean çš„ true åœ¨è¿™é‡Œå­˜å‚¨çš„æ˜¯ int å€¼ 1 çš„ä½ 8 ä½ï¼Œ åœ¨è¯»å–çš„æ—¶å€™ é 0 åˆ™ä¸º true
	 * 00 -- boolean çš„ true åœ¨è¿™é‡Œå­˜å‚¨çš„æ˜¯ int å€¼ 0 çš„ä½ 8 ä½ï¼Œ åœ¨è¯»å–çš„æ—¶å€™ 0 åˆ™ä¸º false
	 * 0031 -- æ˜¯ â€˜1â€™ çš„ utf-16 ç¼–ç çš„ unicode å€¼
	 * 01 -- æ˜¯ int å€¼ 1 çš„ä½ 8 ä½
	 * 00000001 -- æ˜¯ int 1 çš„ int å€¼
	 * ... short, long, float, double åˆ†åˆ«ä»¥ 2å­—èŠ‚ï¼Œ8å­—èŠ‚ï¼Œ4å­—èŠ‚ï¼Œ8å­—èŠ‚å­˜å‚¨
	 * 000548656C6C6F -- è¿™ä¸ªæ˜¯ utf-8 æ–¹å¼å­˜å‚¨çš„ "Hello", ç”¨ä¸¤ä¸ªå­—èŠ‚: 0005 æ ‡è¯†é•¿åº¦ï¼Œ åé¢æ˜¯ String çš„ utf-8 ç¼–ç å€¼
	 * 00000400 -- æ˜¯ 1024
	 */
	byte[] bytes = new byte[(int) f.length()];
	dis.read(bytes); // å…¨éƒ¨è¯»å‡ºæ¥ï¼Œå°±æ˜¯ä¸Šé¢çš„äºŒè¿›åˆ¶
	log(bytesToHex(bytes));

	dis.skip(-f.length()); // å›åˆ°åŸå§‹ä½ç½®

	log(dis.readBoolean());
	log(dis.readBoolean());
	log(dis.readChar());
	log(dis.readByte());
	log(dis.readInt());
	log(dis.readShort());
	log(dis.readLong());
	log(dis.readFloat());
	log(dis.readDouble());
	log(dis.readUTF());
	log(dis.readInt());
	dis.close();
} catch (IOException e) {
	e.printStackTrace();
}
</pre>
							<p><b>åŸºæœ¬ç±»å‹çš„ä½¿ç”¨</b></p>
							<pre class="brush: java;">
byte b1 = 1;
byte b2 = 0x1;
byte b3 = 0b1;
byte b4 = -0b1;
byte b5 = (byte) 0b11111111111111111111111111111111;
byte b6 = (byte) 0b11111111111111111111111111111110;
byte b7 = (byte) 0b11111111111111111111111111111101;
log(b1, b2, b3, b4, b5, b6, b7); // 1  1  1  -1  -1  -2  -3

// char ä½¿ç”¨ unicode å­—ç¬¦é›†ï¼Œ ä½†å…¶é•¿åº¦ä¸º 2 ä¸ªå­—èŠ‚ï¼Œ å› æ­¤åªèƒ½è¡¨ç¤º BMP å¹³é¢çš„å­—ç¬¦ï¼Œé‡‡ç”¨ utf-16 ç¼–ç 
char c1 = 'a';
char c2 = 97;
char c3 = 0x61;
char c4 = 0b1100001;
char c5 = '\u0061';
log(c1, c2, c3, c4, c5); // a  a  a  a  a

// æ³¨æ„æ­¤å¤„çš„æœ€å 4 ä¸ª char è¡¨ç¤ºä¸ºä¸¤ä¸ª unicode çš„ SMP å¹³é¢çš„å­—ç¬¦
char[] chars = new char[]{'\u0061', '\u0033','\u0020', '\u03b1', '\u03b2', '\u0020', '\u4f60', '\u597d',
                '\u0020', '\ud83c', '\udca1', '\ud83c', '\udca2'};
String s1 = new String(chars);
log(s1, s1.length());       // a3 Î±Î² ä½ å¥½ ğŸ‚¡ğŸ‚¢ 13
String s2 = "a3 Î±Î² ä½ å¥½ \uD83C\uDCA1\uD83C\uDCA2";
/** æ­¤å¤„æ•°å‡ºçš„å­—ç¬¦åªæœ‰ 11 ä¸ªï¼Œä½†æ˜¯å®ƒçš„é•¿åº¦ä¸º 13, å› ä¸º String å†…éƒ¨ä½¿ç”¨ char[] å­˜å‚¨ï¼Œ length() å‡½æ•°è¿”å› char[] é•¿åº¦ */
log(s2, s2.length());       // a3 Î±Î² ä½ å¥½ ğŸ‚¡ğŸ‚¢ 13
log(s1.equals(s2)); // true

log(Integer.MIN_VALUE, Integer.MAX_VALUE); // -2147483648  2147483647
int i_min = -2147483648;
int i_max = 2147483647;
log(i_min, i_max);                         // -2147483648  2147483647
/** é¦–å…ˆç¡®å®šä¸ºè´Ÿæ•°ï¼Œå€¼ä¸ºæŒ‰ä½å–å+1; 0x01111111111111111111111111111111 + 1 */
int ib_min = 0b10000000000000000000000000000000;
int ib_max = 0b01111111111111111111111111111111;
log(ib_min, ib_max);                       // -2147483648  2147483647
int ix_min = 0x80000000;
int ix_max = 0x7FFFFFFF;
log(ix_min, ix_max);                       // -2147483648  2147483647
</pre>
						</div>

						<div class="sub-item">
							<p><b>String ç±»çš„ç¼–ç /è§£ç /è½¬æ¢</b></p>
							<pre class="brush: java;">
public static void main(String[] args) {
	// æ³¨æ„æ­¤å¤„çš„æœ€å 4 ä¸ª char è¡¨ç¤ºä¸ºä¸¤ä¸ª unicode çš„ SMP å¹³é¢çš„å­—ç¬¦
	char[] chars = new char[]{'\u0061', '\u0033','\u0020', '\u03b1', '\u03b2', '\u0020', '\u4f60',
			'\u597d', '\u0020', '\ud83c', '\udca1', '\ud83c', '\udca2'};
	String s1 = new String(chars);
	log(s1, s1.length());       // a3 Î±Î² ä½ å¥½ ğŸ‚¡ğŸ‚¢ 13
	String s2 = "a3 Î±Î² ä½ å¥½ \uD83C\uDCA1\uD83C\uDCA2";
	// æ•°å‡ºç±»çš„å­—ç¬¦åªæœ‰ 11 ä¸ªï¼Œä½†æ˜¯å®ƒçš„é•¿åº¦ä¸º 13, å› ä¸º String å†…éƒ¨ä½¿ç”¨ char[] å­˜å‚¨ï¼Œ length() å‡½æ•°è¿”å› char[] é•¿åº¦
	log(s2, s2.length());       // a3 Î±Î² ä½ å¥½ ğŸ‚¡ğŸ‚¢ 13
	log(s1.equals(s2)); // true

	// s1 çš„ utf-8 ç¼–ç ï¼š 61 33 20 ce b1 ce b2 20 e4 bd a0 e5 a5 bd 20 f0 9f 82 a1 f0 9f 82 a2
	String UTF8Hex = bytesToHex(s1.getBytes(StandardCharsets.UTF_8));
	log("UTF-8: " + UTF8Hex);
	log("UTF-8 Hex è¿˜åŸ: " + new String(hexToBytes(UTF8Hex)));
	String UTF16Hex = bytesToHex(s1.getBytes(StandardCharsets.UTF_16));
	log("UTF-16: " + UTF16Hex);
	log("UTF-16 Hex è¿˜åŸ: " + new String(hexToBytes(UTF16Hex), StandardCharsets.UTF_16));
	String UTF16BEHex = bytesToHex(s1.getBytes(StandardCharsets.UTF_16BE));
	log("UTF-16BE: " + UTF16BEHex);
	log("UTF-16BE Hex è¿˜åŸ: " + new String(hexToBytes(UTF16BEHex), StandardCharsets.UTF_16BE));
	String UTF16LEHex = bytesToHex(s1.getBytes(StandardCharsets.UTF_16LE));
	log("UTF-16LE: " + UTF16LEHex);
	log("UTF-16LE Hex è¿˜åŸ: " + new String(hexToBytes(UTF16LEHex), StandardCharsets.UTF_16LE));

	// ä»¥ä¸Šéƒ¨åˆ†ä¸ºæ ‡å‡†ç¼–ç ï¼Œ ä»¥ä¸‹éƒ¨åˆ†ä¸ä¿è¯æ‰€æœ‰å¹³å°éƒ½æœ‰
	String UTF32Hex = bytesToHex(s1.getBytes(Charset.forName("UTF-32")));
	log("UTF-32: " + UTF32Hex);
	log("UTF-32 Hex è¿˜åŸ: " + new String(hexToBytes(UTF32Hex), Charset.forName("UTF-32")));
	String UTF32BEHex = bytesToHex(s1.getBytes(Charset.forName("UTF-32BE")));
	log("UTF-32BE: " + UTF32BEHex);
	log("UTF-32BE Hex è¿˜åŸ: " + new String(hexToBytes(UTF32BEHex), Charset.forName("UTF-32BE")));
	String UTF32LEHex = bytesToHex(s1.getBytes(Charset.forName("UTF-32LE")));
	log("UTF-32LE: " + UTF32LEHex);
	log("UTF-32LE Hex è¿˜åŸ: " + new String(hexToBytes(UTF32LEHex), Charset.forName("UTF-32LE")));

	// ä»¥ä¸‹ä¸ºå½“å‰å¹³å°æ‰€æœ‰æ”¯æŒçš„ç¼–ç 
	Charset.availableCharsets().forEach((name, c) -> {
		log(name);
	});
}

public static byte[] hexToBytes(String hex){
	// å¿…é¡»ä¸º 16 è¿›åˆ¶å­—ç¬¦ï¼Œå¦åˆ™è¿”å›ç©ºçš„ bytes
	if(!Pattern.matches("^[0-9A-Fa-f]+$", hex)) {
		return new byte[]{};
	}
	// å¦‚æœä¸æ˜¯å¶æ•°ï¼Œå‰é¢è¡¥ä¸€ä¸ª 0
	hex = hex.length() % 2 != 0 ? "0" + hex : hex;

	byte[] b = new byte[hex.length() / 2];
	for (int i = 0; i < b.length; i++) {
		int index = i * 2;
		int v = Integer.parseInt(hex.substring(index, index + 2), 16);
		b[i] = (byte) v;
	}
	return b;
}

public static String bytesToHex(byte[] bytes) {
	StringBuilder builder = new StringBuilder();
	for (byte b : bytes) {
		String hex = Integer.toHexString(b & 0xff);
		builder.append(hex.length() == 1 ? "0" + hex : hex);
	}
	return builder.toString().toUpperCase();
}
</pre>

						</div>
					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-syntax"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">Java ä¸­çš„å‡ ä¸ªå…³é”®å­—</h3>
					</div>
					<div class="panel-body">
						<ul>
							<li>
								<a href="#java-syntax-static">static å…³é”®å­—</a>
							</li>
							<li>
								<a href="#java-syntax-final">final å…³é”®å­—</a>
							</li>
							<li>
								transient å…³é”®å­— -- åœ¨æˆå‘˜å˜é‡å‰åŠ æ­¤å…³é”®å­—ï¼Œæ­¤æˆå‘˜å˜é‡ä¸ä¼šè¢«åºåˆ—åŒ–
							</li>
							<li>
								synchronized å…³é”®å­— -- å‚è§: <a href="#java-thread">Java å¤šçº¿ç¨‹</a>
							</li>
						</ul>

						<a class="offset" id="java-syntax-static"></a>
						<div class="sub-item">
							<h5 class="text-primary">static å…³é”®å­—</h5>
							<pre class="brush: java;">
// é™æ€å¯¼å…¥æŒ‡å®šæˆå‘˜
import static java.lang.System.out;
// å¯¼å…¥æ‰€æœ‰é™æ€æˆå‘˜å’Œé™æ€æ–¹æ³•
import static java.lang.System.*;

public class StaticDemo {
	// é™æ€æˆå‘˜
	public static final String TAG = "StaticDemo";

	// é™æ€ä»£ç å—
	static {
		System.out.println("===é™æ€ä»£ç å—===");
	}
	
	// é™æ€å†…éƒ¨ç±»
	public static class Inner {
		public static void show(){
			System.out.println("===é™æ€å†…éƒ¨ç±»===");
		}
	}
	
	// é™æ€æ–¹æ³•
	public static void main(String[] args) {
		// å› ä¸ºé™æ€å¯¼å…¥äº† java.lang.System.out è¿™ä¸ªæˆå‘˜ï¼Œæ‰èƒ½è¿™æ ·ç”¨
		out.println("===é™æ€å¯¼åŒ…===");
		
		getenv();
		
		StaticDemo.Inner.show();
	}
}
</pre>
						</div>

						<a class="offset" id="java-syntax-final"></a>
						<div class="sub-item">
							<h5 class="text-primary">final å…³é”®å­—</h5>
							<pre class="brush: java;">
// final ç±», ä¸èƒ½è¢«ç»§æ‰¿ï¼Œæ²¡æœ‰å­ç±»
public final class FinalDemo {
	// final æˆå‘˜, ä¸èƒ½ä¿®æ”¹
	public static final String TAG = "FinalDemo";

	// final æ–¹æ³•, ä¸èƒ½ Override
	public final void show() {
		System.out.println("===æˆå‘˜æ–¹æ³•===");
	}

	// final å†…éƒ¨ç±»
	public final class Inner {
		public void log() {
			System.out.println("===final å†…éƒ¨ç±»===");
		}
	}

	// final å‚æ•°, jdk 1.6 ä¸­å¿…é¡»åŠ  final, æ‰èƒ½åœ¨æ–¹æ³•ä¸­çš„å†…éƒ¨ç±»ä¸­è®¿é—®ã€€arg è¿™ä¸ªå‚æ•°
	public void argument(final String arg) {
		Runnable thread = new Runnable() {
			public void run() {
				System.out.println("=== final å‚æ•°æ‰èƒ½ä¼ å…¥åˆ°æ–¹æ³•çš„å†…éƒ¨ç±»ä¸­ ===" + arg);
			}
		};
		new Thread(thread).start();
	}

	public static void main(String[] args) {
		new FinalDemo().argument("xxxxxxxx");
	}
}
</pre>
						</div>
					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-class-loader"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">ClassLoader åŸç†åˆ†æ</h3>
					</div>
					<div class="panel-body">
						<p>ç±»çš„åŠ è½½è¿‡ç¨‹æŒ‡é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥è·å–æè¿°æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„æ•°æ®ç»“æ„ï¼Œè¿›è€Œç”Ÿæˆä¸€ä¸ªjava.lang.Classå¯¹è±¡ä½œä¸ºæ–¹æ³•åŒºè¿™ä¸ªç±»å„ç§æ•°æ®è®¿é—®çš„å…¥å£ã€‚è¿™ä¸ªè¿‡ç¨‹é€šè¿‡Javaä¸­çš„ç±»åŠ è½½å™¨(ClassLoader)æ¥å®Œæˆã€‚</p>
						<p>
							ç±»è£…è½½å™¨æ˜¯ç”¨æ¥æŠŠç±»(class)è£…è½½è¿›JVMçš„<strong>ã€‚</strong>JVMè§„èŒƒå®šä¹‰äº†ä¸¤ç§ç±»å‹çš„ç±»è£…è½½å™¨ï¼š<strong>å¯åŠ¨å†…è£…è½½å™¨</strong><strong>(bootstrap)</strong><strong>å’Œç”¨æˆ·è‡ªå®šä¹‰è£…è½½å™¨</strong><strong>(user-defined
								class loader)</strong>ã€‚
						</p>
						<p class="h5 text-primary">ä¸€ã€Javaé»˜è®¤æä¾›çš„ä¸‰ä¸ªClassLoader</p>
						<p>
							JVMåœ¨è¿è¡Œæ—¶ä¼šäº§ç”Ÿä¸‰ä¸ªClassLoader:Bootstrap&nbsp;ClassLoaderã€Extension&nbsp;ClassLoaderå’ŒAppClassLoaderï¼ˆSystem
							ClassLoaderï¼‰ã€‚</p>
						<p>
							1ã€&nbsp;<strong>Bootstrap ClassLoader</strong>ï¼ˆå¯åŠ¨ç±»åŠ è½½å™¨ï¼‰è´Ÿè´£å°†%JAVA_HOME%/libç›®å½•ä¸­æˆ–-Xbootclasspathä¸­å‚æ•°æŒ‡å®šçš„è·¯å¾„ä¸­çš„ï¼Œå¹¶ä¸”æ˜¯è™šæ‹Ÿæœºè¯†åˆ«çš„ï¼ˆæŒ‰åç§°ï¼‰ç±»åº“åŠ è½½åˆ°JVMä¸­ã€‚
						</p>
						<p>&nbsp;&nbsp;&nbsp;&nbsp;
							ä¹Ÿå¯ä»¥é€šè¿‡-Xbootclasspathå‚æ•°å®šä¹‰ã€‚è¯¥ClassLoaderä¸èƒ½è¢«Javaä»£ç å®ä¾‹åŒ–ï¼Œå› ä¸ºå®ƒæ˜¯JVMæœ¬èº«çš„ä¸€éƒ¨åˆ†ã€‚</p>
						<p>
							2ã€<strong>Extension ClassLoader</strong>ï¼ˆæ‰©å±•ç±»åŠ è½½å™¨ï¼‰è´Ÿè´£åŠ è½½%JAVA_HOME%/lib/extä¸­çš„æ‰€æœ‰ç±»åº“;
						</p>
						<p>&nbsp;&nbsp;
							åªè¦jaråŒ…æ”¾ç½®è¿™ä¸ªä½ç½®ï¼Œå°±ä¼šè¢«è™šæ‹ŸæœºåŠ è½½ã€‚ä¸€ä¸ªå¸¸è§çš„ã€ç±»ä¼¼çš„é—®é¢˜æ˜¯ï¼Œä½ å°†mysqlçš„ä½ç‰ˆæœ¬é©±åŠ¨ä¸å°å¿ƒæ”¾ç½®åœ¨è¿™å„¿ï¼Œä½†ä½ çš„Webåº”ç”¨ç¨‹åºçš„libä¸‹æœ‰ä¸€ä¸ªæ–°çš„jdbcé©±åŠ¨ï¼Œä½†æ€ä¹ˆéƒ½æŠ¥é”™ï¼Œè­¬å¦‚ä¸æ”¯æŒJDBC2.0çš„
							DataSourceï¼Œè¿™æ—¶ä½ å°±è¦å½“å¿ƒä½ çš„æ–°jdbcå¯èƒ½å¹¶æ²¡æœ‰è¢«åŠ è½½ã€‚è¿™å°±æ˜¯ClassLoaderçš„delegateç°è±¡ã€‚å¸¸è§çš„æœ‰log4jã€
							common-logã€dbcpä¼šå‡ºç°é—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬å¾ˆå®¹æ˜“è¢«äººå¡åˆ°è¿™ä¸ªextç›®å½•ï¼Œæˆ–æ˜¯Tomcatä¸‹çš„common/libç›®å½•</p>
						<p>
							3ã€<strong>Application ClassLoader</strong>ï¼šä¹Ÿç§°ä¸ºSystem
							ClassLoaerï¼ˆåŠ è½½%CLASSPATH%è·¯å¾„çš„ç±»åº“ï¼‰ä»¥åŠå…¶å®ƒè‡ªå®šä¹‰çš„ClassLoaderã€‚ç¼ºçœæƒ…å†µä¸‹ï¼Œå®ƒæ˜¯ç”¨æˆ·åˆ›å»ºçš„ä»»ä½•ClassLoaderçš„çˆ¶ClassLoaderã€‚
						</p>
						<p>&nbsp;&nbsp;&nbsp; æˆ‘ä»¬åˆ›å»ºçš„standaloneåº”ç”¨çš„main
							classç¼ºçœæƒ…å†µä¸‹ä¹Ÿæ˜¯ç”±å®ƒåŠ è½½(é€šè¿‡Thread.currentThread().getContextClassLoader()æŸ¥çœ‹)ã€‚å®é™…å¼€å‘ä¸­ç”¨ClassLoaderæ›´å¤šæ—¶å€™æ˜¯ç”¨å…¶åŠ è½½classpathä¸‹çš„èµ„æºï¼Œç‰¹åˆ«æ˜¯é…ç½®æ–‡ä»¶ï¼Œå¦‚ClassLoader.getResource()ï¼Œæ¯”FileInputStreamç›´æ¥ã€‚</p>
						<p>ç±»åŠ è½½å™¨ classloader æ˜¯å…·æœ‰å±‚æ¬¡ç»“æ„çš„ï¼Œä¹Ÿå°±æ˜¯çˆ¶å­å…³ç³»ã€‚å…¶ä¸­ï¼ŒBootstrap
							æ˜¯æ‰€æœ‰ç±»åŠ è½½å™¨çš„çˆ¶äº²ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
						<p>
							<img class="img-responsive center-block"
								src="images/java-class-loader-p1.png" alt="">
						</p>
						<p>
							<span style="font-size: 14px;"><span
								style="color: #ff0000;"><strong>æ³¨æ„ï¼š</strong></span>&nbsp;é™¤äº†Javaé»˜è®¤æä¾›çš„ä¸‰ä¸ªClassLoaderä¹‹å¤–ï¼Œç”¨æˆ·è¿˜å¯ä»¥æ ¹æ®éœ€è¦å®šä¹‰è‡ªå·²çš„ClassLoaderï¼Œè€Œè¿™äº›è‡ªå®šä¹‰çš„ClassLoaderéƒ½å¿…é¡»ç»§æ‰¿è‡ªjava.lang.ClassLoaderç±»ï¼Œä¹ŸåŒ…æ‹¬Javaæä¾›çš„å¦å¤–äºŒä¸ªClassLoaderï¼ˆExtension
								ClassLoaderå’ŒApp ClassLoaderï¼‰åœ¨å†…ï¼Œä½†æ˜¯Bootstrap
								ClassLoaderä¸ç»§æ‰¿è‡ªClassLoaderï¼Œå› ä¸ºå®ƒä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„Javaç±»ï¼Œåº•å±‚ç”±C++ç¼–å†™ï¼Œå·²åµŒå…¥åˆ°äº†JVMå†…æ ¸å½“ä¸­ï¼Œå½“JVMå¯åŠ¨åï¼ŒBootstrap
								ClassLoaderä¹Ÿéšç€å¯åŠ¨ï¼Œè´Ÿè´£åŠ è½½å®Œæ ¸å¿ƒç±»åº“åï¼Œå¹¶æ„é€ Extension ClassLoaderå’ŒApp
								ClassLoaderç±»åŠ è½½å™¨ã€‚</span>
						</p>
						<p class="h5 text-primary">äºŒã€åŒäº²å§”æ‰˜æ¨¡å‹</p>
						<p>Javaä¸­ClassLoaderçš„åŠ è½½é‡‡ç”¨äº†åŒäº²å§”æ‰˜æœºåˆ¶ï¼Œé‡‡ç”¨åŒäº²å§”æ‰˜æœºåˆ¶åŠ è½½ç±»çš„æ—¶å€™é‡‡ç”¨å¦‚ä¸‹çš„å‡ ä¸ªæ­¥éª¤ï¼š</p>
						<p>1ã€å½“å‰ClassLoaderé¦–å…ˆä»è‡ªå·±å·²ç»åŠ è½½çš„ç±»ä¸­æŸ¥è¯¢æ˜¯å¦æ­¤ç±»å·²ç»åŠ è½½ï¼Œå¦‚æœå·²ç»åŠ è½½åˆ™ç›´æ¥è¿”å›åŸæ¥å·²ç»åŠ è½½çš„ç±»ï¼›</p>
						<p class="alert alert-success">æ¯ä¸ªç±»åŠ è½½å™¨éƒ½æœ‰è‡ªå·±çš„åŠ è½½ç¼“å­˜ï¼Œå½“ä¸€ä¸ªç±»è¢«åŠ è½½åå°±æ”¾å…¥ç¼“å­˜ï¼Œå½“ä¸‹æ¬¡åŠ è½½æ—¶å°±å¯ä»¥ç›´æ¥è¿”å›äº†ã€‚</p>
						<p>2ã€å½“å‰classLoaderçš„ç¼“å­˜ä¸­æ²¡æœ‰æ‰¾åˆ°è¢«åŠ è½½çš„ç±»çš„æ—¶å€™ï¼Œå§”æ‰˜çˆ¶ç±»åŠ è½½å™¨å»åŠ è½½ï¼Œçˆ¶ç±»åŠ è½½å™¨é‡‡ç”¨åŒæ ·çš„ç­–ç•¥ï¼Œé¦–å…ˆæŸ¥çœ‹è‡ªå·±çš„ç¼“å­˜ï¼Œç„¶åå§”æ‰˜çˆ¶ç±»çš„çˆ¶ç±»å»åŠ è½½ï¼Œä¸€ç›´åˆ°bootstrp
							ClassLoader.</p>
						<p>3ã€å½“æ‰€æœ‰çš„çˆ¶ç±»åŠ è½½å™¨éƒ½æ²¡æœ‰åŠ è½½çš„æ—¶å€™ï¼Œå†ç”±å½“å‰çš„ç±»åŠ è½½å™¨åŠ è½½ï¼Œå¹¶å°†å…¶æ”¾å…¥å®ƒè‡ªå·±çš„ç¼“å­˜ä¸­ï¼Œä»¥ä¾¿ä¸‹æ¬¡æœ‰åŠ è½½è¯·æ±‚çš„æ—¶å€™ç›´æ¥è¿”å›ã€‚</p>
						<p>
							&nbsp;&nbsp;&nbsp; <strong>JVMä¸­ç±»åŠ è½½çš„æœºåˆ¶â€”â€”åŒäº²å§”æ´¾æ¨¡å‹ã€‚è¿™ä¸ªæ¨¡å‹è¦æ±‚é™¤äº†Bootstrap
								ClassLoaderå¤–ï¼Œå…¶ä½™çš„ç±»åŠ è½½å™¨éƒ½è¦æœ‰è‡ªå·±çš„çˆ¶åŠ è½½å™¨ã€‚å­åŠ è½½å™¨é€šè¿‡ç»„åˆæ¥å¤ç”¨çˆ¶åŠ è½½å™¨çš„ä»£ç ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚åœ¨æŸä¸ªç±»åŠ è½½å™¨åŠ è½½classæ–‡ä»¶æ—¶ï¼Œå®ƒé¦–å…ˆå§”æ‰˜çˆ¶åŠ è½½å™¨å»åŠ è½½è¿™ä¸ªç±»ï¼Œä¾æ¬¡ä¼ é€’åˆ°é¡¶å±‚ç±»åŠ è½½å™¨(Bootstrap)ã€‚å¦‚æœé¡¶å±‚åŠ è½½ä¸äº†ï¼ˆå®ƒçš„æœç´¢èŒƒå›´ä¸­æ‰¾ä¸åˆ°æ­¤ç±»ï¼‰ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•åŠ è½½è¿™ä¸ªç±»ã€‚</strong>
						</p>
						<p>
							<strong>&nbsp;&nbsp;</strong>&nbsp;&nbsp;
							å½“JVMè¯·æ±‚æŸä¸ªClassLoaderå®ä¾‹ä½¿ç”¨è¿™ç§æ¨¡å‹æ¥åŠ è½½æŸä¸ªç±»æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥è¯¥ç±»æ˜¯å¦å·²ç»è¢«å½“å‰ç±»åŠ è½½å™¨åŠ è½½ï¼Œå¦‚æœæ²¡æœ‰è¢«åŠ è½½ï¼Œåˆ™å…ˆå§”æ‰˜ç»™å¥¹çš„çˆ¶ç±»åŠ è½½å™¨å³è°ƒç”¨parent.loadClass()æ–¹æ³•ï¼Œè¿™æ ·ä¸€ç›´è¯·æ±‚è°ƒç”¨åˆ°è¯·æ±‚é¡¶å±‚ç±»åŠ è½½ClassLoader#findBootStrapClassOrNull,å¦‚æœè¿™ä¸ªæ–¹æ³•ä¾ç„¶åŠ è½½ä¸äº†ï¼Œåˆ™ä¼šè°ƒç”¨ClassLoader#findClass()æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å†æ‰¾ä¸åˆ°åˆ™ä¼šæŠ›å‡ºClassNotFoundExceptionå¼‚å¸¸ï¼Œä½†æ˜¯è¿™é‡Œçš„å¼‚å¸¸ä¼šè¢«æ•è·ï¼Œç„¶åè¿”å›ç»™å§”æ‰˜å‘èµ·è€…ï¼Œæœ€åç”±å½“å‰ç±»åŠ è½½å™¨çš„findClass()æ–¹æ³•ç±»åŠ è½½ç±»ï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™æŠ›å‡ºClassNotFoundExceptionå¼‚å¸¸ã€‚
						</p>
						<p>
							<strong>&nbsp;&nbsp; <span style="color: #ff0000;">ClassæŸ¥æ‰¾çš„ä½ç½®å’Œé¡ºåºä¾æ¬¡æ˜¯ï¼šCacheã€parentã€self</span></strong>
						</p>

						<p class="h5 text-primary">ä¸‰ã€ClassLoaderåŠ è½½ç±»çš„åŸç†</p>

						<h6 class="text-primary">1ã€åŸç†ä»‹ç»</h6>
						<p>
							ClassLoaderä½¿ç”¨çš„æ˜¯åŒäº²å§”æ‰˜æ¨¡å‹æ¥æœç´¢ç±»çš„ï¼Œæ¯ä¸ªClassLoaderå®ä¾‹éƒ½æœ‰ä¸€ä¸ªçˆ¶ç±»åŠ è½½å™¨çš„å¼•ç”¨ï¼ˆä¸æ˜¯ç»§æ‰¿çš„å…³ç³»ï¼Œæ˜¯ä¸€ä¸ªåŒ…å«çš„å…³ç³»ï¼‰ï¼Œè™šæ‹Ÿæœºå†…ç½®çš„ç±»åŠ è½½å™¨ï¼ˆBootstrap
							ClassLoaderï¼‰æœ¬èº«æ²¡æœ‰çˆ¶ç±»åŠ è½½å™¨ï¼Œä½†å¯ä»¥ç”¨ä½œå…¶å®ƒClassLoaderå®ä¾‹çš„çš„çˆ¶ç±»åŠ è½½å™¨ã€‚å½“ä¸€ä¸ªClassLoaderå®ä¾‹éœ€è¦åŠ è½½æŸä¸ªç±»æ—¶ï¼Œå®ƒä¼šè¯•å›¾äº²è‡ªæœç´¢æŸä¸ªç±»ä¹‹å‰ï¼Œå…ˆæŠŠè¿™ä¸ªä»»åŠ¡å§”æ‰˜ç»™å®ƒçš„çˆ¶ç±»åŠ è½½å™¨ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ç”±ä¸Šè‡³ä¸‹ä¾æ¬¡æ£€æŸ¥çš„ï¼Œé¦–å…ˆç”±æœ€é¡¶å±‚çš„ç±»åŠ è½½å™¨Bootstrap
							ClassLoaderè¯•å›¾åŠ è½½ï¼Œå¦‚æœæ²¡åŠ è½½åˆ°ï¼Œåˆ™æŠŠä»»åŠ¡è½¬äº¤ç»™Extension
							ClassLoaderè¯•å›¾åŠ è½½ï¼Œå¦‚æœä¹Ÿæ²¡åŠ è½½åˆ°ï¼Œåˆ™è½¬äº¤ç»™App ClassLoader
							è¿›è¡ŒåŠ è½½ï¼Œå¦‚æœå®ƒä¹Ÿæ²¡æœ‰åŠ è½½å¾—åˆ°çš„è¯ï¼Œåˆ™è¿”å›ç»™å§”æ‰˜çš„å‘èµ·è€…ï¼Œç”±å®ƒåˆ°æŒ‡å®šçš„æ–‡ä»¶ç³»ç»Ÿæˆ–ç½‘ç»œç­‰URLä¸­åŠ è½½è¯¥ç±»ã€‚å¦‚æœå®ƒä»¬éƒ½æ²¡æœ‰åŠ è½½åˆ°è¿™ä¸ªç±»æ—¶ï¼Œåˆ™æŠ›å‡ºClassNotFoundExceptionå¼‚å¸¸ã€‚å¦åˆ™å°†è¿™ä¸ªæ‰¾åˆ°çš„ç±»ç”Ÿæˆä¸€ä¸ªç±»çš„å®šä¹‰ï¼Œå¹¶å°†å®ƒåŠ è½½åˆ°å†…å­˜å½“ä¸­ï¼Œæœ€åè¿”å›è¿™ä¸ªç±»åœ¨å†…å­˜ä¸­çš„Classå®ä¾‹å¯¹è±¡ã€‚
						</p>

						<h6 class="text-primary">2ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åŒäº²å§”æ‰˜è¿™ç§æ¨¡å‹å‘¢ï¼Ÿ</h6>
						<p>
							å› ä¸ºè¿™æ ·å¯ä»¥é¿å…é‡å¤åŠ è½½ï¼Œå½“çˆ¶äº²å·²ç»åŠ è½½äº†è¯¥ç±»çš„æ—¶å€™ï¼Œå°±æ²¡æœ‰å¿…è¦å­ClassLoaderå†åŠ è½½ä¸€æ¬¡ã€‚è€ƒè™‘åˆ°å®‰å…¨å› ç´ ï¼Œæˆ‘ä»¬è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä¸ä½¿ç”¨è¿™ç§å§”æ‰˜æ¨¡å¼ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥éšæ—¶ä½¿ç”¨è‡ªå®šä¹‰çš„Stringæ¥åŠ¨æ€æ›¿ä»£javaæ ¸å¿ƒapiä¸­å®šä¹‰çš„ç±»å‹ï¼Œè¿™æ ·ä¼šå­˜åœ¨éå¸¸å¤§çš„å®‰å…¨éšæ‚£ï¼Œè€ŒåŒäº²å§”æ‰˜çš„æ–¹å¼ï¼Œå°±å¯ä»¥é¿å…è¿™ç§æƒ…å†µï¼Œå› ä¸ºStringå·²ç»åœ¨å¯åŠ¨æ—¶å°±è¢«å¼•å¯¼ç±»åŠ è½½å™¨ï¼ˆBootstrcp
							ClassLoaderï¼‰åŠ è½½ï¼Œæ‰€ä»¥ç”¨æˆ·è‡ªå®šä¹‰çš„ClassLoaderæ°¸è¿œä¹Ÿæ— æ³•åŠ è½½ä¸€ä¸ªè‡ªå·±å†™çš„Stringï¼Œé™¤éä½ æ”¹å˜JDKä¸­ClassLoaderæœç´¢ç±»çš„é»˜è®¤ç®—æ³•ã€‚
						</p>
						<h6 class="text-primary">3ã€JVMåœ¨æœç´¢ç±»çš„æ—¶å€™ï¼Œå¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªclassç›¸åŒå‘¢ï¼Ÿ</h6>
						<p>
							JVMåœ¨åˆ¤å®šä¸¤ä¸ªclassæ˜¯å¦ç›¸åŒæ—¶ï¼Œä¸ä»…è¦åˆ¤æ–­ä¸¤ä¸ªç±»åæ˜¯å¦ç›¸åŒï¼Œè€Œä¸”è¦åˆ¤æ–­æ˜¯å¦ç”±åŒä¸€ä¸ªç±»åŠ è½½å™¨å®ä¾‹åŠ è½½çš„ã€‚åªæœ‰ä¸¤è€…åŒæ—¶æ»¡è¶³çš„æƒ…å†µä¸‹ï¼ŒJVMæ‰è®¤ä¸ºè¿™ä¸¤ä¸ªclassæ˜¯ç›¸åŒçš„ã€‚å°±ç®—ä¸¤ä¸ªclassæ˜¯åŒä¸€ä»½classå­—èŠ‚ç ï¼Œå¦‚æœè¢«ä¸¤ä¸ªä¸åŒçš„ClassLoaderå®ä¾‹æ‰€åŠ è½½ï¼ŒJVMä¹Ÿä¼šè®¤ä¸ºå®ƒä»¬æ˜¯ä¸¤ä¸ªä¸åŒclassã€‚
						</p>
						<p>
							æ¯”å¦‚ç½‘ç»œä¸Šçš„ä¸€ä¸ªJavaç±»org.classloader.simple.NetClassLoaderSimpleï¼Œjavacç¼–è¯‘ä¹‹åç”Ÿæˆå­—èŠ‚ç æ–‡ä»¶NetClassLoaderSimple.classï¼ŒClassLoaderAå’ŒClassLoaderBè¿™ä¸¤ä¸ªç±»åŠ è½½å™¨å¹¶è¯»å–äº†NetClassLoaderSimple.classæ–‡ä»¶ï¼Œå¹¶åˆ†åˆ«å®šä¹‰å‡ºäº†java.lang.Classå®ä¾‹æ¥è¡¨ç¤ºè¿™ä¸ªç±»ï¼Œå¯¹äºJVMæ¥è¯´ï¼Œå®ƒä»¬æ˜¯ä¸¤ä¸ªä¸åŒçš„å®ä¾‹å¯¹è±¡ï¼Œä½†å®ƒä»¬ç¡®å®æ˜¯åŒä¸€ä»½å­—èŠ‚ç æ–‡ä»¶ï¼Œå¦‚æœè¯•å›¾å°†è¿™ä¸ªClasså®ä¾‹ç”Ÿæˆå…·ä½“çš„å¯¹è±¡è¿›è¡Œè½¬æ¢æ—¶ï¼Œå°±ä¼šæŠ›è¿è¡Œæ—¶å¼‚å¸¸java.lang.ClassCaseExceptionï¼Œæç¤ºè¿™æ˜¯ä¸¤ä¸ªä¸åŒçš„ç±»å‹ã€‚
						</p>
						<p>
							<strong>åœ¨ä¸€ä¸ªå•è™šæ‹Ÿæœºç¯å¢ƒä¸‹ï¼Œæ ‡è¯†ä¸€ä¸ªç±»æœ‰ä¸¤ä¸ªå› ç´ ï¼šclassçš„å…¨è·¯å¾„åã€è¯¥ç±»çš„ClassLoaderã€‚</strong>
						</p>
						<h6 class="text-primary">4ã€ClassLoader ä½“ç³»æ¶æ„</h6>
						<p>
							<img class="img-responsive center-block"
								src="images/java-class-loader-p2.png" alt="">
						</p>
						<p class="h5 text-primary">å››ã€è‡ªå®šä¹‰ClassLoader</p>
						<p class="h5 text-primary">ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ç±»åŠ è½½ï¼Ÿ</p>
						<p>
							<span class="text-danger">ä¸»è¦åŸå› ï¼š</span>1ã€éœ€è¦åŠ è½½å¤–éƒ¨çš„Class,JVMæä¾›çš„é»˜è®¤ClassLoaderåªèƒ½åŠ è½½æŒ‡å®šç›®å½•ä¸‹çš„.jarå’Œ.class,å¦‚æœæˆ‘ä»¬æƒ³åŠ è½½å…¶å®ƒä½ç½®çš„classæˆ–è€…jaræ—¶ï¼Œè¿™äº›é»˜è®¤çš„ç±»åŠ è½½å™¨æ˜¯åŠ è½½ä¸åˆ°çš„ï¼ˆå¦‚æœæ˜¯æ–‡ä»¶æ ¼å¼å¿…é¡»é…ç½®åˆ°classpathï¼‰ã€‚ä¾‹å¦‚ï¼šæˆ‘ä»¬éœ€è¦åŠ è½½ç½‘ç»œä¸Šçš„ä¸€ä¸ªclasså­—èŠ‚æµï¼›
						</p>
						<p>
							2ã€éœ€è¦å®ç°Classçš„éš”ç¦»æ€§ã€‚ç›®å‰æˆ‘ä»¬å¸¸ç”¨çš„WebæœåŠ¡å™¨ï¼Œå¦‚tomcatã€jettyéƒ½å®ç°äº†è‡ªå·±å®šä¹‰çš„ç±»åŠ è½½ï¼Œè¿™äº›ç±»åŠ è½½ä¸»è¦å®Œæˆä»¥ä¸‹ä¸‰ä¸ªåŠŸèƒ½ï¼š</p>
						<ul>
							<li>A.å®ç°åŠ è½½Webåº”ç”¨æŒ‡å®šç›®å½•ä¸‹çš„jarå’Œclass</li>
							<li>B.å®ç°éƒ¨ç½²åœ¨å®¹å™¨ä¸­çš„Webåº”ç”¨ç¨‹å…±åŒä½¿ç”¨çš„ç±»åº“çš„å…±äº«</li>
							<li>C.å®ç°éƒ¨ç½²åœ¨å®¹å™¨ä¸­å„ä¸ªWebåº”ç”¨ç¨‹åºè‡ªå·±ç§æœ‰ç±»åº“çš„ç›¸äº’éš”ç¦»</li>
						</ul>
						<p class="h5 text-primary">å¦‚ä½•è‡ªå®šä¹‰ç±»åŠ è½½ï¼Ÿ</p>
						<ul>
							<li>ç»§æ‰¿java.lang.ClassLoader</li>
							<li>è¦†å†™çˆ¶ç±»çš„findClass()æ–¹æ³•</li>
						</ul>

					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-generics"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">Java æ³›å‹</h3>
					</div>
					<div class="panel-body">
                        <div class="sub-item">
                            <p><b>æ³›å‹çš„æœ¬è´¨æ˜¯ä¸ºäº†å‚æ•°åŒ–ç±»å‹</b>ï¼ˆåœ¨ä¸åˆ›å»ºæ–°çš„ç±»å‹çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ³›å‹æŒ‡å®šçš„ä¸åŒç±»å‹æ¥æ§åˆ¶å½¢å‚å…·ä½“é™åˆ¶çš„ç±»å‹ï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨æ³›å‹ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæ“ä½œçš„æ•°æ®ç±»å‹è¢«æŒ‡å®šä¸ºä¸€ä¸ªå‚æ•°ï¼Œè¿™ç§å‚æ•°ç±»å‹å¯ä»¥ç”¨åœ¨ç±»ã€æ¥å£å’Œæ–¹æ³•ä¸­ï¼Œåˆ†åˆ«è¢«ç§°ä¸ºæ³›å‹ç±»ã€æ³›å‹æ¥å£ã€æ³›å‹æ–¹æ³•ã€‚</p>
                            <p><b>Java ä¸­çš„æ³›å‹ï¼Œåªåœ¨ç¼–è¯‘é˜¶æ®µæœ‰æ•ˆ</b> -- åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œæ­£ç¡®æ£€éªŒæ³›å‹ç»“æœåï¼Œä¼šå°†æ³›å‹çš„ç›¸å…³ä¿¡æ¯æ“¦é™¤ï¼Œå¹¶ä¸”åœ¨å¯¹è±¡è¿›å…¥å’Œç¦»å¼€æ–¹æ³•çš„è¾¹ç•Œå¤„æ·»åŠ ç±»å‹æ£€æŸ¥å’Œç±»å‹è½¬æ¢çš„æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ³›å‹ä¿¡æ¯ä¸ä¼šè¿›å…¥åˆ°è¿è¡Œæ—¶é˜¶æ®µã€‚</p>
                            <p><b>æ³›å‹ç±»</b></p>
                            <pre class="brush: java;">
public class Generic&lt;T>{
    // key è¿™ä¸ªæˆå‘˜å˜é‡çš„ç±»å‹ä¸º T,T çš„ç±»å‹ç”±å¤–éƒ¨æŒ‡å®š
    private T key;

	// æ³›å‹æ„é€ æ–¹æ³•å½¢å‚ key çš„ç±»å‹ä¹Ÿä¸º Tï¼ŒT çš„ç±»å‹ç”±å¤–éƒ¨æŒ‡å®š
    public Generic(T key) { this.key = key; }

	// æ³›å‹æ–¹æ³• getKey çš„è¿”å›å€¼ç±»å‹ä¸º Tï¼ŒT çš„ç±»å‹ç”±å¤–éƒ¨æŒ‡å®š
    public T getKey() { return key; }
}
</pre>
                        </div>

                        <div class="sub-item">
                            <p><b>æ•°ç»„çš„åå˜</b></p>
                            <p>é¦–å…ˆäº†è§£ä¸‹ä»€ä¹ˆæ˜¯æ•°ç»„çš„åå˜ï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
                            <pre class="brush: java;">Number[] nums = new Integer[10]; // OK</pre>
                            <p>å› ä¸º Integer æ˜¯ Number çš„å­ç±»ï¼Œä¸€ä¸ª Integer å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ª Number å¯¹è±¡ï¼Œæ‰€ä»¥ä¸€ä¸ª Integer çš„æ•°ç»„ä¹Ÿæ˜¯ä¸€ä¸ª Number çš„æ•°ç»„ï¼Œè¿™å°±æ˜¯æ•°ç»„çš„åå˜ã€‚</p>
                            <p>Java æŠŠæ•°ç»„è®¾è®¡æˆåå˜çš„ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯æœ‰ç¼ºé™·çš„ã€‚å› ä¸ºå°½ç®¡æŠŠ Integer[] èµ‹å€¼ç»™ Number[]ï¼ŒInteger[] å¯ä»¥å‘ä¸Šè½¬å‹ä¸º Number[]ï¼Œä½†æ˜¯æ•°æ®å…ƒç´ çš„å®é™…ç±»å‹æ˜¯ Integerï¼Œåªèƒ½å‘æ•°ç»„ä¸­æ”¾å…¥ Integer æˆ–è€… Integer çš„å­ç±»ã€‚å¦‚æœå‘æ•°ç»„ä¸­æ”¾å…¥ Number å¯¹è±¡æˆ–è€… Number å…¶ä»–å­ç±»çš„å¯¹è±¡ï¼Œå¯¹äºç¼–è¯‘å™¨æ¥è¯´ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡ç¼–è¯‘çš„ã€‚ä½†æ˜¯è¿è¡Œæ—¶ JVM èƒ½å¤ŸçŸ¥é“æ•°ç»„å…ƒç´ çš„å®é™…ç±»å‹æ˜¯ Integerï¼Œå½“å…¶å®ƒå¯¹è±¡åŠ å…¥æ•°ç»„æ˜¯å°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
                            <pre class="brush: java;">
Number[] numbers = new Integer[10];
numbers[0] = 1;
numbers[1] = 0.5f; // æ­¤æ•°æ®çš„åŠ å…¥å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œä½†æ˜¯ä»¥ä¸‹è¿è¡Œæ—¶ä¼šæœ‰ ArrayStoreException å¼‚å¸¸
for (Number number : numbers) {
	System.out.println(number);
}
</pre>
                            <p><b>æ³›å‹çš„è®¾è®¡ç›®çš„ä¹‹ä¸€å°±æ˜¯ä¿è¯äº†ç±»å‹å®‰å…¨ï¼Œè®©è¿™ç§è¿è¡Œæ—¶æœŸçš„é”™è¯¯åœ¨ç¼–è¯‘æœŸå°±èƒ½å‘ç°ï¼Œæ‰€ä»¥æ³›å‹æ˜¯ä¸æ”¯æŒåå˜çš„ã€‚</b></p>
                            <pre class="brush: java;">List&lt;Number> nums = new ArrayList&lt;Integer>(); // ç¼–è¯‘ä¸èƒ½é€šè¿‡</pre>
                            <p>å½“ç¡®å®éœ€è¦å»ºç«‹è¿™ç§å‘ä¸Šè½¬å‹çš„ç±»å‹å…³ç³»çš„æ—¶å€™ï¼Œå°±éœ€è¦ç”¨åˆ°æ³›å‹çš„é€šé…ç¬¦ç‰¹æ€§äº†ã€‚ä¾‹å¦‚ï¼š</p>
                            <pre class="brush: java;">List&lt;? extends Number> nums = new ArrayList&lt;Integer>(); // OK</pre>
                        </div>

                        <div class="sub-item">
                            <div class="sub-item">
                                <p><b>æ³›å‹é€šé…ç¬¦</b> -- æ— è¾¹ç•Œé€šé…ç¬¦, ä¸Šè¾¹ç•Œé™å®šçš„é€šé…ç¬¦ å’Œ ä¸‹è¾¹ç•Œé™å®šçš„é€šé…ç¬¦</p>
                                <p>PECS åŸåˆ™ï¼ˆProducer Extends Consumer Superï¼‰</p>
                                <ul>
                                    <li><p>å¯¹äºä¸Šè¾¹ç•Œé™å®šçš„é€šé…ç¬¦ï¼Œæ— æ³•å‘å…¶ä¸­åŠ å…¥ä»»ä½•å¯¹è±¡ï¼Œä½†æ˜¯å¯ä»¥ä»ä¸­æ­£å¸¸å–å‡ºå¯¹è±¡ã€‚</p></li>
                                    <li><p>å¯¹äºä¸‹è¾¹ç•Œé™å®šçš„é€šé…ç¬¦ï¼Œå¯ä»¥å­˜å…¥ subclass å¯¹è±¡æˆ–è€… subclass çš„å­ç±»å¯¹è±¡ï¼Œä½†æ˜¯å–å‡ºæ—¶åªèƒ½ç”¨ Object ç±»å‹å˜é‡æŒ‡å‘å–å‡ºçš„å¯¹è±¡ã€‚</p></li>
                                </ul>
                                <p><b>ç®€è€Œè¨€ä¹‹ï¼Œä¸Šè¾¹ç•Œé™å®šï¼ˆextendsï¼‰çš„é€šé…ç¬¦é€‚åˆäºå†…å®¹çš„è·å–ï¼Œè€Œä¸‹è¾¹ç•Œé™å®šï¼ˆsuperï¼‰çš„é€šé…ç¬¦æ›´é€‚åˆäºå†…å®¹çš„å­˜å…¥ã€‚æ‰€ä»¥å°±æœ‰äº†ä¸€ä¸ª PECS åŸåˆ™æ¥å¾ˆå¥½çš„è§£é‡Šè¿™ä¸¤ç§é€šé…ç¬¦çš„ä½¿ç”¨åŸåˆ™ã€‚</b></p>
                                <ul>
                                    <li><p>å½“ä¸€ä¸ªæ•°æ®ç»“æ„ä½œä¸º producer å¯¹å¤–æä¾›æ•°æ®çš„æ—¶å€™ï¼Œåº”è¯¥åªèƒ½å–æ•°æ®è€Œä¸èƒ½å­˜æ•°æ®ï¼Œæ‰€ä»¥é€‚åˆä½¿ç”¨ä¸Šè¾¹ç•Œé™å®šï¼ˆextendsï¼‰çš„é€šé…ç¬¦ã€‚</p></li>
                                    <li><p>å½“ä¸€ä¸ªæ•°æ®ç»“æ„ä½œä¸º consumer è·å–å¹¶å­˜å…¥æ•°æ®çš„æ—¶å€™ï¼Œåº”è¯¥åªèƒ½å­˜æ•°æ®è€Œä¸èƒ½å–æ•°æ®ï¼Œæ‰€ä»¥é€‚åˆä½¿ç”¨ä¸‹è¾¹ç•Œé™å®šï¼ˆsuperï¼‰çš„é€šé…ç¬¦ã€‚</p></li>
                                    <li><p>å¦‚æœæ—¢éœ€è¦å–æ•°æ®ä¹Ÿéœ€è¦å­˜æ•°æ®ï¼Œå°±ä¸é€‚åˆä½¿ç”¨æ³›å‹çš„é€šé…ç¬¦ã€‚</p></li>
                                </ul>
                                <pre class="brush: java;">
// dest åªèƒ½å­˜æ•°æ®è€Œä¸èƒ½å–æ•°æ®ï¼Œ src åªèƒ½å–æ•°æ®è€Œä¸èƒ½å­˜æ•°æ®
public static &lt;T> void copy(List&lt;? super T> dest, List&lt;? extends T> src) {
    for (int i = 0; i < src.size(); i++) {
        dest.set(i, src.get(i));
    }
}
</pre>
                            </div>

                            <div class="split-item">
                                <p><b>æ— è¾¹ç•Œé€šé…ç¬¦</b></p>
                                <p><code>List</code>, <code>List&lt;Object></code> å’Œ <code>List&lt;?></code> çš„åŒºåˆ«ï¼š</p>
                                <p><b>ç»“è®ºï¼š<code>List</code> = <code>List&lt;Object></code></b></p>
                                <ul>
                                    <li><p><code>List&lt;?></code> æ˜¯è¡¨ç¤ºæŒæœ‰æŸç§ç‰¹å®šç±»å‹å¯¹è±¡çš„ Listï¼Œä½†æ˜¯ä¸çŸ¥é“æ˜¯å“ªç§ç±»å‹ï¼›<code>List / List&lt;Object></code> æ˜¯è¡¨ç¤ºæŒæœ‰ Object ç±»å‹å¯¹è±¡çš„ Listã€‚</p></li>
                                    <li><p><code>List&lt;?></code> å› ä¸ºä¸çŸ¥é“æŒæœ‰çš„å®é™…ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½ add ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼›<code>List / List&lt;Object></code> å› ä¸ºæŒæœ‰çš„æ˜¯ Object ç±»å‹å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥ add ä»»ä½•ç±»å‹çš„å¯¹è±¡ã€‚</p></li>
                                    <li><p><code>List&lt;?></code> å¯ä»¥ <code>add(null)</code>ï¼Œå› ä¸º null æ˜¯ä»»ä½•å¼•ç”¨æ•°æ®ç±»å‹éƒ½å…·æœ‰çš„å…ƒç´ ã€‚</p></li>
                                </ul>
                                <pre class="brush: java;">
public static void main(String[] args) {
	List list = new ArrayList();
	List&lt;Object> listObject = new ArrayList<>();
	List&lt;?> listUnbounded = new ArrayList<>();

	list.add(1);
	list.add(0.5f);
	list.add(null);

	listObject.add(1);
	listObject.add(0.5f);
	listObject.add(null);

//  listUnbounded.add(1);      // ç¼–è¯‘é”™è¯¯ï¼Œä¸çŸ¥é“æŒæœ‰çš„å®é™…ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½ add ä»»ä½•ç±»å‹çš„å¯¹è±¡
//  listUnbounded.add(0.5f);   // ç¼–è¯‘é”™è¯¯ï¼Œä¸çŸ¥é“æŒæœ‰çš„å®é™…ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½ add ä»»ä½•ç±»å‹çš„å¯¹è±¡
	listUnbounded.add(null);   // å¯ä»¥ï¼ŒList&lt;?> åªå¯ä»¥ add(null)ï¼Œå› ä¸º null æ˜¯ä»»ä½•å¼•ç”¨æ•°æ®ç±»å‹éƒ½å…·æœ‰çš„å…ƒç´ 

	list(list);
	list(listObject);
	list(listUnbounded);

	listObject(list);
	listObject(listObject);
//  listObject(listUnbounded); // ç¼–è¯‘é”™è¯¯ï¼ŒæŒ‡å®šå‚æ•°ä¸º List&lt;Object>ï¼Œ è€Œ List&lt;?> ä¸æ˜¯ List&lt;Object>

	listUnbounded(list);
	listUnbounded(listObject);
	listUnbounded(listUnbounded);
}

static void list(List list) {
	for (Object o : list) {
		System.out.println("List -> " + o);
	}
}

static void listObject(List&lt;Object> list) {
	for (Object o : list) {
		System.out.println("List&lt;Object> -> " + o);
	}
}

static void listUnbounded(List&lt;?> list) {
	for (Object o : list) {
		System.out.println("List&lt;?> -> " + o);
	}
}
</pre>
                            </div>

                            <div class="split-item">
                                <p><b>ä¸Šè¾¹ç•Œé™å®šçš„é€šé…ç¬¦</b></p>
                                <p>ä¸Šè¾¹ç•Œé™å®šçš„é€šé…ç¬¦ä½¿ç”¨ <code>&lt;? extends T></code> é™å®šï¼Œæ¯”å¦‚ï¼š <code>List&lt;? extends Number></code>ï¼Œæœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p>
                                <ul>
                                    <li><p>List&lt;? extends Number> è¡¨ç¤ºæŸç§ç‰¹å®šç±»å‹ï¼ˆNumber æˆ–è€… Number çš„å­ç±»ï¼‰å¯¹è±¡çš„ Listã€‚è·Ÿæ— è¾¹ç•Œé€šé…ç¬¦ä¸€æ ·ï¼Œå› ä¸ºæ— æ³•ç¡®å®šæŒæœ‰çš„å®é™…ç±»å‹ï¼Œæ‰€ä»¥è¿™ä¸ª List ä¹Ÿä¸èƒ½ add é™¤ null å¤–çš„ä»»ä½•ç±»å‹çš„å¯¹è±¡ã€‚</p>
                                        <pre class="brush: java;">
list.add(new Integer(1)); // ERROR
list.add(null);           // OK
</pre>
                                    </li>
                                    <li><p>ä» list ä¸­è·å–å¯¹è±¡æ˜¯æ˜¯å¯ä»¥çš„ï¼ˆæ¯”å¦‚ get(0)ï¼‰ï¼Œå› ä¸ºåœ¨è¿™ä¸ª List ä¸­ï¼Œä¸ç®¡å®é™…ç±»å‹æ˜¯ä»€ä¹ˆï¼Œä½†è‚¯å®šéƒ½èƒ½è½¬å‹ä¸º Numberã€‚</p>
                                        <pre class="brush: java;">
Number n = list.get(0);  // OK
Integer i = list.get(0); // error
</pre>
                                    </li>
                                    <li><p>äº‹å®ä¸Šï¼Œåªè¦æ˜¯å½¢å¼å‚æ•°æœ‰ä½¿ç”¨ç±»å‹å‚æ•°çš„æ–¹æ³•ï¼Œåœ¨ä½¿ç”¨æ— è¾¹ç•Œæˆ–è€…ä¸Šè¾¹ç•Œé™å®šçš„é€šé…ç¬¦çš„æƒ…å†µä¸‹ï¼Œéƒ½ä¸èƒ½è°ƒç”¨ã€‚æ¯”å¦‚ä»¥ ArrayList ä¸ºä¾‹ï¼š</p>
                                        <pre class="brush: java;">
public E get(int index)         // å¯ä»¥è°ƒç”¨
public int indexOf(Object o)    // å¯ä»¥è°ƒç”¨
public boolean add(E e)         // ä¸èƒ½è°ƒç”¨
</pre>
                                    </li>
                                </ul>
                            </div>

                            <div class="split-item">
                                <p><b>ä¸‹è¾¹ç•Œé™å®šçš„é€šé…ç¬¦</b></p>
                                <p>ä¸‹è¾¹ç•Œé™å®šçš„é€šé…ç¬¦ä½¿ç”¨ <code>&lt;? super T></code> é™å®šï¼Œæ¯”å¦‚ï¼š <code>List&lt;? super Number></code>ï¼Œæœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š</p>
                                <ul>
                                    <li><p>List&lt;? super Integer> è¡¨ç¤ºæŸç§ç‰¹å®šç±»å‹ï¼ˆInteger æˆ–è€… Integerçš„çˆ¶ç±»ï¼‰å¯¹è±¡çš„ Listã€‚å¯ä»¥ç¡®å®šè¿™ä¸ª List æŒæœ‰çš„å¯¹è±¡ç±»å‹è‚¯å®šæ˜¯ Integer æˆ–è€…å…¶çˆ¶ç±»ï¼Œæ‰€ä»¥å¾€ list é‡Œé¢ add ä¸€ä¸ª Integer æˆ–è€…å…¶å­ç±»çš„å¯¹è±¡æ˜¯å®‰å…¨çš„ï¼Œå› ä¸º Integer æˆ–è€…å…¶å­ç±»çš„å¯¹è±¡éƒ½å¯ä»¥å‘ä¸Šè½¬å‹ä¸º Integer çš„çˆ¶ç±»å¯¹è±¡ã€‚ä½†æ˜¯å› ä¸ºæ— æ³•ç¡®å®šå®é™…ç±»å‹ï¼Œæ‰€ä»¥å¾€ list é‡Œé¢ add ä¸€ä¸ª Integer çš„çˆ¶ç±»å¯¹è±¡æ˜¯ä¸å®‰å…¨çš„ã€‚</p>
                                        <pre class="brush: java;">
list.add(new Integer(1));   // OK
list.add(new Object());     // ERROR
</pre>
                                    </li>
                                    <li><p>List&lt;? super Integer> å½“ä»List<? super Integer> è·å–å…·ä½“çš„æ•°æ®çš„æ—¶å€™ï¼ŒJVM åœ¨ç¼–è¯‘çš„æ—¶å€™çŸ¥é“å®é™…ç±»å‹å¯ä»¥æ˜¯ä»»ä½• Integer çš„çˆ¶ç±»ï¼Œæ‰€ä»¥ä¸ºäº†å®‰å…¨èµ·è§ï¼Œè¦ç”¨ä¸€ä¸ªæœ€é¡¶å±‚çš„çˆ¶ç±»å¯¹è±¡æ¥æŒ‡å‘å–å‡ºçš„æ•°æ®ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…å‘ç”Ÿå¼ºåˆ¶ç±»å‹è½¬æ¢å¼‚å¸¸äº†ã€‚</p>
                                        <pre class="brush: java;">
Object obj = list.get(0);   // OK
Integer i = list.get(0);    // ERROR
</pre>
                                    </li>
                                </ul>
                            </div>
                        </div>
					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-reflect"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">Java åå°„æœºåˆ¶</h3>
					</div>
					<div class="panel-body">
						<p>åå°„æœºåˆ¶æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªç±»ï¼Œéƒ½èƒ½å¤ŸçŸ¥é“è¿™ä¸ªç±»çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼›å¯¹äºä»»æ„ä¸€ä¸ªå¯¹è±¡ï¼Œéƒ½èƒ½å¤Ÿè°ƒç”¨å®ƒçš„ä»»æ„ä¸€ä¸ªæ–¹æ³•å’Œå±æ€§ï¼›è¿™ç§åŠ¨æ€è·å–çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„åŠŸèƒ½ç§°ä¸ºjavaè¯­è¨€çš„åå°„æœºåˆ¶ã€‚</p>
						<p>åå°„æœºåˆ¶ä¸»è¦æä¾›äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
						<ul>
							<li>åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªå¯¹è±¡æ‰€å±çš„ç±»ï¼›</li>
							<li>åœ¨è¿è¡Œæ—¶æ„é€ ä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼›</li>
							<li>åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ï¼›</li>
							<li>åœ¨è¿è¡Œæ—¶è°ƒç”¨ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼›</li>
							<li>ç”ŸæˆåŠ¨æ€ä»£ç†ã€‚</li>
						</ul>
						<div class="panel panel-default">
							<div class="panel-heading">
								<a data-toggle="collapse" data-parent="#accordion"
									href="#java-example-reflect" aria-expanded="true"
									class="code-header">
									<span class="glyphicon glyphicon-plus"></span> View Code
								</a>
							</div>
							<div id="java-example-reflect" class="panel-collapse collapse"
								style="" aria-expanded="true">
								<pre class="brush: java;">
public class MyReflect {
	public static void main(String[] args) {
		MyReflect testReflect = new MyReflect();
		Class&lt;?> clazz = testReflect.getClass();
		
		System.out.println("å®Œæ•´ç±»å: " + clazz.getName());
		System.out.println("ç±»å: " + clazz.getSimpleName());
		System.out.println("ç±»å‹å: " + clazz.getTypeName());
		System.out.println("ClassLoaderå: "
				+ clazz.getClassLoader().getClass().getName());
		System.out.println("çˆ¶ç±»: " + clazz.getSuperclass().getName());
		
		/** å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶æ“ä½œè¿™ä¸ªå¯¹è±¡ */
		try {
			// ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå®ä¾‹åŒ–é»˜è®¤æ„é€ æ–¹æ³•ï¼Œè°ƒç”¨setèµ‹å€¼
			Class&lt;?> myClass = Class.forName("cm.nate.reflect.MyReflect");
			MyReflect mr = (MyReflect) myClass.newInstance();
			mr.setName("hello");
			System.out.println(mr.getName());
			
			// å–å¾—æŒ‡å®šçš„æ„é€ å‡½æ•° ä½¿ç”¨æ„é€ å‡½æ•°èµ‹å€¼
			@SuppressWarnings("unchecked")
			Constructor&lt;MyReflect> constructor = 
				(Constructor&lt;MyReflect>) myClass.getConstructor(String.class);
			MyReflect mr2 = constructor.newInstance("jiwanger");
			System.out.println(mr2.getName());
		} catch (Exception e) {
			e.printStackTrace();
		}
		
		/** å–å¾—æœ¬ç±»çš„å…¨éƒ¨å±æ€§ */
		Field[] field = clazz.getDeclaredFields();
        for (int i = 0; i &lt; field.length; i++) {
            // æƒé™ä¿®é¥°ç¬¦
            int mo = field[i].getModifiers();
            String priv = Modifier.toString(mo);
            // å±æ€§ç±»å‹
            Class&lt;?> type = field[i].getType();
            System.out.println(priv + " " + type.getName() + " " + field[i].getName() + ";");
        }
        
        /** è·å–æŸä¸ªç±»çš„å…¨éƒ¨æ–¹æ³• */
        Method method[] = clazz.getMethods();
        for (int i = 0; i &lt; method.length; ++i) {
            Class&lt;?> returnType = method[i].getReturnType();
            Class&lt;?> para[] = method[i].getParameterTypes();
            int temp = method[i].getModifiers();
            System.out.print(Modifier.toString(temp) + " ");
            System.out.print(returnType.getName() + "  ");
            System.out.print(method[i].getName() + " ");
            System.out.print("(");
            for (int j = 0; j &lt; para.length; ++j) {
                System.out.print(para[j].getName() + " " + "arg" + j);
                if (j &lt; para.length - 1) {
                    System.out.print(",");
                }
            }
            Class&lt;?> exce[] = method[i].getExceptionTypes();
            if (exce.length > 0) {
                System.out.print(") throws ");
                for (int k = 0; k &lt; exce.length; ++k) {
                    System.out.print(exce[k].getName() + " ");
                    if (k &lt; exce.length - 1) {
                        System.out.print(",");
                    }
                }
            } else {
                System.out.print(")");
            }
            System.out.println();
        }
        
        /** åå°„æœºåˆ¶è°ƒç”¨æŸä¸ªç±»çš„æ–¹æ³• */
        try {
			Class&lt;?> myClass = Class.forName("cm.nate.reflect.MyReflect");
			// è°ƒç”¨TestReflectç±»ä¸­çš„reflect1æ–¹æ³•
			
			// Java åå°„æœºåˆ¶ - è°ƒç”¨æŸä¸ªç±»çš„æ–¹æ³•1.
			// è°ƒç”¨TestReflectçš„reflect2æ–¹æ³•
			MyReflect mr3 = (MyReflect) myClass.newInstance();
			Method method2 = myClass.getMethod("setName", String.class);
			method2.invoke(mr3, "å¼ ä¸‰");
			
			Method method3 = myClass.getMethod("getName");
			String name = (String) method3.invoke(mr3);
			System.out.println(name);
			
		}  catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
	
	public MyReflect(){}
	
	public MyReflect(String name){
		this.name = name;
	}

	private String name;

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

}
</pre>
							</div>
						</div>
					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-annotation"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">Java æ³¨è§£</h3>
					</div>
					<div class="panel-body">
						<p>Java æ³¨è§£æ˜¯é™„åŠ åœ¨ä»£ç ä¸­çš„ä¸€äº›å…ƒä¿¡æ¯ï¼Œç”¨äºç¼–è¯‘å’Œè¿è¡Œæ—¶è¿›è¡Œè§£æå’Œä½¿ç”¨ï¼Œèµ·åˆ°è¯´æ˜ã€é…ç½®çš„åŠŸèƒ½ã€‚æ³¨è§£ä¸ä¼šå½±å“ä»£ç çš„å®é™…é€»è¾‘ï¼Œä»…ä»…èµ·åˆ°è¾…åŠ©æ€§çš„ä½œç”¨ã€‚åŒ…å«åœ¨java.lang.annotationåŒ…ä¸­ã€‚æ³¨è§£çš„å®šä¹‰ç±»ä¼¼äºæ¥å£çš„å®šä¹‰ï¼Œä½¿ç”¨@interfaceæ¥å®šä¹‰ï¼Œå®šä¹‰ä¸€ä¸ªæ–¹æ³•å³ä¸ºæ³¨è§£ç±»å‹å®šä¹‰äº†ä¸€ä¸ªå…ƒç´ ï¼Œæ–¹æ³•çš„å£°æ˜ä¸å…è®¸æœ‰å‚æ•°æˆ–throwè¯­å¥ï¼Œè¿”å›å€¼ç±»å‹è¢«é™å®šä¸ºåŸå§‹æ•°æ®ç±»å‹ã€å­—ç¬¦ä¸²Stringã€Classã€enumsã€æ³¨è§£ç±»å‹ï¼Œæˆ–å‰é¢è¿™äº›çš„æ•°ç»„ï¼Œæ–¹æ³•å¯ä»¥æœ‰é»˜è®¤å€¼ã€‚æ³¨è§£å¹¶ä¸ç›´æ¥å½±å“ä»£ç çš„è¯­ä¹‰ï¼Œä½†æ˜¯ä»–å¯ä»¥è¢«çœ‹åšæ˜¯ç¨‹åºçš„å·¥å…·æˆ–è€…ç±»åº“ã€‚å®ƒä¼šåè¿‡æ¥å¯¹æ­£åœ¨è¿è¡Œçš„ç¨‹åºè¯­ä¹‰æœ‰æ‰€å½±å“ã€‚æ³¨è§£å¯ä»¥ä»æºæ–‡ä»¶ã€classæ–‡ä»¶æˆ–è€…åœ¨è¿è¡Œæ—¶é€šè¿‡åå°„æœºåˆ¶å¤šç§æ–¹å¼è¢«è¯»å–ã€‚</p>
						<p>Java å…ƒæ³¨è§£ -- å…ƒæ³¨è§£æ˜¯æŒ‡æ³¨è§£çš„æ³¨è§£ã€‚åŒ…æ‹¬ @Retention @Target @Document
							@Inherited å››ç§ã€‚</p>
						<table class="table table-responsive table-striped table-bordered">
							<thead>
								<tr>
									<th>æ³¨è§£</th>
									<th>è¯´æ˜</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>@Target</td>
									<td>å®šä¹‰æ³¨è§£çš„ä½œç”¨ç›®æ ‡</td>
								</tr>
								<tr>
									<td>@Retention</td>
									<td>å®šä¹‰æ³¨è§£çš„ä¿ç•™ç­–ç•¥ã€‚RetentionPolicy.SOURCE:æ³¨è§£ä»…å­˜åœ¨äºæºç ä¸­ï¼Œåœ¨classå­—èŠ‚ç æ–‡ä»¶ä¸­ä¸åŒ…å«ï¼›RetentionPolicy.CLASS:é»˜è®¤çš„ä¿ç•™ç­–ç•¥ï¼Œæ³¨è§£ä¼šåœ¨classå­—èŠ‚ç æ–‡ä»¶ä¸­å­˜åœ¨ï¼Œä½†è¿è¡Œæ—¶æ— æ³•è·å¾—;RetentionPolicy.RUNTIME:æ³¨è§£ä¼šåœ¨classå­—èŠ‚ç æ–‡ä»¶ä¸­å­˜åœ¨ï¼Œåœ¨è¿è¡Œæ—¶å¯ä»¥é€šè¿‡åå°„è·å–åˆ°ã€‚</td>
								</tr>
								<tr>
									<td>@Document</td>
									<td>è¯´æ˜è¯¥æ³¨è§£å°†è¢«åŒ…å«åœ¨ javadoc ä¸­</td>
								</tr>
								<tr>
									<td>@Inherited</td>
									<td>è¯´æ˜å­ç±»å¯ä»¥ç»§æ‰¿çˆ¶ç±»ä¸­çš„è¯¥æ³¨è§£</td>
								</tr>
							</tbody>
						</table>

						<p>å½“æ³¨è§£æœªæŒ‡å®š Target å€¼æ—¶ï¼Œåˆ™æ­¤æ³¨è§£å¯ä»¥ç”¨äºä»»ä½•å…ƒç´ ä¹‹ä¸Šï¼Œå¤šä¸ªå€¼ä½¿ç”¨ {} åŒ…å«å¹¶ç”¨é€—å·éš”å¼€ï¼Œå¦‚ä¸‹ï¼š</p>
						<pre class="brush: java;">@Target(value={CONSTRUCTOR, FIELD, LOCAL_VARIABLE, METHOD, PACKAGE, PARAMETER, TYPE})</pre>
						<table class="table table-responsive table-striped table-bordered">
							<thead>
								<tr>
									<th>Target ç±»å‹</th>
									<th>è¯´æ˜</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>ElementType.TYPE</td>
									<td>æ¥å£ã€ç±»ã€æšä¸¾ã€æ³¨è§£</td>
								</tr>
								<tr>
									<td>ElementType.FIELD</td>
									<td>å­—æ®µã€æšä¸¾çš„å¸¸é‡</td>
								</tr>
								<tr>
									<td>ElementType.METHOD</td>
									<td>æ–¹æ³•</td>
								</tr>
								<tr>
									<td>ElementType.CONSTRUCTOR</td>
									<td>æ„é€ å‡½æ•°</td>
								</tr>
								<tr>
									<td>ElementType.LOCAL_VARIABLE</td>
									<td>å±€éƒ¨å˜é‡</td>
								</tr>
								<tr>
									<td>ElementType.ANNOTATION_TYPE</td>
									<td>æ³¨è§£</td>
								</tr>
								<tr>
									<td>ElementType.PACKAGE</td>
									<td>åŒ…</td>
								</tr>
								<tr>
									<td>ElementType.PARAMETER</td>
									<td>æ–¹æ³•å‚æ•°</td>
								</tr>
								<tr>
									<td>ElementType.TYPE_USE</td>
									<td>ç±»å‹ä½¿ç”¨å£°æ˜</td>
								</tr>
							</tbody>
						</table>
						<p class="text-primary">example</p>
						<ol>
							<li>
								<p>å®šä¹‰: FruitColor, FruitName, FruitProvider ä¸‰ä¸ªæ³¨è§£ç±»</p>
								<pre class="brush: java;">
/** æ°´æœé¢œè‰²æ³¨è§£ */
@Target(ElementType.FIELD)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface FruitColor {
	/** é¢œè‰²æšä¸¾ */
	public enum Color {
		BULE, RED, GREEN
	};

	/** é¢œè‰²å±æ€§ */
	Color fruitColor() default Color.GREEN;
}

/** æ°´æœåç§°æ³¨è§£ */
@Target(ElementType.FIELD)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface FruitName {
    String value() default "";
}

/** æ°´æœä¾›åº”è€…æ³¨è§£ */
@Target(ElementType.FIELD)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface FruitProvider {
    /** ä¾›åº”å•†ç¼–å· */
    public int id() default -1;
    
    /** ä¾›åº”å•†åç§° */
    public String name() default "";
    
    /** ä¾›åº”å•†åœ°å€ */
    public String address() default "";
}
</pre>
							</li>
							<li>
								<p>æ³¨è§£ä½¿ç”¨: Apple</p>
								<pre class="brush: java;">
public class Apple {

	@FruitName("Apple")
	private String appleName;

	@FruitColor(fruitColor = Color.RED)
	private String appleColor;

	@FruitProvider(id = 1, name = "é™•è¥¿çº¢å¯Œå£«é›†å›¢", address = "é™•è¥¿çœè¥¿å®‰å¸‚å»¶å®‰è·¯89å·çº¢å¯Œå£«å¤§å¦")
	private String appleProvider;

	public void setAppleColor(String appleColor) {
		this.appleColor = appleColor;
	}

	public String getAppleColor() {
		return appleColor;
	}

	public void setAppleName(String appleName) {
		this.appleName = appleName;
	}

	public String getAppleName() {
		return appleName;
	}

	public void setAppleProvider(String appleProvider) {
		this.appleProvider = appleProvider;
	}

	public String getAppleProvider() {
		return appleProvider;
	}

	public void displayName() {
		System.out.println("æ°´æœçš„åå­—æ˜¯ï¼šè‹¹æœ");
	}
}
</pre>
							</li>
							<li>
								<p>æ³¨è§£å¤„ç†å™¨: FruitInfoUtil</p>
								<pre class="brush: java;">
public class FruitInfoUtil {
	public static void getFruitInfo(Class&lt;?> clazz) {

		String strFruitName = " æ°´æœåç§°ï¼š";
		String strFruitColor = " æ°´æœé¢œè‰²ï¼š";
		String strFruitProvicer = "ä¾›åº”å•†ä¿¡æ¯ï¼š";

		Field[] fields = clazz.getDeclaredFields();

		for (Field field : fields) {
			if (field.isAnnotationPresent(FruitName.class)) {
				FruitName fruitName = (FruitName) field
						.getAnnotation(FruitName.class);
				strFruitName = strFruitName + fruitName.value();
				System.out.println(strFruitName);
			} else if (field.isAnnotationPresent(FruitColor.class)) {
				FruitColor fruitColor = (FruitColor) field
						.getAnnotation(FruitColor.class);
				strFruitColor = strFruitColor
						+ fruitColor.fruitColor().toString();
				System.out.println(strFruitColor);
			} else if (field.isAnnotationPresent(FruitProvider.class)) {
				FruitProvider fruitProvider = (FruitProvider) field
						.getAnnotation(FruitProvider.class);
				strFruitProvicer = " ä¾›åº”å•†ç¼–å·ï¼š" + fruitProvider.id() + " ä¾›åº”å•†åç§°ï¼š"
						+ fruitProvider.name() + " ä¾›åº”å•†åœ°å€ï¼š"
						+ fruitProvider.address();
				System.out.println(strFruitProvicer);
			}
		}
	}

	public static void main(String[] args) {
		getFruitInfo(Apple.class);
	}
}
</pre>
							</li>
						</ol>
					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-thread"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">å¤šçº¿ç¨‹</h3>
					</div>
					<div class="panel-body">
						<div class="sub-item">
							<p>
								<img src="images/java-thread.png" class="center-block">
							</p>
							<h5 class="text-primary">çº¿ç¨‹çš„çŠ¶æ€</h5>
							<ul>
								<li>
									<b>æ–°å»ºçŠ¶æ€(New)</b> -- æ–°åˆ›å»ºäº†ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡ã€‚
								</li>
								<li>
									<b>å°±ç»ªçŠ¶æ€(Runnable)</b> --
									çº¿ç¨‹å¯¹è±¡åˆ›å»ºåï¼Œå…¶ä»–çº¿ç¨‹è°ƒç”¨äº†è¯¥å¯¹è±¡çš„start()æ–¹æ³•ã€‚è¯¥çŠ¶æ€çš„çº¿ç¨‹ä½äºå¯è¿è¡Œçº¿ç¨‹æ± ä¸­ï¼Œå˜å¾—å¯è¿è¡Œï¼Œç­‰å¾…è·å–CPUçš„ä½¿ç”¨æƒã€‚
								</li>
								<li>
									<b>è¿è¡ŒçŠ¶æ€(Running)</b> -- å°±ç»ªçŠ¶æ€çš„çº¿ç¨‹è·å–äº†CPUï¼Œæ‰§è¡Œç¨‹åºä»£ç ã€‚
								</li>
								<li>
									<b>é˜»å¡çŠ¶æ€(Blocked)</b> --
									é˜»å¡çŠ¶æ€æ˜¯çº¿ç¨‹å› ä¸ºæŸç§åŸå› æ”¾å¼ƒCPUä½¿ç”¨æƒï¼Œæš‚æ—¶åœæ­¢è¿è¡Œã€‚ç›´åˆ°çº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œæ‰æœ‰æœºä¼šè½¬åˆ°è¿è¡ŒçŠ¶æ€ã€‚é˜»å¡çš„æƒ…å†µåˆ†ä¸‰ç§ï¼š
									<ol>
										<li>
											<b>ç­‰å¾…é˜»å¡</b> -- è¿è¡Œçš„çº¿ç¨‹æ‰§è¡Œwait()æ–¹æ³•ï¼ŒJVMä¼šæŠŠè¯¥çº¿ç¨‹æ”¾å…¥ç­‰å¾…æ± ä¸­ã€‚
										</li>
										<li>
											<b>åŒæ­¥é˜»å¡</b> -- è¿è¡Œçš„çº¿ç¨‹åœ¨è·å–å¯¹è±¡çš„åŒæ­¥é”æ—¶ï¼Œè‹¥è¯¥åŒæ­¥é”è¢«åˆ«çš„çº¿ç¨‹å ç”¨ï¼Œåˆ™JVMä¼šæŠŠè¯¥çº¿ç¨‹æ”¾å…¥é”æ± ä¸­ã€‚
										</li>
										<li>
											<b>å…¶ä»–é˜»å¡</b> --
											è¿è¡Œçš„çº¿ç¨‹æ‰§è¡Œsleep()æˆ–join()æ–¹æ³•ï¼Œæˆ–è€…å‘å‡ºäº†I/Oè¯·æ±‚æ—¶ï¼ŒJVMä¼šæŠŠè¯¥çº¿ç¨‹ç½®ä¸ºé˜»å¡çŠ¶æ€ã€‚å½“sleep()çŠ¶æ€è¶…æ—¶ã€join()ç­‰å¾…çº¿ç¨‹ç»ˆæ­¢æˆ–è€…è¶…æ—¶ã€æˆ–è€…I/Oå¤„ç†å®Œæ¯•æ—¶ï¼Œçº¿ç¨‹é‡æ–°è½¬å…¥å°±ç»ªçŠ¶æ€ã€‚
										</li>
									</ol>
								</li>
								<li>
									<b>æ­»äº¡çŠ¶æ€(Dead)</b> -- çº¿ç¨‹æ‰§è¡Œå®Œäº†æˆ–è€…å› å¼‚å¸¸é€€å‡ºäº†run()æ–¹æ³•ï¼Œè¯¥çº¿ç¨‹ç»“æŸç”Ÿå‘½å‘¨æœŸã€‚
								</li>
							</ul>
						</div>

						<div class="sub-item">
							<h5 class="text-primary">å…³é”®å­—: synchronized</h5>
							<ul>
								<li>
									<p>æ— è®º synchronized å…³é”®å­—åŠ åœ¨æ–¹æ³•ä¸Šè¿˜æ˜¯å¯¹è±¡ä¸Šï¼Œå¦‚æœå®ƒä½œç”¨çš„å¯¹è±¡æ˜¯éé™æ€çš„ï¼Œåˆ™å®ƒå–å¾—çš„é”æ˜¯å¯¹è±¡ï¼›å¦‚æœ
										synchronized ä½œç”¨çš„å¯¹è±¡æ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•æˆ–ä¸€ä¸ªç±»ï¼Œåˆ™å®ƒå–å¾—çš„é”æ˜¯å¯¹ç±»ï¼Œè¯¥ç±»æ‰€æœ‰çš„å¯¹è±¡åŒä¸€æŠŠé”ã€‚</p>
								</li>
								<li>
									<p>æ¯ä¸ªå¯¹è±¡åªæœ‰ä¸€ä¸ªé”ï¼ˆlockï¼‰ä¸ä¹‹ç›¸å…³è”ï¼Œè°æ‹¿åˆ°è¿™ä¸ªé”è°å°±å¯ä»¥è¿è¡Œå®ƒæ‰€æ§åˆ¶çš„é‚£æ®µä»£ç ã€‚</p>
								</li>
								<li>
									<p>å®ç°åŒæ­¥æ˜¯è¦å¾ˆå¤§çš„ç³»ç»Ÿå¼€é”€ä½œä¸ºä»£ä»·çš„ï¼Œç”šè‡³å¯èƒ½é€ æˆæ­»é”ï¼Œæ‰€ä»¥å°½é‡é¿å…æ— è°“çš„åŒæ­¥æ§åˆ¶ã€‚</p>
								</li>
							</ul>
							<p>
								<b>ä¿®é¥°ä¸€ä¸ªä»£ç å—</b>
							</p>
							<ul>
								<li>
									ä¸€ä¸ªçº¿ç¨‹è®¿é—®ä¸€ä¸ªå¯¹è±¡ä¸­çš„ synchronized(this) åŒæ­¥ä»£ç å—æ—¶ï¼Œå…¶ä»–è¯•å›¾è®¿é—®è¯¥å¯¹è±¡(<span
										class="text-danger">åŒä¸€ä¸ªå¯¹è±¡å®ä¾‹</span>)çš„çº¿ç¨‹å°†è¢«é˜»å¡ã€‚
									<div class="panel panel-default">
										<div class="panel-heading">
											<a data-toggle="collapse" data-parent="#accordion"
												href="#java-thread-e1" aria-expanded="true"
												class="code-header">
												<span class="glyphicon glyphicon-plus"></span> View Code
											</a>
										</div>
										<div id="java-thread-e1" class="panel-collapse collapse"
											style="" aria-expanded="true">
											<pre class="brush: java;">
public static void main(String[] args) {
	Main context = new Main();

	SynThread mSynThread = context.new SynThread();

	new Thread(mSynThread).start();
	new Thread(mSynThread).start();
}

class SynThread implements Runnable {
	int count = 0;

	public void run() {
		synchronized (this) {
			try {
				for (int i = 0; i < 5; i++) {
					System.out.println(Thread.currentThread().getId() + "===run===" + count++);
					Thread.sleep(500);
				}
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		}
	}
}
</pre>
										</div>
									</div>
								</li>
								<li>
									å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®å¯¹è±¡çš„ä¸€ä¸ª synchronized(this) åŒæ­¥ä»£ç å—æ—¶ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä»ç„¶å¯ä»¥è®¿é—®è¯¥å¯¹è±¡ä¸­çš„é
									synchronized(this) åŒæ­¥ä»£ç å—ã€‚
									<div class="panel panel-default">
										<div class="panel-heading">
											<a data-toggle="collapse" data-parent="#accordion"
												href="#java-thread-e2" aria-expanded="true"
												class="code-header">
												<span class="glyphicon glyphicon-plus"></span> View Code
											</a>
										</div>
										<div id="java-thread-e2" class="panel-collapse collapse"
											style="" aria-expanded="true">
											<pre class="brush: java;">
public static void main(String[] args) {
	Main context = new Main();

	SynThread mSynThread = context.new SynThread();

	new Thread(mSynThread).start();
	new Thread(mSynThread).start();
	
	for (int i = 0; i < 5; i++) {
		mSynThread.showCount();
	}
}

class SynThread implements Runnable {
	int count = 0;

	public void run() {
		synchronized (this) {
			try {
				for (int i = 0; i < 5; i++) {
					System.out.println(Thread.currentThread().getId() + "===run===" + count++);
					Thread.sleep(500);
				}
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		}
	}
	
	public void showCount(){
		try {
			Thread.sleep(500);
			System.out.println(Thread.currentThread().getId() + "==================count===" + count);
		} catch (InterruptedException e) {
			e.printStackTrace();
		}
	}
}
</pre>
										</div>
									</div>
								</li>
								<li>
									å½“æ²¡æœ‰æ˜ç¡®çš„å¯¹è±¡ä½œä¸ºé”ï¼Œåªæ˜¯æƒ³è®©ä¸€æ®µä»£ç åŒæ­¥æ—¶ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡æ¥å……å½“é”ï¼š
									<div class="panel panel-default">
										<div class="panel-heading">
											<a data-toggle="collapse" data-parent="#accordion"
												href="#java-thread-e3" aria-expanded="true"
												class="code-header">
												<span class="glyphicon glyphicon-plus"></span> View Code
											</a>
										</div>
										<div id="java-thread-e3" class="panel-collapse collapse"
											style="" aria-expanded="true">
											<pre class="brush: java;">
public static void main(String[] args) {
	Main context = new Main();

	SynThread mSynThread = context.new SynThread();

	new Thread(mSynThread).start();
	new Thread(mSynThread).start();
}

class SynThread implements Runnable {
	int count = 0;
	// é›¶é•¿åº¦çš„byteæ•°ç»„å¯¹è±¡åˆ›å»ºèµ·æ¥å°†æ¯”ä»»ä½•å¯¹è±¡éƒ½ç»æµ
	private byte[] lock = new byte[0];
	
	public void run() {
		synchronized (lock) {
			try {
				for (int i = 0; i < 5; i++) {
					System.out.println(Thread.currentThread().getId() + "===run===" + count++);
					Thread.sleep(500);
				}
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		}
	}
}
</pre>
										</div>
									</div>
								</li>
							</ul>
							<p>
								<b>ä¿®é¥°ä¸€ä¸ªæ–¹æ³•</b>
							</p>
							<p>synchronized å…³é”®å­—ä¸èƒ½ç»§æ‰¿ã€‚æ–¹æ³•ä¸Šçš„ synchronized å…³é”®å­—å’Œå¦‚ä¸‹ä»£ç ç­‰ä»·:</p>
							<pre class="brush: java;">
public void method() {
	synchronized(this) {
	   // todo
	}
}
</pre>
							<p>
								<b>ä¿®é¥°ä¸€ä¸ªé™æ€çš„æ–¹æ³•</b>
							</p>
							<p>é™æ€æ–¹æ³•æ˜¯å±äºç±»çš„è€Œä¸å±äºå¯¹è±¡çš„ã€‚åŒæ ·çš„ï¼Œsynchronizedä¿®é¥°çš„é™æ€æ–¹æ³•é”å®šçš„æ˜¯è¿™ä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡ã€‚</p>
							<div class="panel panel-default">
								<div class="panel-heading">
									<a data-toggle="collapse" data-parent="#accordion"
										href="#java-thread-e4" aria-expanded="true"
										class="code-header">
										<span class="glyphicon glyphicon-plus"></span> View Code
									</a>
								</div>
								<div id="java-thread-e4" class="panel-collapse collapse"
									style="" aria-expanded="true">
									<pre class="brush: java;">
public class Main {
	public static void main(String[] args) {
		// å’Œå‰é¢ä¸ä¸€æ ·, ä¸¤ä¸ªä¸åŒçš„ SynThread å¯¹è±¡å®ä¾‹
		new Thread(new SynThread()).start();
		new Thread(new SynThread()).start();
	}
}

class SynThread implements Runnable {
	static int count = 0;

	public void run() {
		test();
	}

	public synchronized static void test() {
		try {
			for (int i = 0; i < 5; i++) {
				System.out.println(Thread.currentThread().getId() + "===run===" + count++);
				Thread.sleep(500);
			}
		} catch (InterruptedException e) {
			e.printStackTrace();
		}
	}
}
</pre>
								</div>
							</div>
							<p>
								<b>ä¿®é¥°ä¸€ä¸ªç±»</b>
							</p>
							<p>synchronized ä½œç”¨äºä¸€ä¸ªç±»Tæ—¶ï¼Œæ˜¯ç»™è¿™ä¸ªç±»TåŠ é”ï¼ŒTçš„æ‰€æœ‰å¯¹è±¡ç”¨çš„æ˜¯åŒä¸€æŠŠé”ã€‚</p>
							<div class="panel panel-default">
								<div class="panel-heading">
									<a data-toggle="collapse" data-parent="#accordion"
										href="#java-thread-e5" aria-expanded="true"
										class="code-header">
										<span class="glyphicon glyphicon-plus"></span> View Code
									</a>
								</div>
								<div id="java-thread-e5" class="panel-collapse collapse"
									style="" aria-expanded="true">
									<pre class="brush: java;">
public static void main(String[] args) {
	Main context = new Main();

	new Thread(context.new SynThread()).start();
	new Thread(context.new SynThread()).start();
}

class SynThread implements Runnable {
	int count = 0;

	public void run() {
		synchronized (SynThread.class) {
			try {
				for (int i = 0; i < 5; i++) {
					System.out.println(Thread.currentThread().getId() + "===run===" + count++);
					Thread.sleep(500);
				}
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		}
	}

}
</pre>
								</div>
							</div>
						</div>

						<div class="sub-item">
							<h5 class="text-primary">çº¿ç¨‹è°ƒåº¦</h5>
							<ul>
								<li>
									<b>çº¿ç¨‹ä¼˜å…ˆçº§</b> --
									Javaçº¿ç¨‹æœ‰ä¼˜å…ˆçº§ï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ä¼šè·å¾—è¾ƒå¤šçš„è¿è¡Œæœºä¼šã€‚æ¨èä½¿ç”¨Threadç±»æœ‰ä»¥ä¸‹ä¸‰ä¸ªé™æ€å¸¸é‡:
									<pre class="brush: java;">
// Threadç±»çš„ setPriority() å’Œ getPriority() æ–¹æ³•åˆ†åˆ«ç”¨æ¥è®¾ç½®å’Œè·å–çº¿ç¨‹çš„ä¼˜å…ˆçº§ã€‚
static int MAX_PRIORITY;	// çº¿ç¨‹å¯ä»¥å…·æœ‰çš„æœ€é«˜ä¼˜å…ˆçº§ï¼Œå–å€¼ä¸º10ã€‚ 
static int MIN_PRIORITY;	// çº¿ç¨‹å¯ä»¥å…·æœ‰çš„æœ€ä½ä¼˜å…ˆçº§ï¼Œå–å€¼ä¸º1ã€‚
static int NORM_PRIORITY;	// åˆ†é…ç»™çº¿ç¨‹çš„é»˜è®¤ä¼˜å…ˆçº§ï¼Œå–å€¼ä¸º5ã€‚ 
</pre>
								</li>
								<li>
									<b>Thread.sleep(long millis)</b> --
									ä½¿çº¿ç¨‹è½¬åˆ°é˜»å¡çŠ¶æ€ã€‚milliså‚æ•°è®¾å®šç¡çœ çš„æ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚å½“ç¡çœ ç»“æŸåï¼Œå°±è½¬ä¸ºå°±ç»ªï¼ˆRunnableï¼‰çŠ¶æ€ã€‚
									<pre class="brush: java;">
class SleepThread extends Thread {
	@Override
	public void run() {
		try {
			System.out.println("sleep 2000 æ¯«ç§’");
			sleep(1000);
			System.out.println("sleep ç»“æŸ");
		} catch (InterruptedException e) {
			e.printStackTrace();
		}
		super.run();
	}
	
}
</pre>
								</li>
								<li>
									<p>
										<b>wait å’Œ sleep åŒºåˆ«</b>
									</p>
									<ul>
										<li>ä»–ä»¬éƒ½æ˜¯åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ï¼Œéƒ½å¯ä»¥åœ¨ç¨‹åºçš„è°ƒç”¨å¤„é˜»å¡æŒ‡å®šçš„æ¯«ç§’æ•°ï¼Œå¹¶è¿”å›ã€‚</li>
										<li>wait()å’Œsleep()éƒ½å¯ä»¥é€šè¿‡interrupt()æ–¹æ³• æ‰“æ–­çº¿ç¨‹çš„æš‚åœçŠ¶æ€
											ï¼Œä»è€Œä½¿çº¿ç¨‹ç«‹åˆ»æŠ›å‡ºInterruptedExceptionã€‚</li>
										<li>æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªé”æ¥æ§åˆ¶åŒæ­¥è®¿é—®ã€‚Synchronizedå…³é”®å­—å¯ä»¥å’Œå¯¹è±¡çš„é”äº¤äº’ï¼Œæ¥å®ç°çº¿ç¨‹çš„åŒæ­¥ã€‚
											sleepæ–¹æ³•æ²¡æœ‰é‡Šæ”¾é”ï¼Œè€Œwaitæ–¹æ³•é‡Šæ”¾äº†é”ï¼Œä½¿å¾—å…¶ä»–çº¿ç¨‹å¯ä»¥ä½¿ç”¨åŒæ­¥æ§åˆ¶å—æˆ–è€…æ–¹æ³•ã€‚</li>
										<li>waitï¼Œnotifyå’ŒnotifyAllåªèƒ½åœ¨åŒæ­¥æ§åˆ¶æ–¹æ³•æˆ–è€…åŒæ­¥æ§åˆ¶å—é‡Œé¢ä½¿ç”¨ï¼Œè€Œsleepå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨
										</li>
										<li>åœ¨sleep()ä¼‘çœ æ—¶é—´æœŸæ»¡åï¼Œè¯¥çº¿ç¨‹ä¸ä¸€å®šä¼šç«‹å³æ‰§è¡Œï¼Œè¿™æ˜¯å› ä¸ºå…¶å®ƒçº¿ç¨‹å¯èƒ½æ­£åœ¨è¿è¡Œè€Œä¸”æ²¡æœ‰è¢«è°ƒåº¦ä¸ºæ”¾å¼ƒæ‰§è¡Œï¼Œé™¤éæ­¤çº¿ç¨‹å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚
										</li>
									</ul>
									<p class="alert alert-danger">
										<b>ç»¼ä¸Šæ‰€è¿°: wait å’Œ sleep æœ€å¤§åŒºåˆ«:
											sleep()ç¡çœ æ—¶ï¼Œä¿æŒå¯¹è±¡é”ï¼Œä»ç„¶å æœ‰è¯¥é”ï¼›è€Œwait()ç¡çœ æ—¶ï¼Œé‡Šæ”¾å¯¹è±¡é”ã€‚</b>
									</p>
								</li>
								<li>
									<p>
										<b>Thread.yield()</b> --
										æš‚åœå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ï¼ŒæŠŠæ‰§è¡Œæœºä¼šè®©ç»™ç›¸åŒæˆ–è€…æ›´é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹ã€‚yield()ä½¿å½“å‰çº¿ç¨‹é‡æ–°å›åˆ°å¯æ‰§è¡ŒçŠ¶æ€ï¼Œæ‰€ä»¥æ‰§è¡Œyield()çš„çº¿ç¨‹æœ‰å¯èƒ½åœ¨è¿›å…¥åˆ°å¯æ‰§è¡ŒçŠ¶æ€åé©¬ä¸Šåˆè¢«æ‰§è¡Œã€‚ä½†
										yield() æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œå½“å‰çº¿ç¨‹ä»å¤„åœ¨å¯è¿è¡ŒçŠ¶æ€ï¼Œæ‰€ä»¥ï¼Œä¸å¯èƒ½è®©å‡ºè¾ƒä½ä¼˜å…ˆçº§çš„çº¿ç¨‹äº›æ—¶è·å¾— CPU å æœ‰æƒã€‚
									</p>
								</li>
								<li>
									<b>Thread.join()</b> -- è°ƒç”¨ join() æ–¹æ³•çš„çº¿ç¨‹ç­‰å¾…Tçº¿ç¨‹ç»ˆæ­¢å†æ‰§è¡Œã€‚
									<pre class="brush: java;">
Thread t = new Thread(new Runnable() {
	@Override
	public void run() {
		try {
			Thread.sleep(2000);
		} catch (InterruptedException e) {
			e.printStackTrace();
		}
	}
});

t.start();
try {
	System.out.println("=====æˆ‘åœ¨ç­‰å¾…======");
	t.join();
	// çº¿ç¨‹ t æ‰§è¡Œå®Œåéƒ½ä¼šæ‰§è¡Œæ­¤å¤„ä»£ç 
	System.out.println("=====æˆ‘ç°åœ¨æ‰§è¡Œ======");
} catch (InterruptedException e) {
	e.printStackTrace();
}
</pre>
								</li>
								<li>
									<b>Objectçš„wait(), notify() å’Œ notifyAll()</b> --
									å¯¼è‡´å½“å‰çš„çº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°å…¶ä»–çº¿ç¨‹è°ƒç”¨æ­¤å¯¹è±¡çš„ notify() æ–¹æ³•æˆ– notifyAll() å”¤é†’æ–¹æ³•ã€‚
									<div class="alert alert-success"
										style="font-size: 14px; font-weight: bold;">
										<ul>
											<li>æ°¸è¿œåœ¨synchronizedçš„å‡½æ•°æˆ–å¯¹è±¡é‡Œä½¿ç”¨waitã€notifyå’ŒnotifyAllï¼Œä¸ç„¶Javaè™šæ‹Ÿæœºä¼šç”Ÿæˆ
												IllegalMonitorStateExceptionã€‚</li>
											<li>æ°¸è¿œåœ¨whileå¾ªç¯é‡Œè€Œä¸æ˜¯ifè¯­å¥ä¸‹ä½¿ç”¨waitã€‚è¿™æ ·ï¼Œå¾ªç¯ä¼šåœ¨çº¿ç¨‹ç¡çœ å‰åéƒ½æ£€æŸ¥waitçš„æ¡ä»¶ï¼Œå¹¶åœ¨æ¡ä»¶å®é™…ä¸Šå¹¶æœªæ”¹å˜çš„æƒ…å†µä¸‹å¤„ç†å”¤é†’é€šçŸ¥ã€‚
											</li>
											<li>æ°¸è¿œåœ¨å¤šçº¿ç¨‹é—´å…±äº«çš„å¯¹è±¡ï¼ˆåœ¨ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹é‡Œå³ç¼“å†²åŒºé˜Ÿåˆ—ï¼‰ä¸Šä½¿ç”¨waitã€‚</li>
											<li>åŸºäºå‰æ–‡æåŠçš„ç†ç”±ï¼Œæ›´å€¾å‘ç”¨ notifyAll()ï¼Œè€Œä¸æ˜¯ notify()ã€‚</li>
										</ul>
									</div>
									<p>
										<b>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹</b>: ç”Ÿäº§è€…ç”Ÿäº§åˆ° 10 ä¸ªäº§å“å°±åœä¸‹æ¥ç­‰æ¶ˆè´¹è€…æ¶ˆè´¹ï¼›æ¶ˆè´¹è€…æ²¡æœ‰äº§å“å°±é€šçŸ¥å¹¶ç­‰å¾…ç”Ÿäº§è€…ç”Ÿäº§ã€‚
										wait() å’Œ nofity() æ–¹æ³•åªèƒ½ç”¨äº queue, å› ä¸º synchronized (queue).
									</p>
									<div class="panel panel-default">
										<div class="panel-heading">
											<a data-toggle="collapse" data-parent="#accordion"
												href="#java-thread-e6" aria-expanded="true"
												class="code-header">
												<span class="glyphicon glyphicon-plus"></span> View Code
											</a>
										</div>
										<div id="java-thread-e6" class="panel-collapse collapse"
											style="" aria-expanded="true">
											<pre class="brush: java;">
public class ProducerConsumerInJava {
	public static void main(String args[]) {
		Queue&lt;Integer> buffer = new LinkedList&lt;>();
		int maxSize = 10;
		Thread producer = new Producer(buffer, maxSize, "ç”Ÿäº§è€…");
		Thread consumer = new Consumer(buffer, "æ¶ˆè´¹è€…");
		producer.start();
		consumer.start();
	}
}

// ç”Ÿäº§äº§å“ï¼Œå½“æœ‰10 ä¸ªäº§å“çš„æ—¶å€™å°±åœä¸‹æ¥ç­‰æ¶ˆè´¹è€…æ¶ˆè´¹
class Producer extends Thread {
	private Queue&lt;Integer> queue;
	private int maxSize;

	public Producer(Queue&lt;Integer> queue, int maxSize, String name) {
		super(name);
		this.queue = queue;
		this.maxSize = maxSize;
	}

	@Override
	public void run() {
		while (true) {
			synchronized (queue) {
				while (queue.size() == maxSize) {
					try {
						System.out.println(getName() + ", äº§å“å¤ªå¤šäº†ï¼Œç­‰æ¶ˆè´¹è€…æ¶ˆè´¹åå†ç”Ÿäº§ã€‚");
						queue.wait();
					} catch (Exception ex) {
						ex.printStackTrace();
					}
				}
				Random random = new Random();
				int i = random.nextInt();
				try {
					// ç”Ÿäº§ä¸€ä¸ªäº§å“è¦ 1000 æ¯«ç§’
					sleep(1000);
				} catch (InterruptedException e) {
					e.printStackTrace();
				}
				System.out.println(getName() + "ç”Ÿæˆçš„äº§å“: " + i);
				queue.add(i);
				queue.notifyAll();
			}
		}
	}
}

// æ¶ˆè´¹äº§å“ï¼Œæ— äº§å“æ—¶å°±åœä¸‹æ¥ï¼Œå¹¶é€šçŸ¥ç”Ÿäº§è€…ç”Ÿäº§
class Consumer extends Thread {
	private Queue&lt;Integer> queue;

	public Consumer(Queue&lt;Integer> queue, String name) {
		super(name);
		this.queue = queue;
	}

	@Override
	public void run() {
		while (true) {
			synchronized (queue) {
				while (queue.isEmpty()) {
					System.out.println(getName() + ", æ²¡æœ‰äº§å“äº†ï¼Œæˆ‘ç­‰ä½ ç”Ÿäº§!");
					try {
						queue.wait();
					} catch (Exception ex) {
						ex.printStackTrace();
					}
				}
				try {
					// æ¶ˆè´¹ä¸€ä¸ªäº§å“è¦ 200 æ¯«ç§’
					sleep(200);
				} catch (InterruptedException e) {
					e.printStackTrace();
				}
				System.out.println(getName() + "æ¶ˆè´¹çš„äº§å“ : " + queue.remove());
				queue.notifyAll();
			}
		}
	}
}
</pre>
										</div>
									</div>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-thread-pool"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">Java çº¿ç¨‹æ± </h3>
					</div>
					<div class="panel-body">
						<div class="sub-item">
							<p>çº¿ç¨‹æ± æ˜¯ä¸€ç§å¤šçº¿ç¨‹å¤„ç†å½¢å¼ï¼Œå¤„ç†è¿‡ç¨‹ä¸­å°†ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—ï¼Œç„¶ååœ¨åˆ›å»ºçº¿ç¨‹åè‡ªåŠ¨å¯åŠ¨è¿™äº›ä»»åŠ¡ã€‚çº¿ç¨‹æ± çº¿ç¨‹éƒ½æ˜¯åå°çº¿ç¨‹ã€‚æ¯ä¸ªçº¿ç¨‹éƒ½ä½¿ç”¨é»˜è®¤çš„å †æ ˆå¤§å°ï¼Œä»¥é»˜è®¤çš„ä¼˜å…ˆçº§è¿è¡Œï¼Œå¹¶å¤„äºå¤šçº¿ç¨‹å•å…ƒä¸­ã€‚å¦‚æœæŸä¸ªçº¿ç¨‹åœ¨æ‰˜ç®¡ä»£ç ä¸­ç©ºé—²ï¼ˆå¦‚æ­£åœ¨ç­‰å¾…æŸä¸ªäº‹ä»¶ï¼‰,åˆ™çº¿ç¨‹æ± å°†æ’å…¥å¦ä¸€ä¸ªè¾…åŠ©çº¿ç¨‹æ¥ä½¿æ‰€æœ‰å¤„ç†å™¨ä¿æŒç¹å¿™ã€‚å¦‚æœæ‰€æœ‰çº¿ç¨‹æ± çº¿ç¨‹éƒ½å§‹ç»ˆä¿æŒç¹å¿™ï¼Œä½†é˜Ÿåˆ—ä¸­åŒ…å«æŒ‚èµ·çš„å·¥ä½œï¼Œåˆ™çº¿ç¨‹æ± å°†åœ¨ä¸€æ®µæ—¶é—´ååˆ›å»ºå¦ä¸€ä¸ªè¾…åŠ©çº¿ç¨‹ä½†çº¿ç¨‹çš„æ•°ç›®æ°¸è¿œä¸ä¼šè¶…è¿‡æœ€å¤§å€¼ã€‚è¶…è¿‡æœ€å¤§å€¼çš„çº¿ç¨‹å¯ä»¥æ’é˜Ÿï¼Œä½†ä»–ä»¬è¦ç­‰åˆ°å…¶ä»–çº¿ç¨‹å®Œæˆåæ‰å¯åŠ¨ã€‚</p>
							<ul>
								<li>å‡å°‘äº†åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„æ¬¡æ•°ï¼Œæ¯ä¸ªå·¥ä½œçº¿ç¨‹éƒ½å¯ä»¥è¢«é‡å¤åˆ©ç”¨ï¼Œå¯æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚</li>
								<li>å¯ä»¥æ ¹æ®ç³»ç»Ÿçš„æ‰¿å—èƒ½åŠ›ï¼Œè°ƒæ•´çº¿ç¨‹æ± ä¸­å·¥ä½œçº¿çº¿ç¨‹çš„æ•°ç›®ï¼Œé˜²æ­¢å› ä¸ºæ¶ˆè€—è¿‡å¤šçš„å†…å­˜ï¼Œè€ŒæŠŠæœåŠ¡å™¨ç´¯è¶´ä¸‹ã€‚</li>
								<li>æä¾›å®šæ—¶æ‰§è¡Œã€å®šæœŸæ‰§è¡Œã€å•çº¿ç¨‹ã€å¹¶å‘æ•°æ§åˆ¶ç­‰åŠŸèƒ½ã€‚</li>
							</ul>
						</div>

						<div class="sub-item">
							<h5 class="text-primary">ThreadPoolExecutor ç±»</h5>
							<p>ThreadPoolExecutor
								ç±»æ˜¯çº¿ç¨‹æ± ä¸­æœ€æ ¸å¿ƒçš„ä¸€ä¸ªç±»ï¼Œå› æ­¤å¦‚æœè¦é€å½»åœ°äº†è§£Javaä¸­çš„çº¿ç¨‹æ± ï¼Œå¿…é¡»å…ˆäº†è§£è¿™ä¸ªç±»ã€‚</p>
							<p>ThreadPoolExecutor, AbstractExecutorService,
								ExecutorService å’Œ Executor å‡ ä¸ªä¹‹é—´çš„å…³ç³»:</p>
							<ul>
								<li>
									<b>Executor</b> æ˜¯ä¸€ä¸ªé¡¶å±‚æ¥å£ï¼Œåœ¨å®ƒé‡Œé¢åªå£°æ˜äº†ä¸€ä¸ªæ–¹æ³•execute(Runnable)
								</li>
								<li>
									<b>ExecutorService</b>
									æ¥å£ç»§æ‰¿äº†Executoræ¥å£ï¼Œå¹¶å£°æ˜äº†ä¸€äº›æ–¹æ³•ï¼šsubmitã€invokeAllã€invokeAnyä»¥åŠshutDownç­‰
								</li>
								<li>
									<b>AbstractExecutorService</b> å®ç°äº† ExecutorService æ¥å£ï¼ŒåŸºæœ¬å®ç°äº†
									<b>ExecutorService</b> ä¸­å£°æ˜çš„æ‰€æœ‰æ–¹æ³•
								</li>
								<li>
									<b>ThreadPoolExecutor</b> ç»§æ‰¿äº†ç±» AbstractExecutorService
								</li>
							</ul>
							<p class="alert alert-success">
								<b>ä¸æ¨èç›´æ¥ä½¿ç”¨ ThreadPoolExecutorï¼Œè€Œæ˜¯ä½¿ç”¨ Executors
									ç±»ä¸­æä¾›çš„å‡ ä¸ªé™æ€æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ± (è§ä¸‹é¢: <a href="#java-thread-pool-executors"
										class="text-danger">å‡ ç§å¸¸ç”¨çº¿ç¨‹æ± </a>):
								</b>
							</p>
							<pre class="brush: java;">
// åˆ›å»ºä¸€ä¸ªç¼“å†²æ± ï¼Œç¼“å†²æ± å®¹é‡å¤§å°ä¸ºInteger.MAX_VALUE
Executors.newCachedThreadPool();
// åˆ›å»ºå®¹é‡ä¸º1çš„ç¼“å†²æ± 
Executors.newSingleThreadExecutor();
// åˆ›å»ºå›ºå®šå®¹é‡å¤§å°çš„ç¼“å†²æ± 
Executors.newFixedThreadPool(int);
// åˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œæ”¯æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œ
Executors.newScheduledThreadPool(int)
</pre>
							<p>
								<b>æ„é€ æ–¹æ³•</b>: (å‰é¢ä¸‰ä¸ªæ„é€ å™¨éƒ½æ˜¯è°ƒç”¨çš„ç¬¬å››ä¸ªæ„é€ å™¨è¿›è¡Œçš„åˆå§‹åŒ–å·¥ä½œ)
							</p>
							<pre class="brush: java;">
public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, 
	TimeUnit unit, BlockingQueue&lt;Runnable> workQueue)

public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize,long keepAliveTime, TimeUnit unit,
	BlockingQueue&lt;Runnable> workQueue, ThreadFactory threadFactory)
	
public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit,
    BlockingQueue&lt;Runnable> workQueue, RejectedExecutionHandler handler)

/**
 * corePoolSize: æ ¸å¿ƒæ± çš„å¤§å°ï¼Œåœ¨åˆ›å»ºäº†çº¿ç¨‹æ± åï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œçº¿ç¨‹æ± ä¸­å¹¶æ²¡æœ‰ä»»ä½•çº¿ç¨‹ï¼Œè€Œæ˜¯ç­‰å¾…æœ‰ä»»åŠ¡åˆ°æ¥æ‰åˆ›å»ºçº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡
 * 		é™¤éè°ƒç”¨äº†prestartAllCoreThreads()æˆ–è€…prestartCoreThread()æ–¹æ³•ï¼Œä»è¿™2ä¸ªæ–¹æ³•çš„åå­—å°±å¯ä»¥çœ‹å‡ºï¼Œæ˜¯é¢„åˆ›å»ºçº¿ç¨‹çš„
 *		æ„æ€ï¼Œå³åœ¨æ²¡æœ‰ä»»åŠ¡åˆ°æ¥ä¹‹å‰å°±åˆ›å»ºcorePoolSizeä¸ªçº¿ç¨‹æˆ–è€…ä¸€ä¸ªçº¿ç¨‹ã€‚
 * maximumPoolSize: çº¿ç¨‹æ± æœ€å¤§çº¿ç¨‹æ•°ï¼Œè¡¨ç¤ºåœ¨çº¿ç¨‹æ± ä¸­æœ€å¤šèƒ½åˆ›å»ºå¤šå°‘ä¸ªçº¿ç¨‹
 * keepAliveTime: è¡¨ç¤ºçº¿ç¨‹æ²¡æœ‰ä»»åŠ¡æ‰§è¡Œæ—¶æœ€å¤šä¿æŒå¤šä¹…æ—¶é—´ä¼šç»ˆæ­¢ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰å½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°å¤§äºcorePoolSizeæ—¶ï¼Œ
 * 		keepAliveTimeæ‰ä¼šèµ·ä½œç”¨ï¼Œç›´åˆ°çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ä¸å¤§äºcorePoolSizeï¼Œå³å½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°å¤§äºcorePoolSizeæ—¶ï¼Œ
 * 		å¦‚æœä¸€ä¸ªçº¿ç¨‹ç©ºé—²çš„æ—¶é—´è¾¾åˆ°keepAliveTimeï¼Œåˆ™ä¼šç»ˆæ­¢ï¼Œç›´åˆ°çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ä¸è¶…è¿‡corePoolSizeã€‚ä½†æ˜¯å¦‚æœè°ƒç”¨äº†
 * 		allowCoreThreadTimeOut(boolean)æ–¹æ³•ï¼Œåœ¨çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ä¸å¤§äºcorePoolSizeæ—¶ï¼ŒkeepAliveTimeå‚æ•°ä¹Ÿä¼šèµ·ä½œç”¨ï¼Œ
 * 		ç›´åˆ°çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ä¸º0ï¼›
 * unit: å‚æ•°keepAliveTimeçš„æ—¶é—´å•ä½, java.util.concurrent.TimeUnit ç±»ä¸­å®šä¹‰
 * workQueue: ä¸€ä¸ªé˜»å¡é˜Ÿåˆ—ï¼Œç”¨æ¥å­˜å‚¨ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡ã€‚LinkedBlockingQueue, SynchronousQueue ç­‰
 * threadFactory: çº¿ç¨‹å·¥å‚ï¼Œä¸»è¦ç”¨æ¥åˆ›å»ºçº¿ç¨‹
 * handler: è¡¨ç¤ºå½“æ‹’ç»å¤„ç†ä»»åŠ¡æ—¶çš„ç­–ç•¥ï¼Œæœ‰ä»¥ä¸‹å››ç§å–å€¼ï¼š
 * 		ThreadPoolExecutor.AbortPolicy: ä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸ã€‚ 
 * 		ThreadPoolExecutor.DiscardPolicyï¼šä¹Ÿæ˜¯ä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ã€‚ 
 * 		ThreadPoolExecutor.DiscardOldestPolicyï¼šä¸¢å¼ƒé˜Ÿåˆ—æœ€å‰é¢çš„ä»»åŠ¡ï¼Œç„¶åé‡æ–°å°è¯•æ‰§è¡Œä»»åŠ¡ï¼ˆé‡å¤æ­¤è¿‡ç¨‹ï¼‰
 * 		ThreadPoolExecutor.CallerRunsPolicyï¼šç”±è°ƒç”¨çº¿ç¨‹å¤„ç†è¯¥ä»»åŠ¡ 
 */
public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit,
	BlockingQueue&lt;Runnable> workQueue, ThreadFactory threadFactory, RejectedExecutionHandler handler)
</pre>
							<p>
								<b>çº¿ç¨‹æ± çŠ¶æ€</b>:
							</p>
							<pre class="brush: java;">
volatile int runState;// runStateè¡¨ç¤ºå½“å‰çº¿ç¨‹æ± çš„çŠ¶æ€
// å½“åˆ›å»ºçº¿ç¨‹æ± åï¼Œåˆå§‹æ—¶ï¼Œçº¿ç¨‹æ± å¤„äºRUNNINGçŠ¶æ€
static final int RUNNING    = 0;
// å¦‚æœè°ƒç”¨äº†shutdown()æ–¹æ³•ï¼Œåˆ™çº¿ç¨‹æ± å¤„äºSHUTDOWNçŠ¶æ€ï¼Œæ­¤æ—¶çº¿ç¨‹æ± ä¸èƒ½å¤Ÿæ¥å—æ–°çš„ä»»åŠ¡ï¼Œå®ƒä¼šç­‰å¾…æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•
static final int SHUTDOWN   = 1;
// å¦‚æœè°ƒç”¨äº†shutdownNow()æ–¹æ³•ï¼Œåˆ™çº¿ç¨‹æ± å¤„äºSTOPçŠ¶æ€ï¼Œæ­¤æ—¶çº¿ç¨‹æ± ä¸èƒ½æ¥å—æ–°çš„ä»»åŠ¡ï¼Œå¹¶ä¸”ä¼šå»å°è¯•ç»ˆæ­¢æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡
static final int STOP       = 2;
// å½“çº¿ç¨‹æ± å¤„äºSHUTDOWNæˆ–STOPçŠ¶æ€,å¹¶ä¸”æ‰€æœ‰å·¥ä½œçº¿ç¨‹å·²ç»é”€æ¯,ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—å·²ç»æ¸…ç©ºæˆ–æ‰§è¡Œç»“æŸå,çº¿ç¨‹æ± è¢«è®¾ç½®ä¸ºTERMINATEDçŠ¶æ€
static final int TERMINATED = 3;
</pre>
							<p>
								<b>ä»»åŠ¡çš„æ‰§è¡Œ</b>:
							</p>
							<ul>
								<li>å¦‚æœå½“å‰çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›®å°äºcorePoolSizeï¼Œåˆ™æ¯æ¥ä¸€ä¸ªä»»åŠ¡ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼›</li>
								<li>å¦‚æœå½“å‰çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›®>=corePoolSizeï¼Œåˆ™æ¯æ¥ä¸€ä¸ªä»»åŠ¡ï¼Œä¼šå°è¯•å°†å…¶æ·»åŠ åˆ°ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—å½“ä¸­ï¼Œè‹¥æ·»åŠ æˆåŠŸï¼Œåˆ™è¯¥ä»»åŠ¡ä¼šç­‰å¾…ç©ºé—²çº¿ç¨‹å°†å…¶å–å‡ºå»æ‰§è¡Œï¼›è‹¥æ·»åŠ å¤±è´¥ï¼ˆä¸€èˆ¬æ¥è¯´æ˜¯ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—å·²æ»¡ï¼‰ï¼Œåˆ™ä¼šå°è¯•åˆ›å»ºæ–°çš„çº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼›</li>
								<li>å¦‚æœå½“å‰çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›®è¾¾åˆ°maximumPoolSizeï¼Œåˆ™ä¼šé‡‡å–ä»»åŠ¡æ‹’ç»ç­–ç•¥è¿›è¡Œå¤„ç†ï¼›</li>
								<li>å¦‚æœçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡å¤§äº
									corePoolSizeæ—¶ï¼Œå¦‚æœæŸçº¿ç¨‹ç©ºé—²æ—¶é—´è¶…è¿‡keepAliveTimeï¼Œçº¿ç¨‹å°†è¢«ç»ˆæ­¢ï¼Œç›´è‡³çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›®ä¸å¤§äºcorePoolSizeï¼›å¦‚æœå…è®¸ä¸ºæ ¸å¿ƒæ± ä¸­çš„çº¿ç¨‹è®¾ç½®å­˜æ´»æ—¶é—´ï¼Œé‚£ä¹ˆæ ¸å¿ƒæ± ä¸­çš„çº¿ç¨‹ç©ºé—²æ—¶é—´è¶…è¿‡keepAliveTimeï¼Œçº¿ç¨‹ä¹Ÿä¼šè¢«ç»ˆæ­¢ã€‚</li>
							</ul>
							<p>
								<b>ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—åŠæ’é˜Ÿç­–ç•¥</b>:
							</p>
							<p>workQueueçš„ç±»å‹ä¸ºBlockingQueue&lt;Runnable>ï¼Œé€šå¸¸å¯ä»¥å–ä¸‹é¢ä¸‰ç§ç±»å‹ï¼š
							<ol>
								<li>
									<b>ArrayBlockingQueue</b>ï¼šåŸºäºæ•°ç»„çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼Œæ­¤é˜Ÿåˆ—åˆ›å»ºæ—¶å¿…é¡»æŒ‡å®šå¤§å°ï¼›
								</li>
								<li>
									<b>LinkedBlockingQueue</b>ï¼šåŸºäºé“¾è¡¨çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼Œå¦‚æœåˆ›å»ºæ—¶æ²¡æœ‰æŒ‡å®šæ­¤é˜Ÿåˆ—å¤§å°ï¼Œåˆ™é»˜è®¤ä¸ºInteger.MAX_VALUEï¼›
								</li>
								<li>
									<b>SynchronousQueue</b>ï¼šè¿™ä¸ªé˜Ÿåˆ—æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒä¸ä¼šä¿å­˜æäº¤çš„ä»»åŠ¡ï¼Œè€Œæ˜¯å°†ç›´æ¥æ–°å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œæ–°æ¥çš„ä»»åŠ¡ã€‚
								</li>
							</ol>
							<p>
								<b>ä»»åŠ¡æ‹’ç»ç­–ç•¥:</b>
							</p>
							<p>å½“çº¿ç¨‹æ± çš„ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—å·²æ»¡å¹¶ä¸”çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›®è¾¾åˆ°maximumPoolSizeï¼Œå¦‚æœè¿˜æœ‰ä»»åŠ¡åˆ°æ¥å°±ä¼šé‡‡å–ä»»åŠ¡æ‹’ç»ç­–ç•¥ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹å››ç§ç­–ç•¥ï¼š</p>
							<pre class="brush: java;">
ThreadPoolExecutor.AbortPolicy: ä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡ºRejectedExecutionExceptionå¼‚å¸¸ã€‚
ThreadPoolExecutor.DiscardPolicy: ä¹Ÿæ˜¯ä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ã€‚
ThreadPoolExecutor.DiscardOldestPolicy: ä¸¢å¼ƒé˜Ÿåˆ—æœ€å‰é¢çš„ä»»åŠ¡ï¼Œç„¶åé‡æ–°å°è¯•æ‰§è¡Œä»»åŠ¡ï¼ˆé‡å¤æ­¤è¿‡ç¨‹ï¼‰
ThreadPoolExecutor.CallerRunsPolicy: ç”±è°ƒç”¨çº¿ç¨‹å¤„ç†è¯¥ä»»åŠ¡ 
</pre>
							<p>
								<b>çº¿ç¨‹æ± çš„å…³é—­:</b>
							</p>
							<p>ThreadPoolExecutor æä¾›äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œç”¨äºçº¿ç¨‹æ± çš„å…³é—­ï¼Œåˆ†åˆ«æ˜¯ shutdown() å’Œ
								shutdownNow()ï¼Œå…¶ä¸­ï¼š</p>
							<ul>
								<li>
									<code>shutdown()</code>
									: ä¸ä¼šç«‹å³ç»ˆæ­¢çº¿ç¨‹æ± ï¼Œè€Œæ˜¯è¦ç­‰æ‰€æœ‰ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡éƒ½æ‰§è¡Œå®Œåæ‰ç»ˆæ­¢ï¼Œä½†å†ä¹Ÿä¸ä¼šæ¥å—æ–°çš„ä»»åŠ¡
								</li>
								<li>
									<code>shutdownNow()</code>
									: ç«‹å³ç»ˆæ­¢çº¿ç¨‹æ± ï¼Œå¹¶å°è¯•æ‰“æ–­æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶ä¸”æ¸…ç©ºä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—ï¼Œè¿”å›å°šæœªæ‰§è¡Œçš„ä»»åŠ¡
								</li>
							</ul>
							<p>
								<b>çº¿ç¨‹æ± å®¹é‡çš„åŠ¨æ€è°ƒæ•´:</b>
							</p>
							<p>ThreadPoolExecutor æä¾›äº†åŠ¨æ€è°ƒæ•´çº¿ç¨‹æ± å®¹é‡å¤§å°çš„æ–¹æ³•ï¼šsetCorePoolSize() å’Œ
								setMaximumPoolSize()</p>
							<ul>
								<li>
									<code>setCorePoolSize()</code>
									: è®¾ç½®æ ¸å¿ƒæ± å¤§å°
								</li>
								<li>
									<code>setMaximumPoolSize()</code>
									: è®¾ç½®çº¿ç¨‹æ± æœ€å¤§èƒ½åˆ›å»ºçš„çº¿ç¨‹æ•°ç›®å¤§å°
								</li>
							</ul>
						</div>

						<a id="java-thread-pool-executors" class="offset"></a>
						<div class="sub-item">
							<h5 class="text-primary">JDK çš„å‡ ç§å¸¸ç”¨çº¿ç¨‹æ± :</h5>
							<ul>
								<li>
									<b>newCachedThreadPool</b> --
									åˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± é•¿åº¦è¶…è¿‡å¤„ç†éœ€è¦ï¼Œå¯çµæ´»å›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œè‹¥æ— å¯å›æ”¶ï¼Œåˆ™æ–°å»ºçº¿ç¨‹ã€‚
									<pre class="brush: java;">
ExecutorService cachedThreadPool = Executors.newCachedThreadPool();
for (int i = 0; i < 10; i++) {
	final int index = i;
	try {
		Thread.sleep(300);
	} catch (InterruptedException e) {
		e.printStackTrace();
	}
	cachedThreadPool.execute(new Runnable() {
		@Override
		public void run() {
			// æ¯æ¬¡çº¿ç¨‹idéƒ½ç›¸åŒ,å½“æ‰§è¡Œç¬¬äºŒä¸ªä»»åŠ¡æ—¶ç¬¬ä¸€ä¸ªä»»åŠ¡å·²ç»å®Œæˆ,ä¼šå¤ç”¨æ‰§è¡Œç¬¬ä¸€ä¸ªä»»åŠ¡çš„çº¿ç¨‹,è€Œä¸ç”¨æ¯æ¬¡æ–°å»ºçº¿ç¨‹ã€‚
			System.out.println("ç´¢å¼•:" + index + "çº¿ç¨‹ID:" + Thread.currentThread().getId());
		}
	});
}
// æ‰§è¡Œå®Œåå…³é—­, è¿™é‡Œçš„ä»£ç ä¼šå…ˆæ‰§è¡Œï¼Œä½†æ˜¯å…³é—­æ“ä½œè¦é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹æ‰§è¡Œå®Œæ‰ä¼šé€€å‡º
cachedThreadPool.shutdown();
</pre>
								</li>
								<li>
									<b>newFixedThreadPool</b> -- åˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œå¯æ§åˆ¶çº¿ç¨‹æœ€å¤§å¹¶å‘æ•°ï¼Œè¶…å‡ºçš„çº¿ç¨‹ä¼šåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚
									<pre class="brush: java;">
ExecutorService fixedThreadPool = Executors.newFixedThreadPool(3);
for (int i = 0; i < 10; i++) {
	final int index = i;
	fixedThreadPool.execute(new Runnable() {

		@Override
		public void run() {
			try {
				// å› ä¸ºçº¿ç¨‹æ± å¤§å°ä¸º3ï¼Œæ¯ä¸ªä»»åŠ¡è¾“å‡ºindexåsleep 1ç§’ï¼Œæ‰€ä»¥æ¯ä¸¤ç§’æ‰“å°3ä¸ªæ•°å­—ã€‚
				System.out.println("ç´¢å¼•:" + index + "çº¿ç¨‹ID:" + Thread.currentThread().getId());
				Thread.sleep(1000);
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		}
	});
}
// æ‰§è¡Œå®Œåå…³é—­, è¿™é‡Œçš„ä»£ç ä¼šå…ˆæ‰§è¡Œï¼Œä½†æ˜¯å…³é—­æ“ä½œè¦é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹æ‰§è¡Œå®Œæ‰ä¼šé€€å‡º
fixedThreadPool.shutdown();
</pre>
								</li>
								<li>
									<b>newScheduledThreadPool</b> -- åˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œæ”¯æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œã€‚
									<pre class="brush: java;">
ScheduledExecutorService scheduledThreadPool = Executors.newScheduledThreadPool(5);
// å»¶è¿Ÿ3ç§’æ‰§è¡Œ,
scheduledThreadPool.schedule(new Runnable() {

	@Override
	public void run() {
		System.out.println("çº¿ç¨‹ID:" + Thread.currentThread().getId());
	}
}, 3, TimeUnit.SECONDS);

// å»¶è¿Ÿ1ç§’åæ¯300æ¯«ç§’æ‰§è¡Œä¸€æ¬¡
scheduledThreadPool.scheduleAtFixedRate(new Runnable() {

	@Override
	public void run() {
		System.out.println("çº¿ç¨‹ID:" + Thread.currentThread().getId());
	}
}, 1, 300, TimeUnit.MILLISECONDS);
</pre>
								</li>
								<li>
									<b>newSingleThreadExecutor</b> --
									åˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹åŒ–çš„çº¿ç¨‹æ± ï¼Œå®ƒåªä¼šç”¨å”¯ä¸€çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œä¿è¯æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§æŒ‡å®šé¡ºåº(FIFO, LIFO, ä¼˜å…ˆçº§)æ‰§è¡Œã€‚
									<pre class="brush: java;">
ExecutorService singleThreadExecutor = Executors.newSingleThreadExecutor();
for (int i = 0; i < 10; i++) {
	final int index = i;
	singleThreadExecutor.execute(new Runnable() {

		@Override
		public void run() {
			try {
				System.out.println("ç´¢å¼•:" + index + "çº¿ç¨‹ID:" + Thread.currentThread().getId());
				Thread.sleep(1000);
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
		}
	});
}
// æ‰§è¡Œå®Œåå…³é—­, è¿™é‡Œçš„ä»£ç ä¼šå…ˆæ‰§è¡Œï¼Œä½†æ˜¯å…³é—­æ“ä½œè¦é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹æ‰§è¡Œå®Œæ‰ä¼šé€€å‡º
singleThreadExecutor.shutdown();
</pre>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-memory"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">å†…å­˜ç®¡ç†</h3>
					</div>
					<div class="panel-body">
						<div class="sub-item">
							<h5 class="text-primary">Java è¿è¡Œæ—¶å†…å­˜åŒº</h5>
							<p>Java è™šæ‹Ÿæœºåœ¨æ‰§è¡Œ Java ç¨‹åºçš„è¿‡ç¨‹ä¸­ä¼šæŠŠå®ƒæ‰€ç®¡ç†çš„å†…å­˜åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªä¸åŒçš„æ•°æ®åŒºåŸŸã€‚è¿™äº›åŒºåŸŸéƒ½æœ‰å„è‡ªçš„ç”¨é€”ï¼Œä»¥åŠåˆ›å»ºå’Œé”€æ¯çš„æ—¶é—´ï¼Œæœ‰çš„åŒºåŸŸéšç€è™šæ‹Ÿæœºè¿›ç¨‹çš„å¯åŠ¨è€Œå­˜åœ¨ï¼Œæœ‰äº›åŒºåŸŸåˆ™æ˜¯ä¾èµ–ç”¨æˆ·çº¿ç¨‹çš„å¯åŠ¨å’Œç»“æŸè€Œå»ºç«‹å’Œé”€æ¯ã€‚æ ¹æ®ã€ŠJava è™šæ‹Ÿæœºè§„èŒƒï¼ˆç¬¬2ç‰ˆï¼‰ã€‹çš„è§„
								å®šï¼ŒJava è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜å°†ä¼šåŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªè¿è¡Œæ—¶æ•°æ®åŒºåŸŸï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
							<p class="100%">
								<img src="images/java-memory.gif" class="center-block">
							</p>
							<p>
								<b>ç¨‹åºè®¡æ•°å™¨</b>
							</p>
							<p>ç¨‹åºè®¡æ•°å™¨ï¼Œå¯ä»¥çœ‹åšæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚åœ¨è™šæ‹Ÿæœºçš„æ¦‚å¿µæ¨¡å‹é‡Œï¼Œå­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œå°±æ˜¯é€šè¿‡æ”¹å˜ç¨‹åºè®¡æ•°å™¨çš„å€¼æ¥é€‰æ‹©ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½éƒ½è¦ä¾èµ–è¿™ä¸ªè®¡æ•°å™¨æ¥å®Œæˆã€‚</p>
							<p>å¤šçº¿ç¨‹ä¸­ï¼Œä¸ºäº†è®©çº¿ç¨‹åˆ‡æ¢åèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®ï¼Œæ¯æ¡çº¿ç¨‹éƒ½éœ€è¦æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå„æ¡çº¿ç¨‹ä¹‹é—´äº’ä¸å½±å“ã€ç‹¬ç«‹å­˜å‚¨ï¼Œå› æ­¤è¿™å—å†…å­˜æ˜¯
								çº¿ç¨‹ç§æœ‰ çš„ã€‚</p>
							<p>
								å½“çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ª Java æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨è®°å½•çš„æ˜¯åœ¨æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼›å½“æ‰§è¡Œçš„æ˜¯ Native æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨å€¼ä¸ºç©ºã€‚
							</p>
							<p>æ­¤å†…å­˜åŒºåŸŸæ˜¯å”¯ä¸€ä¸€ä¸ªæ²¡æœ‰è§„å®šä»»ä½• OutOfMemoryError æƒ…å†µçš„åŒºåŸŸ ã€‚</p>

							<p>
								<b>Java è™šæ‹Ÿæœºæ ˆ</b>
							</p>
							<p>Java è™šæ‹Ÿæœºæ ˆä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒã€‚è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯ Java æ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„åŒæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾è¡¨ã€æ–¹æ³•å‡ºå£ä¿¡æ¯ç­‰ã€‚æ¯ä¸€ä¸ªæ–¹æ³•ä»è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p>
							<p>å±€éƒ¨å˜é‡è¡¨ä¸­å­˜æ”¾äº†ç¼–è¯‘å™¨å¯çŸ¥çš„å„ç§åŸºæœ¬æ•°æ®ç±»å‹(booleanã€byteã€charã€shortã€intã€floatã€longã€double)ã€å¯¹è±¡å¼•ç”¨å’ŒreturnAddressç±»å‹(æŒ‡å‘äº†ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€)ã€‚</p>
							<p>å¦‚æœæ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ï¼Œå°±ä¼šæŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</p>
							<p>
								<b>æœ¬åœ°æ–¹æ³•æ ˆ</b>
							</p>
							<p>æœ¬åœ°æ–¹æ³•æ ˆä¸è™šæ‹Ÿæœºçš„ä½œç”¨ç›¸ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºè™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡Œçš„ Java æ–¹æ³•æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„ Native æ–¹æ³•æœåŠ¡ã€‚æœ‰çš„è™šæ‹Ÿæœºç›´æ¥æŠŠæœ¬åœ°æ–¹æ³•æ ˆå’Œè™šæ‹Ÿæœºæ ˆåˆäºŒä¸ºä¸€ã€‚</p>
							<p>ä¼šæŠ›å‡º stackOverflowError å’Œ OutOfMemoryErrorå¼‚å¸¸ã€‚</p>
							<p>
								<b>Java å †</b>
							</p>
							<p>Java å †æ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºï¼Œæ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ä»¥åŠæ•°ç»„ï¼Œç›®å‰ç”±äºç¼–è¯‘å™¨çš„ä¼˜åŒ–ï¼Œå¯¹è±¡åœ¨å †ä¸Šåˆ†é…å·²ç»æ²¡æœ‰é‚£ä¹ˆç»å¯¹äº†ã€‚</p>
							<p>Java å †æ˜¯åƒåœ¾æ”¶é›†å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸã€‚ç”±äºç°åœ¨æ”¶é›†å™¨åŸºæœ¬é‡‡ç”¨åˆ†ä»£å›æ”¶ç®—æ³•ï¼Œæ‰€ä»¥ Java å †è¿˜å¯ç»†åˆ†ä¸ºï¼šæ–°ç”Ÿä»£å’Œè€å¹´ä»£ã€‚ä»å†…å­˜åˆ†é…çš„è§’åº¦æ¥çœ‹ï¼Œçº¿ç¨‹å…±äº«çš„Javaå †ä¸­å¯èƒ½åˆ’åˆ†å‡ºå¤šä¸ªçº¿ç¨‹ç§æœ‰çš„åˆ†é…ç¼“å†²åŒº(TLAB)ã€‚</p>
							<p>Java å †å¯ä»¥å¤„äºç‰©ç†ä¸Šä¸è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œåªè¦é€»è¾‘ä¸Šè¿ç»­çš„å³å¯ã€‚åœ¨å®ç°ä¸Šï¼Œæ—¢å¯ä»¥å®ç°å›ºå®šå¤§å°çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æ‰©å±•çš„ã€‚</p>
							<p>å¦‚æœå †ä¸­æ²¡æœ‰å†…å­˜å®Œæˆå®ä¾‹åˆ†é…ï¼Œå¹¶ä¸”å †ä¹Ÿæ— æ³•å®Œæˆæ‰©å±•æ—¶ï¼Œå°†ä¼šæŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</p>
							<p>
								<b>æ–¹æ³•åŒº</b>
							</p>
							<p>æ–¹æ³•åŒºæ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œå®ƒç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ® ã€‚</p>
							<p>ç›¸å¯¹è€Œè¨€ï¼Œåƒåœ¾æ”¶é›†è¡Œä¸ºåœ¨è¿™ä¸ªåŒºåŸŸæ¯”è¾ƒå°‘å‡ºç°ï¼Œä½†å¹¶éæ•°æ®è¿›äº†æ–¹æ³•åŒºå°±æ°¸ä¹…çš„å­˜åœ¨äº†ï¼Œè¿™ä¸ªåŒºåŸŸçš„å†…å­˜å›æ”¶ç›®æ ‡ä¸»è¦æ˜¯é’ˆå¯¹å¸¸é‡æ± çš„å›æ”¶å’Œå¯¹ç±»å‹çš„å¸è½½ï¼Œ</p>
							<p>å½“æ–¹æ³•åŒºæ— æ³•æ»¡è¶³å†…å­˜åˆ†é…éœ€è¦æ—¶ï¼Œå°†æŠ›å‡º OutOfMemoryErro rå¼‚å¸¸ã€‚</p>
							<p><b>è¿è¡Œæ—¶å¸¸é‡æ± </b>ï¼šæ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚</p>
							<p>JDK1.7 åŠä¹‹åç‰ˆæœ¬çš„ JVM å·²ç»å°†è¿è¡Œæ—¶å¸¸é‡æ± ä»æ–¹æ³•åŒºä¸­ç§»äº†å‡ºæ¥ï¼Œåœ¨ Java å †ï¼ˆHeapï¼‰ä¸­å¼€è¾Ÿäº†ä¸€å—åŒºåŸŸå­˜æ”¾è¿è¡Œæ—¶å¸¸é‡æ± ã€‚</p>
							<p>
								<b>ç›´æ¥å†…å­˜</b>
							</p>
							<p>ç›´æ¥å†…å­˜ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œåœ¨ NIO ç±»ä¸­å¼•å…¥ä¸€ç§åŸºäºé€šé“ä¸ç¼“å†²åŒºçš„ IO æ–¹å¼ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ Native å‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨ Java å †ä¸­çš„ DirectByteBuffer å¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚</p>
							<p>ç›´æ¥å†…å­˜çš„åˆ†é…ä¸ä¼šå—åˆ° Java å †å¤§å°çš„é™åˆ¶ï¼Œä½†æ˜¯ä¼šå—åˆ°æœ¬æœºå†…å­˜å¤§å°çš„é™åˆ¶ï¼Œæ‰€æœ‰ä¹Ÿå¯èƒ½ä¼šæŠ› OutOfMemoryError å¼‚å¸¸ã€‚</p>

						</div>

						<div class="sub-item">
							<h5 class="text-primary">å†…å­˜æº¢å‡º</h5>
							<p>åœ¨JVMç”³è¯·å†…å­˜çš„è¿‡ç¨‹ä¸­ï¼Œä¼šé‡åˆ°æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿå†…å­˜ï¼Œä»è€Œå¯¼è‡´å†…å­˜æº¢å‡ºçš„æƒ…å†µã€‚ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p>
							<ul>
								<li>
									è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º
									<ul>
										<li>
											<p>StackOverflowError: çº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æœ€å¤§æ·±åº¦(å¾ªç¯é€’å½’)</p>
											<p>
												VM å‚æ•°:
												<code>-Xss128k</code>
											</p>
											<pre class="brush: java;">
public class JavaVMStackSOF {
	private int stackLength = 1;

	public void stackLeak() {
		stackLength++;
		stackLeak();
	}

	public static void main(String[] args) throws Throwable {
		JavaVMStackSOF oom = new JavaVMStackSOF();
		try {
			oom.stackLeak();
		} catch (Throwable e) {
			System.out.println("stack length:" + oom.stackLength);
			throw e;
		}
	}
}
</pre>
										</li>
										<li>
											<p>
												OutOfMemoryError: è™šæ‹Ÿæœºåœ¨æ‰©å±•æ ˆæ˜¯æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ï¼Œä¸€èˆ¬å¯ä»¥é€šè¿‡ä¸åœåœ°åˆ›å»ºçº¿ç¨‹å¼•èµ·æ­¤ç§æƒ…å†µ,
												<span class="text-danger">æ­¤ä»£ç æ‰§è¡Œæ—¶æœ‰å¾ˆå¤§ä»¤æ“ä½œç³»ç»Ÿå¡æ­»çš„é£é™©ï¼Œå¯èƒ½è¦å¼ºåˆ¶å…³æœºã€‚</span>
											</p>
											<p>
												VM å‚æ•°:
												<code>-Xss2M</code>
											</p>
											<pre class="brush: java;">
public class JavaVMStackOOM {
	private void dontStop() {
		while (true) {
		}
	}

	public void stackLeakByThread() {
		while (true) {
			Thread thread = new Thread(new Runnable() {
				@Override
				public void run() {
					dontStop();
				}
			});
			thread.start();
		}
	}

	public static void main(String[] args) throws Throwable {
		JavaVMStackOOM oom = new JavaVMStackOOM();
		// æ­¤ä»£ç æ‰§è¡Œæ—¶æœ‰å¾ˆå¤§ä»¤æ“ä½œç³»ç»Ÿå¡æ­»çš„é£é™©
		// oom.stackLeakByThread();
	}
}
</pre>
										</li>
									</ul>
								</li>
								<li>
									<p>Javaå †æº¢å‡º: å½“åˆ›å»ºå¤§é‡å¯¹è±¡å¹¶ä¸”å¯¹è±¡ç”Ÿå‘½å‘¨æœŸéƒ½å¾ˆé•¿çš„æƒ…å†µä¸‹ï¼Œä¼šå¼•å‘OutOfMemoryErrorã€‚</p>
									<p>Javaå †å­˜æ”¾çš„æ˜¯å¯¹è±¡å®ä¾‹ï¼Œå› æ­¤åªè¦ä¸æ–­å»ºç«‹å¯¹è±¡ï¼Œå¹¶ä¸”ä¿è¯GC
										Rootsåˆ°å¯¹è±¡ä¹‹é—´æœ‰å¯è¾¾è·¯å¾„å³å¯äº§ç”ŸOOMå¼‚å¸¸ã€‚</p>
									<p>
										VM å‚æ•°:
										<code>-Xms20m -Xmx20m -XX:+HeapDumpOnOutOfMemoryError</code>
										(é™åˆ¶Javaå †å¤§å°ä¸º20Mï¼Œä¸å¯æ‰©å±•, å‚æ•°
										<code>-XX:+HeapDumpOnOutOfMemoryError</code>
										è®©è™šæ‹Ÿæœºåœ¨å‡ºç°OOMå¼‚å¸¸çš„æ—¶å€™Dumpå‡ºå†…å­˜æ˜ åƒä»¥ä¾¿åˆ†æ(ç”Ÿæˆ.hprofæ–‡ä»¶ï¼Œå¯ä½¿ç”¨ MAT å·¥å…·æŸ¥çœ‹))
									</p>
									<pre class="brush: java;">
public class HeapOOM {
	public static void main(String[] args) {
		List&lt;Object> list = new ArrayList&lt;Object>();

		while (true) {
			list.add(new Object());
		}
	}
}
</pre>
								</li>
								<li>
									<p>è¿è¡Œæ—¶å¸¸é‡åŒºæº¢å‡ºï¼šOutOfMemoryError:PermGen
										spaceï¼Œè¿™é‡Œä¸€ä¸ªå…¸å‹çš„ä¾‹å­å°±æ˜¯Stringçš„internæ–¹æ³•ï¼Œå½“å¤§é‡å­—ç¬¦ä¸²ä½¿ç”¨internæ—¶ï¼Œä¼šè§¦å‘æ­¤å†…å­˜æº¢å‡º</p>
									<p>
										VM å‚æ•°:
										<code>-XX:PermSize=10M -XX:MaxPermSize=10M</code>
										(-XX:PermSizeå’Œ-XX:MaxPermSizeé™åˆ¶æ–¹æ³•åŒºå¤§å°å³å¯é™åˆ¶å¸¸é‡æ± å®¹é‡, <span
											class="text-danger">ä½†Java8 ç§»é™¤äº†å¯¹è¿™ä¸¤ä¸ªå‚æ•°çš„æ”¯æŒ, æ­¤å®ä¾‹æ— æ³•å¾—åˆ°æƒ³è¦çš„ç»“æœ</span>)
									</p>
									<pre class="brush: java;">
public class RuntimeConstantPoolOOM {
	public static void main(String[] args) {
		// ä½¿ç”¨Listä¿æŒç€å¸¸é‡æ± å¼•ç”¨ï¼Œå‹åˆ¶Full GCå›æ”¶å¸¸é‡æ± è¡Œä¸º
		List&lt;String> list = new ArrayList&lt;String>();
		// 10Mçš„PermSizeåœ¨integerèŒƒå›´å†…è¶³å¤Ÿäº§ç”ŸOOMäº†
		int i = 0;
		while (true) {
			list.add(String.valueOf(i++).intern());
		}
	}
}
</pre>
								</li>
								<li>
									<p>æ–¹æ³•åŒºæº¢å‡ºï¼šæ–¹æ³•åŒºå­˜æ”¾Classç­‰å…ƒæ•°æ®ä¿¡æ¯ï¼Œå¦‚æœäº§ç”Ÿå¤§é‡çš„ç±»(ä½¿ç”¨cglib)ï¼Œé‚£ä¹ˆå°±ä¼šå¼•å‘æ­¤å†…å­˜æº¢å‡ºï¼ŒOutOfMemoryError:PermGen
										spaceï¼Œåœ¨ä½¿ç”¨Hibernateç­‰æ¡†æ¶æ—¶ä¼šå®¹æ˜“å¼•èµ·æ­¤ç§æƒ…å†µã€‚</p>
									<p>
										VM å‚æ•°:
										<code> -XX:PermSize=10M -XX:MaxPermSize=10M</code>
										(<span class="text-danger">Java8
											ç§»é™¤äº†å¯¹è¿™ä¸¤ä¸ªå‚æ•°çš„æ”¯æŒ,æ­¤å®ä¾‹æ— æ³•å¾—åˆ°æƒ³è¦çš„ç»“æœ</span>)
									</p>
									<pre class="brush: java;">
public class RuntimeConstantPoolOOM {
	public static void main(String[] args) {
		// ä½¿ç”¨Listä¿æŒç€å¸¸é‡æ± å¼•ç”¨ï¼Œå‹åˆ¶Full GCå›æ”¶å¸¸é‡æ± è¡Œä¸º
		List&lt;String> list = new ArrayList&lt;String>();
		// 10Mçš„PermSizeåœ¨integerèŒƒå›´å†…è¶³å¤Ÿäº§ç”ŸOOMäº†
		int i = 0;
		while (true) {
			list.add(String.valueOf(i++).intern());
		}
	}
}
</pre>
								</li>
								<li>
									<p>æœ¬æœºç›´æ¥å†…å­˜æº¢å‡º:
										DirectByteBufferä¹Ÿä¼šæŠ›OOMå¼‚å¸¸ï¼Œä½†æŠ›å‡ºå¼‚å¸¸æ—¶å®é™…ä¸Šå¹¶æ²¡æœ‰çœŸæ­£å‘æ“ä½œç³»ç»Ÿç”³è¯·åˆ†é…å†…å­˜ï¼Œè€Œæ˜¯é€šè¿‡è®¡ç®—å¾—çŸ¥æ— æ³•åˆ†é…æ—¢ä¼šæŠ›å‡º
									</p>
									<p>
										VM å‚æ•°:
										<code>-Xmx20M -XX:MaxDirectMemorySize=10M</code>
										(<span class="text-danger">æ­¤å®ä¾‹æ— æ³•è¿è¡Œ</span>)
									</p>
									<pre class="brush: java;">
public class DirectMemoryOOM {
	private static final int _1MB = 1024 * 1024;
	
	public static void main(String[] args) throws Exception {
		Field unsafeField = Unsafe.class.getDeclaredFields()[0];
		unsafeField.setAccessible(true);
		Unsafe unsafe = (Unsafe) unsafeField.get(null);
		while (true) {
			unsafe.allocateMemory(_1MB);
		}
	}
}
</pre>
								</li>
							</ul>
						</div>

						<div class="sub-item">
							<h5 class="text-primary">Eclipse MAT å·¥å…·</h5>
							<p>Eclipse Memory Analyzerï¼ˆMATï¼‰ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„ JAVA
								å †è½¬å‚¨æ–‡ä»¶åˆ†æå·¥å…·ï¼Œå¯ä»¥ç”¨äºå‘ç°å†…å­˜æ¼æ´å’Œå‡å°‘å†…å­˜æ¶ˆè€—ã€‚</p>

						</div>

						<div class="sub-item">
							<h5 class="text-primary">VisualVM å·¥å…·</h5>
							<p>VisualVM æ˜¯ä¸€æ¬¾å…è´¹çš„\é›†æˆäº†å¤šä¸ªJDK å‘½ä»¤è¡Œå·¥å…·çš„å¯è§†åŒ–å·¥å…·ï¼Œå®ƒèƒ½ä¸ºæ‚¨æä¾›å¼ºå¤§çš„åˆ†æèƒ½åŠ›ï¼Œå¯¹ Java
								åº”ç”¨ç¨‹åºåšæ€§èƒ½åˆ†æå’Œè°ƒä¼˜ã€‚è¿™äº›åŠŸèƒ½åŒ…æ‹¬ç”Ÿæˆå’Œåˆ†ææµ·é‡æ•°æ®ã€è·Ÿè¸ªå†…å­˜æ³„æ¼ã€ç›‘æ§åƒåœ¾å›æ”¶å™¨ã€æ‰§è¡Œå†…å­˜å’Œ CPU åˆ†æï¼ŒåŒæ—¶å®ƒè¿˜æ”¯æŒåœ¨
								MBeans ä¸Šè¿›è¡Œæµè§ˆå’Œæ“ä½œã€‚</p>
							<p>
								VisualVM æ˜¯ JDK è‡ªå¸¦çš„å·¥å…·ï¼Œä½äº
								<code>$JAVA_HOME/bin</code>
								ç›®å½•ä¸‹,å‘½ä»¤è¡Œä¸‹ç›´æ¥è¿è¡Œ
								<code>$ jvisualvm</code>
								å°±å¯å¯åŠ¨ï¼ŒVisual GC æ’ä»¶è¦æ‰‹åŠ¨å®‰è£…ã€‚
							</p>
							<p>åœ¨å†…å­˜åˆ†æä¸Šï¼ŒJava VisualVMçš„æœ€å¤§å¥½å¤„æ˜¯å¯é€šè¿‡å®‰è£…Visual GCæ’ä»¶æ¥åˆ†æGCï¼ˆGabage
								Collectionï¼‰è¶‹åŠ¿ã€å†…å­˜æ¶ˆè€—è¯¦ç»†çŠ¶å†µã€‚</p>
							<p>
								<img src="images/java-memory-gc.png"
									class="center-block img-responsive">
							</p>
							<p>
								<b>Visual GC æ’ä»¶ä½¿ç”¨: (ä½¿ç”¨ä»£ç æµ‹è¯•,ä¸‹é¢çš„ä»£ç æœ€ç»ˆä¼šå¼•å‘ OOMå¼‚å¸¸ã€‚ VM å‚æ•°: <code>-Xms20m
										-Xmx20m</code>)
								</b>
							</p>
							<pre class="brush: java;">
public class HeapOOM {
	static class Test {}
	
	static List&lt;Object> list = new ArrayList&lt;Object>();
	
	public static void main(String[] args) {
		while (true) {
			try {
				Thread.sleep(1);
			} catch (InterruptedException e) {
				e.printStackTrace();
			}
			list.add(new Test());
		}
	}
}
</pre>
							<p>æ ¹æ®å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸé•¿çŸ­ï¼ŒæŠŠå †åˆ†ä¸º3ä¸ªä»£ï¼šYoung(å¹´è½»ä»£)ï¼ŒOld(å¹´è€ä»£)å’Œ
								Permanent(æŒä¹…ä»£)ï¼Œæ ¹æ®ä¸åŒä»£çš„ç‰¹ç‚¹é‡‡ç”¨ä¸åŒçš„æ”¶é›†ç®—æ³•ã€‚</p>
							<ul>
								<li>
									<b>Young(å¹´è½»ä»£)</b> -- å¦‚å›¾æ‰€ç¤º(æœ€å³ä¾§ä¸‰ä¸ªæ¡†)å¹´è½»ä»£åˆ†ä¸‰ä¸ªåŒºã€‚ä¸€ä¸ª Eden åŒºï¼Œä¸¤ä¸ª Survivor
									åŒº(S0 å’Œ S1)ã€‚å¤§éƒ¨åˆ†å¯¹è±¡åœ¨ Eden åŒºä¸­ç”Ÿæˆã€‚å½“ Eden åŒºæ»¡æ—¶ï¼Œæ–°å¯¹è±¡ç”Ÿæˆï¼Œå¹¶ä¸”åœ¨Edenç”³è¯·ç©ºé—´å¤±è´¥æ—¶ï¼Œå¼•å‘
									GC æ“ä½œ, è¿˜å­˜æ´»çš„å¯¹è±¡å°†è¢«å¤åˆ¶åˆ° Survivor åŒºï¼ˆä¸¤ä¸ªä¸­çš„ä¸€ä¸ªï¼‰ï¼Œå½“è¿™ä¸ª Survivor
									åŒºæ»¡æ—¶ï¼Œæ­¤åŒºçš„å­˜æ´»å¯¹è±¡å°†è¢«å¤åˆ¶åˆ°å¦å¤–ä¸€ä¸ª Survivor åŒºï¼Œå½“è¿™ä¸ª Survivor å»ä¹Ÿæ»¡äº†çš„æ—¶å€™ï¼Œä»ç¬¬ä¸€ä¸ª
									Survivor åŒºå¤åˆ¶è¿‡æ¥çš„å¹¶ä¸”æ­¤æ—¶è¿˜å­˜æ´»çš„å¯¹è±¡ï¼Œå°†è¢«å¤åˆ° Old(å¹´è€åŒº(å¦‚å›¾ä¸­é—´å—))ã€‚
								</li>
								<li>
									<b>Tenured / Old(å¹´è€ä»£)</b> --
									å¹´è€ä»£å­˜æ”¾ä»å¹´è½»ä»£å¤åˆ¶è¿‡æ¥çš„å­˜æ´»å¯¹è±¡ã€‚ä¸€èˆ¬æ¥è¯´å¹´è€ä»£å­˜æ”¾çš„éƒ½æ˜¯ç”Ÿå‘½æœŸè¾ƒé•¿çš„å¯¹è±¡ã€‚
								</li>
								<li>
									<b>Permanent(æŒä¹…ä»£)</b> --
									æŒä¹…ä»£ç”¨äºå­˜æ”¾é™æ€æ–‡ä»¶ï¼Œå¦‚ä»ŠJavaç±»ã€æ–¹æ³•ç­‰ã€‚æŒä¹…ä»£å¯¹åƒåœ¾å›æ”¶æ²¡æœ‰æ˜¾è‘—å½±å“ï¼Œä½†æ˜¯æœ‰äº›åº”ç”¨å¯èƒ½åŠ¨æ€ç”Ÿæˆæˆ–è€…è°ƒç”¨ä¸€äº›classï¼Œä¾‹å¦‚Hibernateç­‰ï¼Œåœ¨è¿™ç§æ—¶å€™éœ€è¦è®¾ç½®ä¸€ä¸ªæ¯”è¾ƒå¤§çš„æŒä¹…ä»£ç©ºé—´æ¥å­˜æ”¾è¿™äº›è¿è¡Œè¿‡ç¨‹ä¸­æ–°å¢çš„ç±»ã€‚æŒä¹…ä»£å¤§å°é€šè¿‡
									VM å‚æ•°:
									<code>-XX:MaxPermSize=SIZE</code>
									è¿›è¡Œè®¾ç½®ã€‚
								</li>
							</ul>
							<p>GC æ“ä½œåˆ†ç±»:</p>
							<ul>
								<li>
									<b>Minor GC</b> -- ä»å¹´è½»ä»£ç©ºé—´ï¼ˆåŒ…æ‹¬ Eden å’Œ Survivor åŒºåŸŸï¼‰å›æ”¶å†…å­˜è¢«ç§°ä¸º Minor
									GCã€‚
								</li>
								<li>
									<b>Major GC</b> -- æ¸…ç†æ°¸ä¹…ä»£ã€‚è®¸å¤š Major GC æ˜¯ç”± Minor GC
									è§¦å‘çš„ï¼Œæ‰€ä»¥å¾ˆå¤šæƒ…å†µä¸‹å°†è¿™ä¸¤ç§ GC åˆ†ç¦»æ˜¯ä¸å¤ªå¯èƒ½çš„ã€‚
								</li>
								<li>
									<b>FULL GC</b> -- æ˜¯æ¸…ç†æ•´ä¸ªå †ç©ºé—´â€”åŒ…æ‹¬å¹´è½»ä»£å’Œæ°¸ä¹…ä»£ã€‚å¼•å‘ FULL GC ä¸€èˆ¬æœ‰å¦‚ä¸‹å‡ ç§æƒ…å†µ:
									<ul>
										<li>ä¸Šä¸€æ¬¡ GC ä¹‹å Heap çš„å„åŸŸåˆ†é…ç­–ç•¥åŠ¨æ€å˜åŒ–</li>
										<li>System.gc()è¢«æ˜¾ç¤ºè°ƒç”¨</li>
										<li>Perm(æŒä¹…ä»£) åŸŸè¢«å†™æ»¡</li>
										<li>Tenured / Old(å¹´è€ä»£) è¢«å†™æ»¡</li>
									</ul>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-encrypt"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">åŠ å¯†ä¸è§£å¯†</h3>
					</div>
					<div class="panel-body">
						<div class="sub-item">
							<p><b>åŠ å¯†</b> æ˜¯ä»¥æŸç§ç‰¹æ®Šçš„ç®—æ³•æ”¹å˜åŸæœ‰çš„ä¿¡æ¯æ•°æ®ï¼Œä½¿å¾—æœªæˆæƒçš„ç”¨æˆ·å³ä½¿è·å¾—äº†å·²åŠ å¯†çš„ä¿¡æ¯ï¼Œä½†å› ä¸çŸ¥è§£å¯†çš„æ–¹æ³•ï¼Œä»ç„¶æ— æ³•äº†è§£ä¿¡æ¯çš„å†…å®¹ã€‚</p>
							<p>å¤§ä½“ä¸Šåˆ†ä¸º <b>åŒå‘åŠ å¯†</b> å’Œ <b>å•å‘åŠ å¯†</b>ï¼Œè€ŒåŒå‘åŠ å¯†åˆåˆ†ä¸º <b>å¯¹ç§°åŠ å¯†</b> å’Œ <b>éå¯¹ç§°åŠ å¯†</b>ã€‚</p>
							<p><b>å¯¹ç§°åŠ å¯†</b> æ˜¯é‡‡ç”¨å•é’¥å¯†ç ç³»ç»Ÿçš„åŠ å¯†æ–¹æ³•ï¼ŒåŒä¸€ä¸ªå¯†é’¥å¯ä»¥åŒæ—¶ç”¨ä½œä¿¡æ¯çš„åŠ å¯†å’Œè§£å¯†ï¼Œä¹Ÿç§°ä¸ºå•å¯†é’¥åŠ å¯†ã€‚ </p>
							<p><b>éå¯¹ç§°åŠ å¯†</b> éœ€è¦ä¸¤ä¸ªå¯†é’¥ï¼šå…¬å¼€å¯†é’¥ï¼ˆå…¬é’¥ï¼‰å’Œç§æœ‰å¯†é’¥ ï¼ˆç§é’¥ï¼‰ã€‚å…¬é’¥ä¸ç§é’¥æ˜¯ä¸€å¯¹ï¼Œå¦‚æœç”¨å…¬é’¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œåªæœ‰ç”¨å¯¹åº”çš„ç§é’¥æ‰èƒ½è§£å¯†ï¼›å¦‚æœç”¨ç§é’¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œé‚£ä¹ˆåªæœ‰ç”¨å¯¹åº”çš„å…¬é’¥æ‰èƒ½è§£å¯†ã€‚</p>
							<p><b>å•å‘åŠ å¯†</b> åˆç§°ä¸ºä¸å¯é€†åŠ å¯†ç®—æ³•ï¼Œåœ¨åŠ å¯†è¿‡ç¨‹ä¸­ä¸ä½¿ç”¨å¯†é’¥ï¼Œæ˜æ–‡ç”±ç³»ç»ŸåŠ å¯†å¤„ç†æˆå¯†æ–‡ï¼Œå¯†æ–‡æ— æ³•è§£å¯†ã€‚</p>
							<p><b>JAVA å¯†ç æ¶æ„æ ‡å‡†ç®—æ³•åç§°æ–‡æ¡£</b>: <a href="docs/docs-java/technotes/guides/security/StandardNames.html" target="_blank">JDK 8 æ ‡å‡†ç®—æ³•åç§°æ–‡æ¡£</a></p>
                            <p><b>å°èŠ‚å¯¼èˆªï¼š</b></p>
                            <ul>
                                <li><p><a href="#encrypt">åŠ å¯†çš„ä¸€èˆ¬æ­¥éª¤</a></p></li>
                                <li><p><a href="#encrypt_example">å¸¸ç”¨çš„åŠ å¯†å’Œè§£å¯†</a></p></li>
                                <li><p><a href="#encrypt_sign">æ•°å­—ç­¾å</a></p></li>
                                <li><p><a href="#encrypt_pki">PKI ä½“ç³»çš„ä¸€äº›æ¦‚å¿µ</a></p></li>
                                <li><p><a href="#encrypt_cert">ä¸»æµçš„æ•°å­—è¯ä¹¦å’Œç›¸äº’è½¬æ¢</a></p></li>
                                <li><p><a href="#encrypt_util">EncryptUtil å·¥å…·ç±»</a></p></li>
                            </ul>

							<p><b>JAVA æœºå¯†/è§£å¯†/ç­¾åå¸¸ç”¨çš„ç±»å…¶å…³ç³»ï¼š</b></p>
							<pre class="brush: java;">
Key extends Serializable                                     // æ‰€æœ‰å¯†é’¥çš„é¡¶å±‚æ¥å£
 â”œâ”€	SecretKey extends Key, Destroyable                       // å¯¹ç§°å¯†é’¥ï¼Œå®ç°ç±»æ”¹å†™ equals å’Œ hashCode æ–¹æ³•
 â”‚	 â”œâ”€ SecretKeySpec implements KeySpec, SecretKey          // æŒ‡å®šå¯†é’¥ï¼Œæ­¤ç±»æ—¢æ˜¯ Key åˆæ˜¯ KeySpec
 â”‚	 â”œâ”€ KerberosKey implements SecretKey, Destroyable        // å°è£…ä¸€ä¸ªé•¿æœŸç§˜é’¥
 â”‚	 â””â”€ PBEKey                                               // PBE å¯†é’¥
 â”œâ”€	PrivateKey extends Key, Destroyable                      // éå¯¹ç§°åŠ å¯†çš„ç§é’¥ï¼Œæ¥å£ä¸åŒ…å«ä»»ä½•æ–¹æ³•æˆ–å¸¸é‡
 â”‚	 â”œâ”€	RSAPrivateKey extends RSAKey, PrivateKey             // RSA åŠ å¯†ç§é’¥
 â”‚	 â”‚	 â”œâ”€ RSAPrivateCrtKey extends RSAPrivateKey           // RSA CRT åŠ å¯†ç§é’¥ï¼ŒCRT æ˜¯ä¸­å›½ä½™æ•°å®šç†
 â”‚	 â”‚	 â””â”€ RSAMultiPrimePrivateCrtKey extends RSAPrivateKey // å¤šç´ æ•°ä¸“ç”¨ç§é’¥
 â”‚	 â”œâ”€	DSAPrivateKey extends DSAKey, PrivateKey             // DSA åŠ å¯†ç§é’¥
 â”‚	 â”œâ”€	DHPrivateKey extends DHKey, PrivateKey               // DH ç®—æ³•ç§é’¥ï¼Œå¯†é’¥äº¤æ¢ç®—æ³•
 â”‚	 â””â”€	ECPrivateKey extends ECKey, PrivateKey               // EC ç®—æ³•ç§é’¥
 â””â”€	PublicKey extends Key                                    // éå¯¹ç§°åŠ å¯†çš„å…¬é’¥
	 â”œâ”€	RSAPublicKey extends PublicKey                       // RSA åŠ å¯†å…¬é’¥
	 â”œâ”€	DSAPublicKey extends DSAKey, PublicKey               // DSA åŠ å¯†å…¬é’¥
	 â”œâ”€	DHPublicKey extends DHKey, PublicKey                 // DH ç®—æ³•å…¬é’¥ï¼Œå¯†é’¥äº¤æ¢ç®—æ³•
	 â””â”€	ECPublicKey extends ECKey, PublicKey                 // EC ç®—æ³•å…¬é’¥

RSAKey // RSA åŠ å¯†çš„ Key
DSAKey // DSA åŠ å¯†çš„ Key
DHKey  // DH ç®—æ³•çš„ Keyï¼ŒDH ä¸ºå¯†é’¥äº¤æ¢ç®—æ³•
ECKey  // EC ç®—æ³•çš„ Key

KeySpec 										// å¯†é’¥è§„èŒƒï¼Œä½¿ç”¨æŒ‡å®šçš„å¯†ç ç”Ÿæˆç¬¦åˆè§„èŒƒçš„å¯†é’¥
 â”œâ”€	SecretKeySpec implements KeySpec, SecretKey // ç”¨äºç”Ÿæˆå¯¹ç§°åŠ å¯†å’Œä¸å¯é€†åŠ å¯†çš„å¯†é’¥ï¼Œæ­¤ç±»æ—¢æ˜¯ Key åˆæ˜¯ KeySpec
 â”œâ”€	DESKeySpec                                  // DES å¯†é’¥ç”Ÿæˆ
 â”œâ”€	DESedeKeySpec                               // DESede å¯†é’¥ç”Ÿæˆ
 â”œâ”€	RSAPrivateKeySpec                           // RSA ç§é’¥ç”Ÿæˆ
 â”‚	 â”œâ”€	RSAPrivateCrtKeySpec
 â”‚	 â””â”€	RSAMultiPrimePrivateCrtKeySpec
 â”œâ”€	RSAPublicKeySpec                            // RSA å…¬é’¥ç”Ÿæˆ
 â”œâ”€	EncodedKeySpec                              // ç¼–ç è¿‡çš„å…¬é’¥æˆ–ç§é’¥
 â”‚	 â”œâ”€	PKCS8EncodedKeySpec                     // PKCS8 ç¼–ç çš„ç§é’¥å®šä¹‰
 â”‚	 â””â”€	X509EncodedKeySpec                      // X509 ç¼–ç çš„å…¬é’¥å®šä¹‰
 â”œâ”€	DSAPrivateKeySpec                           // DSA ç§é’¥ç”Ÿæˆ
 â”œâ”€	DSAPublicKeySpec                            // DSA å…¬é’¥ç”Ÿæˆ
 â”œâ”€	DHPrivateKeySpec                            // DH ç§é’¥ç”Ÿæˆ
 â”œâ”€	DHPublicKeySpec                             // DH å…¬é’¥ç”Ÿæˆ
 â”œâ”€	ECPrivateKeySpec                            // EC ç§é’¥ç”Ÿæˆ
 â”œâ”€	ECPublicKeySpec                             // EC å…¬é’¥ç”Ÿæˆ
 â””â”€ PBEKeySpec                                  // PBE å¯†é’¥ç”Ÿæˆ

Key // å¯†é’¥çš„é¡¶çº§æ¥å£
KeyPair // å…¬é’¥/ç§é’¥å¯¹ï¼ŒPublicKey å’Œ PrivateKey åŒ…è£…

KeyGenerator // ç”¨äºåˆ›å»ºå¯†é’¥ï¼Œæ”¯æŒï¼šAES, DES, DESede, RC4(ARCFOUR), Blowfish, HmacSHA256, HmacSHA512...
SecretKeyFactory // ç”¨äºåˆ›å»ºå¯†é’¥(æ”¯æŒ KeySpec)ï¼Œæ”¯æŒï¼šAES, DES, DESede, RC4(ARCFOUR)...

KeyPairGenerator // ç”¨äºåˆ›å»ºå…¬é’¥/ç§é’¥å¯¹ï¼Œæ”¯æŒï¼šRSA, DSA, EC, DH(DiffieHellman)
KeyFactory // ç”¨äºåˆ›å»ºå…¬é’¥/ç§é’¥å¯¹(æ”¯æŒ KeySpec)ï¼Œæ”¯æŒï¼šRSA, DSA, EC, DH(DiffieHellman)

KeyStore // å¯†é’¥åº“ï¼Œæ ¹æ®ä¸åŒçš„ç±»å‹å¯ä»¥ä»ä¸­æå–å¯†é’¥ï¼Œå…¬é’¥ï¼Œç§é’¥ï¼Œè¯ä¹¦
Certificate // è¯ä¹¦

Cipher // åŠ å¯†å’Œè§£å¯†ï¼ŒåŒ…æ‹¬å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ï¼ŒåŒ…æ‹¬ï¼šDES, DESede, RC4(ARCFOUR), Blowfish, AES, RSA...
Mac // å•å‘åŠ å¯†ï¼Œå“ˆå¸ŒåŠ å¯†ï¼ŒåŒ…æ‹¬ï¼š HmacSHA1, HmacSHA224, HmacSHA256, HmacSHA384, HmacSHA512, HmacSHAMD5

MessageDigest // æ¶ˆæ¯æ‘˜è¦ï¼Œç”¨äºç”Ÿæˆï¼š MD5, SHA, SHA-256, SHA-512...
Signature // æ•°å­—ç­¾åï¼ŒåŒ…æ‹¬ï¼šMD5withRSA, SHA256withRSA, SHA512withRSA, SHA256withDSA, SHA256withECDSA...
</pre>
						</div>

                        <a id="encrypt" class="offset"></a>
						<div class="sub-item">
							<p><b>åŠ å¯†çš„ä¸€èˆ¬æ­¥éª¤ï¼š</b></p>
							<ol type="I">
								<li>
									<p><b>ç”Ÿæˆå¯†é’¥</b> -- JDK å†…éƒ¨æœ‰å¾ˆå¤šç±»ç”Ÿæˆå¯†é’¥ï¼Œæœ‰äº›å¯†é’¥è¦æ ¹æ®åŠ å¯†ç®—æ³•æ¥ç”Ÿæˆã€‚</p>
									<pre class="brush: java;">
/** éšæœºç”Ÿæˆ Key(æ¯æ¬¡è¿è¡Œéƒ½ä¸ä¸€æ ·ï¼Œä½¿ç”¨æ—¶éœ€è¦ä¿å­˜ç”Ÿæˆçš„ Key) */
KeyGenerator generator = KeyGenerator.getInstance("AES");
generator.init(128); // æŒ‡å®šç”Ÿæˆçš„å¯†é’¥é•¿åº¦ä¸º 128, å¯ä»¥ä¸æŒ‡å®šï¼Œæ ¹æ®ç®—æ³•ç”Ÿæˆé»˜è®¤é•¿åº¦
SecretKey secretKey = generator.generateKey();

/** ç”Ÿæˆå›ºå®šçš„ Key */
String key = "01234567"; // å¦‚æœä½¿ç”¨ DES ç®—æ³•ï¼Œé‚£ä¹ˆ length >= 8; å¦‚æœå¤§äº 8 ä½ï¼Œä¹Ÿåªä½¿ç”¨å‰ 8 ä½
SecretKeySpec keySpec = new SecretKeySpec(key.getBytes(), "DES");
SecretKey secretKey = SecretKeyFactory.getInstance("DES").generateSecret(keySpec);
</pre>
								</li>
								<li>
									<p><b>æŒ‡å®šåŠ å¯†ç®—æ³•è¿›è¡ŒåŠ å¯†</b></p>
									<pre class="brush: java;">
/** ç®—æ³•çš„æŒ‡å®šæœ‰ä»¥ä¸‹ä¸¤ç§æ ¼å¼ï¼š
 *   "algorithm/mode/padding" -- æŒ‡å®šç®—æ³•/æ¨¡å¼/å¡«å……
 *   "algorithm" -- ä½¿ç”¨çš„æ¨¡å¼å’Œå¡«å……æ–¹æ¡ˆç‰¹å®šäºæä¾›è€…çš„é»˜è®¤å€¼
 * ä½¿ç”¨ CFB å’Œ OFB ä¹‹ç±»çš„æ¨¡å¼ï¼Œå¯ä»¥æŒ‡å®šä¸€æ¬¡å¤„ç†çš„ä½æ•°ï¼Œå¦‚ "DES/CFB8/NoPadding" å’Œ "DES/OFB32/PKCS5Padding"
 * Java å¹³å°çš„æ¯ä¸€ä¸ªå®ç°éƒ½éœ€è¦æ”¯æŒä»¥ä¸‹æ ‡å‡†å¯†ç è½¬æ¢ï¼š(æ‹¬å·æ•°å€¼ä¸ºæ‰€éœ€ç§˜é’¥çš„é•¿åº¦)
 *	  AES/CBC/NoPadding (128)
 *	  AES/CBC/PKCS5Padding (128)
 *	  AES/ECB/NoPadding (128)
 *	  AES/ECB/PKCS5Padding (128)
 *	  DES/CBC/NoPadding (56)
 *	  DES/CBC/PKCS5Padding (56)
 *	  DES/ECB/NoPadding (56)
 *	  DES/ECB/PKCS5Padding (56)
 *	  DESede/CBC/NoPadding (168)
 *	  DESede/CBC/PKCS5Padding (168)
 *	  DESede/ECB/NoPadding (168)
 *	  DESede/ECB/PKCS5Padding (168)
 *	  RSA/ECB/PKCS1Padding (1024, 2048)
 *	  RSA/ECB/OAEPWithSHA-1AndMGF1Padding (1024, 2048)
 *	  RSA/ECB/OAEPWithSHA-256AndMGF1Padding (1024, 2048)
 */
Cipher cipher = Cipher.getInstance("AES/ECB/PKCS5Padding");
cipher.init(Cipher.ENCRYPT_MODE, secretKey); // æŒ‡å®šä¸ºåŠ å¯†æ¨¡å¼ï¼Œä½¿ç”¨å‰é¢ç”Ÿæˆçš„ Key

byte[] encrypted = cipher.doFinal(URL.getBytes());
Log.log("DES åŠ å¯†ï¼š", EncryptUtil.byteArrayToHexString(encrypted));
</pre>
								</li>
								<li>
									<p><b>ä½¿ç”¨å¯†é’¥è§£å¯†</b></p>
									<pre class="brush: java;">
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");

/** ç”±äº AES åŠ å¯†åœ¨ CBC æ¨¡å¼ä¸‹æ˜¯éœ€è¦æœ‰ä¸€ä¸ªåˆå§‹å‘é‡æ•°ç»„ byte[] initializeVector ,
 * è€Œè§£å¯†çš„æ—¶å€™ä¹Ÿéœ€è¦åŒæ ·çš„åˆå§‹å‘é‡ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨åŠ å¯†æ—¶çš„å‚æ•°åˆå§‹åŒ–è§£å¯†çš„ cipherï¼Œå¦åˆ™ä¼šå‡ºé”™
 */
byte[] initializeVector = cipher.getIV();
IvParameterSpec ivParameterSpec = new IvParameterSpec(initializeVector);

cipher.init(Cipher.DECRYPT_MODE, secretKey, ivParameterSpec); // æŒ‡å®šä¸ºè§£å¯†æ¨¡å¼
byte[] decrypted = cipher.doFinal(encrypted);
Log.log("DES è§£å¯†ï¼š", new String(decrypted));
</pre>
								</li>
							</ol>
							<p><a href="" target="_blank">KeyGenerator</a> ç±»æä¾›å¯†é’¥ç”Ÿæˆå™¨çš„åŠŸèƒ½ï¼Œå¯ä»¥æŸ¥è¯¢ JDK å†…éƒ¨æ”¯æŒçš„åŠ å¯†æœåŠ¡ï¼š</p>
							<pre class="brush: java;">
/** æŸ¥è¯¢æ‰€æœ‰çš„ Service */
Provider[] providers = Security.getProviders();
for (int i = 0; i < providers.length; i++) {
	Log.log(i, "Provider ->", providers[i].getName()); // Provide
	Set&lt;Provider.Service> services = providers[i].getServices();
	Iterator&lt;Provider.Service> iterator = services.iterator();
	int index = 0;
	while(iterator.hasNext()) {
		// Provider.Service æä¾›æœåŠ¡ã€ç±»å‹ã€ç®—æ³•åç§°å’Œå®ç°è¯¥æœåŠ¡çš„ç±»çš„åç§°
		Provider.Service service = iterator.next(); // Service
		Log.log(i + "-" + index++, service.getType(), service.getAlgorithm(), service.getClassName());
		/** Service åŒ…å«äº†ç®—æ³•åç§°å’Œå®ç°æœåŠ¡çš„ç±»ï¼Œæ¯”å¦‚ï¼š
		 *    MessageDigest    MD5    sun.security.provider.MD5
		 *    KeyGenerator    AES    com.sun.crypto.provider.AESKeyGenerator
		 *    AlgorithmParameters    AES    com.sun.crypto.provider.AESParameters
		 *    Cipher    AES    com.sun.crypto.provider.AESCipher$General
		 *    KeyGenerator    DES    com.sun.crypto.provider.DESKeyGenerator
		 *    SecretKeyFactory    DES    com.sun.crypto.provider.DESKeyFactory
		 *    AlgorithmParameters    DES    com.sun.crypto.provider.DESParameters
		 *    Cipher    DES    com.sun.crypto.provider.DESCipher
		 * ä½¿ç”¨ MD5 åŠ å¯†ï¼š
		 * MessageDigest messageDigest = MessageDigest.getInstance("MD5");
         * byte[] outputs = messageDigest.digest("éœ€è¦ç”Ÿæˆæ‘˜è¦çš„å†…å®¹".getBytes(StandardCharsets.UTF_8));
         * Log.log(EncryptUtil.byteArrayToHexString(outputs)); // è½¬ä¸º 16 è¿›åˆ¶å¤§å†™
		 */
	}
	Log.newLine('=');
}
</pre>
						</div>

                        <a id="encrypt_example" class="offset"></a>
						<div class="sub-item">
							<p><b>å¸¸ç”¨çš„åŠ å¯†å’Œè§£å¯†</b></p>
							<ul>
								<li>
									<p><b>DES</b> -- æ˜¯æ•°æ®æœºå¯†æ ‡å‡†ï¼ˆData Encryption Standardï¼‰ç®€ç§°ï¼Œå±äºå¯¹ç§°åŠ å¯†ã€‚</p>
									<p><b>DESede</b> -- DESede æ˜¯ä¸‰é‡ DES åŠ å¯†ï¼Œæ˜¯ DES å‘ AES è¿‡æ¸¡çš„åŠ å¯†ç®—æ³•ï¼Œå®ƒä½¿ç”¨ 3 æ¡ 56 ä½çš„å¯†é’¥å¯¹æ•°æ®è¿›è¡Œä¸‰æ¬¡åŠ å¯†ã€‚</p>
									<pre class="brush: java">
/**
 * DES CBC æ¨¡å¼åŠ å¯†
 *
 * @param content è¦åŠ å¯†çš„å†…å®¹
 * @param password ç”Ÿæˆå¯†é’¥çš„å¯†ç 
 * @return åŠ å¯†åå†…å®¹ï¼Œè½¬ä¸º 16 è¿›åˆ¶æˆ– Base64 ç¼–ç æ–¹ä¾¿ä¿å­˜
 */
public static String encryptWithDES(String content, String password) throws Exception {
	byte[] md5 = MessageDigest.getInstance("MD5").digest(password.getBytes());

	DESKeySpec keySpec = new DESKeySpec(md5); // DES åŠ å¯†å…¶å®åªä½¿ç”¨äº†å‰ 8 ä¸ªå­—èŠ‚
	Key secretKey = SecretKeyFactory.getInstance("DES").generateSecret(keySpec);

	Cipher cipher = Cipher.getInstance("DES/CBC/PKCS5Padding");
	byte[] iv = new byte[8];
	System.arraycopy(md5, 0, iv, 0, 8);
	cipher.init(Cipher.ENCRYPT_MODE, secretKey, new IvParameterSpec(iv));

	byte[] encrypted = cipher.doFinal(content.getBytes());
	return byteArrayToHexString(encrypted);
//  return Base64.getEncoder().encodeToString(encrypted); // ä¹Ÿå¯ä»¥ä½¿ç”¨ Base64
}

/**
 * DES CBC æ¨¡å¼è§£å¯†
 *
 * @param encrypted è¦è§£å¯†çš„å†…å®¹ï¼Œå¯¹åº”åŠ å¯†æ–¹æ³•ï¼Œè¦å…ˆè½¬ä¸º byte æ•°ç»„
 * @param password ç”Ÿæˆå¯†é’¥çš„å¯†ç 
 * @return è§£å¯†åå†…å®¹
 */
public static String decryptWithDES(String encrypted, String password) throws Exception {
	byte[] md5 = MessageDigest.getInstance("MD5").digest(password.getBytes());

	DESKeySpec keySpec = new DESKeySpec(md5); // DES åŠ å¯†å…¶å®åªä½¿ç”¨äº†å‰ 8 ä¸ªå­—èŠ‚
	Key secretKey = SecretKeyFactory.getInstance("DES").generateSecret(keySpec);

	Cipher cipher = Cipher.getInstance("DES/CBC/PKCS5Padding");
	byte[] iv = new byte[8];
	System.arraycopy(md5, 0, iv, 0, 8);
	cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(iv));

	byte[] decrypted = cipher.doFinal(hexStringToByteArray(encrypted));
//  byte[] decrypted = cipher.doFinal(Base64.getDecoder().decode(encrypted)); // Base64ï¼Œè¿™é‡Œè¿˜åŸ
	return new String(decrypted);
}

/**
 * DESede CBC æ¨¡å¼åŠ å¯†
 *
 * @param content è¦åŠ å¯†çš„å†…å®¹
 * @param password ç”Ÿæˆå¯†é’¥çš„å¯†ç 
 * @return åŠ å¯†åå†…å®¹ï¼Œè½¬ä¸º 16 è¿›åˆ¶æˆ– Base64 ç¼–ç æ–¹ä¾¿ä¿å­˜
 */
public static String encryptWithDESede(String content, String password) throws Exception {
	byte[] md5 = MessageDigest.getInstance("MD5").digest(password.getBytes());

	byte[] key = new byte[24]; // DESede éœ€è¦ä½¿ç”¨ 24 å­—èŠ‚
	System.arraycopy(md5, 0, key, 0, 16);
	DESedeKeySpec keySpec = new DESedeKeySpec(key);
	Key secretKey = SecretKeyFactory.getInstance("DESede").generateSecret(keySpec);

	Cipher cipher = Cipher.getInstance("DESede/CBC/PKCS5Padding");
	byte[] iv = new byte[8];
	System.arraycopy(md5, 0, iv, 0, 8);
	cipher.init(Cipher.ENCRYPT_MODE, secretKey, new IvParameterSpec(iv));

	byte[] encrypted = cipher.doFinal(content.getBytes());
	return byteArrayToHexString(encrypted);
//  return Base64.getEncoder().encodeToString(encrypted); // ä¹Ÿå¯ä»¥ä½¿ç”¨ Base64
}

/**
 * DES CBC æ¨¡å¼è§£å¯†
 *
 * @param encrypted è¦è§£å¯†çš„å†…å®¹ï¼Œå¯¹åº”åŠ å¯†æ–¹æ³•ï¼Œè¦å…ˆè½¬ä¸º byte æ•°ç»„
 * @param password ç”Ÿæˆå¯†é’¥çš„å¯†ç 
 * @return è§£å¯†åå†…å®¹
 */
public static String decryptWithDESede(String encrypted, String password) throws Exception {
	byte[] md5 = MessageDigest.getInstance("MD5").digest(password.getBytes());

	byte[] key = new byte[24];
	System.arraycopy(md5, 0, key, 0, 16);
	DESedeKeySpec keySpec = new DESedeKeySpec(key); // DESede éœ€è¦ä½¿ç”¨ 24 å­—èŠ‚
	Key secretKey = SecretKeyFactory.getInstance("DESede").generateSecret(keySpec);

	Cipher cipher = Cipher.getInstance("DESede/CBC/PKCS5Padding");
	byte[] iv = new byte[8];
	System.arraycopy(md5, 0, iv, 0, 8);
	cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(iv));

	byte[] decrypted = cipher.doFinal(hexStringToByteArray(encrypted));
//  byte[] decrypted = cipher.doFinal(Base64.getDecoder().decode(encrypted)); // Base64ï¼Œè¿™é‡Œè¿˜åŸ
	return new String(decrypted);
}

/** byte[] æ•°ç»„è½¬æ¢ä¸º 16 è¿›åˆ¶çš„å­—ç¬¦ä¸² */
public static String byteArrayToHexString(byte[] data) {
	StringBuilder sb = new StringBuilder(data.length * 2);
	for (byte b : data) {
		int v = b & 0xff;
		if (v < 16) {
			sb.append('0');
		}
		sb.append(Integer.toHexString(v));
	}
	return sb.toString().toUpperCase(Locale.getDefault());
}

/** 16 è¿›åˆ¶è¡¨ç¤ºçš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ */
public static byte[] hexStringToByteArray(String s) {
	int len = s.length();
	byte[] d = new byte[len / 2];
	for (int i = 0; i < len; i += 2) {
		// ä¸¤ä½ä¸€ç»„ï¼Œè¡¨ç¤ºä¸€ä¸ªå­—èŠ‚,æŠŠè¿™æ ·è¡¨ç¤ºçš„ 16 è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œè¿˜åŸæˆä¸€ä¸ªè¿›åˆ¶å­—èŠ‚
		d[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) << 4)
				 + Character.digit(s.charAt(i + 1), 16));
	}
	return d;
}
</pre>
								</li>
								<li>
									<p><b>AES</b> -- æ˜¯é«˜çº§åŠ å¯†æ ‡å‡†ï¼ˆAdvanced Encryption Standardï¼‰ç®€ç§°ï¼Œå±äºå¯¹ç§°åŠ å¯†ï¼Œæ˜¯ç¾å›½è”é‚¦æ”¿åºœé‡‡ç”¨çš„ä¸€ç§åŒºå—åŠ å¯†æ ‡å‡†ã€‚è¿™ä¸ªæ ‡å‡†ç”¨æ¥æ›¿ä»£åŸå…ˆçš„ DES åŠ å¯†ã€‚</p>
									<p><b>AES</b> æ¯”ä¸‰é‡ DES å¿«ã€è‡³å°‘ä¸ä¸‰é‡ DES ä¸€æ ·å®‰å…¨ã€æ•°æ®åˆ†ç»„é•¿åº¦ä¸º 128 æ¯”ç‰¹ã€å¯†é’¥é•¿åº¦ä¸º 128/192/256 æ¯”ç‰¹ã€‚</p>
									<pre class="brush: java">
/**
 * AES CBC æ¨¡å¼åŠ å¯†
 *
 * @param content è¦åŠ å¯†çš„å†…å®¹
 * @param password ç”Ÿæˆå¯†é’¥çš„å¯†ç 
 * @return åŠ å¯†åå†…å®¹ï¼Œè½¬ä¸º 16 è¿›åˆ¶æˆ– Base64 ç¼–ç æ–¹ä¾¿ä¿å­˜
 */
public static String encryptWithAES(String content, String password) throws Exception {
	byte[] md5 = MessageDigest.getInstance("MD5").digest(password.getBytes());
	Key secretKey = new SecretKeySpec(md5, "AES"); // byte æ•°ç»„çš„é•¿åº¦ä¸º 16 å­—èŠ‚ï¼Œè¿™é‡Œä½¿ç”¨å¯†ç çš„ md5 å€¼

	Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
	// AES åŠ å¯†åœ¨ CBC æ¨¡å¼ä¸‹æ˜¯éœ€è¦æœ‰ä¸€ä¸ªåˆå§‹å‘é‡æ•°ç»„ byte[] initializeVector
	byte[] initializeVector = md5; // é•¿åº¦ä¸º 16 å­—èŠ‚ï¼Œåˆšå¥½å¯ä»¥ä½¿ç”¨ md5 å€¼
    IvParameterSpec ivParameterSpec = new IvParameterSpec(initializeVector);
	cipher.init(Cipher.ENCRYPT_MODE, secretKey, ivParameterSpec);

	byte[] encrypted = cipher.doFinal(content.getBytes());
    return byteArrayToHexString(encrypted);
	// return Base64.getEncoder().encodeToString(encrypted); // ä¹Ÿå¯ä»¥ä½¿ç”¨ Base64
}

/**
 * AES CBC æ¨¡å¼è§£å¯†
 *
 * @param encrypted è¦è§£å¯†çš„å†…å®¹ï¼Œå¯¹åº”åŠ å¯†æ–¹æ³•ï¼Œè¦å…ˆè½¬ä¸º byte æ•°ç»„
 * @param password ç”Ÿæˆå¯†é’¥çš„å¯†ç 
 * @return è§£å¯†åå†…å®¹
 */
public static String decryptWithAES(String encrypted, String password) throws Exception {
	byte[] md5 = MessageDigest.getInstance("MD5").digest(password.getBytes());
	Key secretKey = new SecretKeySpec(md5, "AES");

	Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
	cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(md5));

	byte[] decrypted = cipher.doFinal(hexStringToByteArray(encrypted));
	// byte[] decrypted = cipher.doFinal(Base64.getDecoder().decode(encrypted)); // Base64ï¼Œè¿™é‡Œè¿˜åŸ
	return new String(decrypted);
}
</pre>
								</li>
								<li>
									<p><b>RSA</b> -- æ˜¯ä¸€ç§éå¯¹ç§°åŠ å¯†ç®—æ³•ã€‚å¯¹æå¤§æ•´æ•°åšå› æ•°åˆ†è§£çš„éš¾åº¦å†³å®šäº† RSA ç®—æ³•çš„å¯é æ€§ã€‚</p>
									<p><b>RSA å…¬é’¥åŠ å¯†ç»“æœæ¯æ¬¡éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œä½†æ˜¯éƒ½èƒ½ä½¿ç”¨ç§é’¥è¿›è¡Œè§£å¯†ã€‚</b></p>
									<p>å¯ä»¥ä½¿ç”¨ KeyPairGenerator ç”Ÿæˆå¯†é’¥å¯¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ <code>openssl</code> æ¥ç”Ÿæˆå¯†é’¥å¯¹æ–‡ä»¶ã€‚</p>
									<pre class="brush: bash;">
###### ä½¿ç”¨ openssl ç”Ÿæˆå¯†é’¥å¯¹(pkcs8_rsa_private_key.pem å’Œ rsa_public_key.pem) ######
## 1.ç”Ÿæˆ 2048 ä½çš„ç§é’¥
$ openssl genrsa -out rsa_private_key.pem 2048
## 2.ä»ç§é’¥ç”Ÿæˆå…¬é’¥
$ openssl rsa -in rsa_private_key.pem -pubout -out rsa_public_key.pem
## 3.å°†ç§é’¥è¿›è¡Œ pkcs8 ç¼–ç (åŠ å¯†/è§£å¯†è¦ä½¿ç”¨è¿™ä¸ªç»è¿‡ pkcs8 ç¼–ç åçš„æ–‡ä»¶)
$ openssl pkcs8 -topk8 -in rsa_private_key.pem -out rsa_private_key.key -nocrypt
</pre>
									<pre class="brush: java">
/**
 * ç”Ÿæˆ 2048 ä½çš„ RSA å¯†é’¥å¯¹
 *
 * @return KeyPair
 * @throws Exception å¼‚å¸¸
 */
public static KeyPair generateRSAKeyPair() throws Exception {
	KeyPairGenerator generator = KeyPairGenerator.getInstance("RSA");
	generator.initialize(2048);
	return generator.generateKeyPair();
}

/**
 * ä¿å­˜ KeyPair
 *
 * @param keyPair     éœ€è¦ä¿å­˜çš„ KeyPair
 * @param publicPath  å…¬é’¥ä¿å­˜è·¯å¾„
 * @param privatePath ç§é’¥ä¿å­˜è·¯å¾„
 */
public static void saveKeyPair(KeyPair keyPair, String publicPath, String privatePath) throws IOException {
	String pblc = Base64.getEncoder().encodeToString(keyPair.getPublic().getEncoded());
	writeText(publicPath, pblc);

	String prvt = Base64.getEncoder().encodeToString(keyPair.getPrivate().getEncoded());
	writeText(privatePath, prvt);
}

/**
 * RSA åŠ å¯†
 *
 * @param content            è¦åŠ å¯†çš„å†…å®¹
 * @param base64             ç»è¿‡ Base64 ç¼–ç çš„å…¬é’¥/å¯†é’¥
 * @param pub_true_pri_false ä½¿ç”¨å…¬é’¥è¿˜æ˜¯å¯†é’¥è¿›è¡ŒåŠ å¯†
 * @return ç»è¿‡ Base64 åŠ å¯†åçš„å†…å®¹
 * @throws Exception åŠ å¯†å¼‚å¸¸
 */
public static String encryptWithRSA(String content, String base64, boolean pub_true_pri_false) throws Exception {
//        PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(Base64.getDecoder().decode(key));
	Key key;
	KeyFactory keyFactory = KeyFactory.getInstance("RSA");
	if (pub_true_pri_false) {
		X509EncodedKeySpec keySpec = new X509EncodedKeySpec(Base64.getDecoder().decode(base64));
		key = keyFactory.generatePublic(keySpec);
	} else {
		PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(Base64.getDecoder().decode(base64));
		key = keyFactory.generatePrivate(keySpec);
	}

	Cipher cipher = Cipher.getInstance(keyFactory.getAlgorithm());
	cipher.init(Cipher.ENCRYPT_MODE, key);

	byte[] encrypted = cipher.doFinal(content.getBytes());
//        return byteArrayToHexString(encrypted);
	return Base64.getEncoder().encodeToString(encrypted);
}

/**
 * RSA è§£å¯†ï¼Œå¦‚æœç”¨å…¬é’¥åŠ å¯†ï¼Œé‚£ä¹ˆå¿…é¡»ç”¨ç§é’¥è§£å¯†ï¼›å¦‚æœç”¨ç§é’¥åŠ å¯†ï¼Œé‚£ä¹ˆå¿…é¡»ç”¨å…¬é’¥è§£å¯†
 *
 * @param encrypted          è¦è§£å¯†çš„å†…å®¹
 * @param base64             ç»è¿‡ Base64 ç¼–ç çš„å…¬é’¥/å¯†é’¥
 * @param pub_true_pri_false ä½¿ç”¨å…¬é’¥è¿˜æ˜¯å¯†é’¥è¿›è¡Œè§£å¯†
 * @return åŸå§‹å†…å®¹
 * @throws Exception è§£å¯†å¼‚å¸¸
 */
public static String decryptWithRSA(String encrypted, String base64, boolean pub_true_pri_false) throws Exception {
	Key key;
	KeyFactory keyFactory = KeyFactory.getInstance("RSA");
	if (pub_true_pri_false) {
		X509EncodedKeySpec keySpec = new X509EncodedKeySpec(Base64.getDecoder().decode(base64));
		key = keyFactory.generatePublic(keySpec);
	} else {
		PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(Base64.getDecoder().decode(base64));
		key = keyFactory.generatePrivate(keySpec);
	}

	Cipher cipher = Cipher.getInstance(keyFactory.getAlgorithm());
	cipher.init(Cipher.DECRYPT_MODE, key);

//        byte[] decrypted = cipher.doFinal(hexStringToByteArray(encrypted));
	byte[] decrypted = cipher.doFinal(Base64.getDecoder().decode(encrypted));
	return new String(decrypted);
}

/**
 * RSA åŠ å¯†ï¼Œä½¿ç”¨ openssl åˆ›å»ºçš„ .pem å¯†é’¥å¯¹
 *
 * openssl ç”Ÿæˆå¯†é’¥å¯¹:
 *   1.ç”Ÿæˆ 2048 ä½çš„ç§é’¥
 *     $ openssl genrsa -out rsa_private_key.pem 2048
 *   2.ä»ç§é’¥ç”Ÿæˆå…¬é’¥
 *     $ openssl rsa -in rsa_private_key.pem -pubout -out rsa_public_key.pem
 *   3.å°†ç§é’¥è¿›è¡Œ pkcs8 ç¼–ç (åŠ å¯†/è§£å¯†è¦ä½¿ç”¨è¿™ä¸ªç»è¿‡ pkcs8 ç¼–ç åçš„æ–‡ä»¶)
 *     $ openssl pkcs8 -topk8 -in rsa_private_key.pem -out pkcs8_rsa_private_key.pem -nocrypt
 *
 * @param content            è¦åŠ å¯†çš„å†…å®¹
 * @param pemPath            pem æ–‡ä»¶è·¯å¾„
 * @param pub_true_pri_false ä½¿ç”¨å…¬é’¥è¿˜æ˜¯å¯†é’¥è¿›è¡ŒåŠ å¯†
 * @return ç»è¿‡ Base64 åŠ å¯†åçš„å†…å®¹
 * @throws Exception åŠ å¯†å¼‚å¸¸
 */
public static String encryptWithRSAPem(String content, String pemPath, boolean pub_true_pri_false) throws Exception {
	return encryptWithRSA(content, readPem(pemPath), pub_true_pri_false);
}

/**
 * RSA è§£å¯†ï¼Œä½¿ç”¨ openssl åˆ›å»ºçš„ .pem å¯†é’¥å¯¹
 *
 * @param encrypted          è¦è§£å¯†çš„å†…å®¹
 * @param pemPath            pem æ–‡ä»¶è·¯å¾„
 * @param pub_true_pri_false ä½¿ç”¨å…¬é’¥è¿˜æ˜¯å¯†é’¥è¿›è¡Œè§£å¯†
 * @return ç»è¿‡ Base64 è§£å¯†åçš„å†…å®¹
 * @throws Exception è§£å¯†å¼‚å¸¸
 */
public static String decryptWithRSAPem(String encrypted, String pemPath, boolean pub_true_pri_false) throws Exception {
	return decryptWithRSA(encrypted, readPem(pemPath), pub_true_pri_false);
}

/**
 * è¯»å– openssl ç”Ÿæˆçš„ .pem æ–‡ä»¶
 *
 * @param path è·¯å¾„
 * @return å»æ‰é¦–å°¾è¡Œçš„å†…å®¹
 * @throws IOException è·¯å¾„å¼‚å¸¸
 */
public static String readPem(String path) throws IOException {
	BufferedReader br = new BufferedReader(new FileReader(path));
	br.readLine();
	StringBuilder str = new StringBuilder();
	String s = br.readLine();
	while (s.charAt(0) != '-') {
		str.append(s);
		s = br.readLine();
	}
	return str.toString();
}

/**
 * è¯»å–æ–‡æœ¬æ–‡ä»¶
 *
 * @param path è·¯å¾„
 * @return å†…å®¹
 * @throws IOException å¼‚å¸¸
 */
public static String readText(String path) throws IOException {
	StringBuilder builder = new StringBuilder();

	BufferedReader reader = new BufferedReader(new FileReader(path));
	String tmp;
	while ((tmp = reader.readLine()) != null) {
		builder.append(tmp);
	}
	reader.close();

	return builder.toString();
}

/**
 * å†™æ–‡æœ¬æ–‡ä»¶
 *
 * @param path    è·¯å¾„
 * @param content å†…å®¹
 * @throws IOException å¼‚å¸¸
 */
public static void writeText(String path, String content) throws IOException {
	BufferedWriter writer = new BufferedWriter(new FileWriter(path));
	writer.write(content);
	writer.flush();
	writer.close();
}
</pre>
								</li>
								<li>
									<p><b>Mac</b> -- æ˜¯æ¶ˆæ¯éªŒè¯ç ï¼ˆMessage Authentication Codeï¼‰çš„ç®€ç§°ï¼Œä¸ºå•å‘åŠ å¯†(åŠ å¯†åä¸å¯è§£å¯†)ã€‚åŸºäºåŠ å¯†å“ˆå¸Œå‡½æ•°çš„ MAC æœºåˆ¶ä¹Ÿå«ä½œ HMACï¼Œ ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š <code>HmacSHA1</code>, <code>HmacSHA224</code>, <code>HmacSHA256</code>, <code>HmacSHA384</code>, <code>HmacSHA512</code>, <code>HmacSHAMD5</code>ã€‚</p>
									<pre class="brush: java">
/**
 * å“ˆå¸ŒåŠ å¯†ï¼Œ æ¶ˆæ¯éªŒè¯ç MAC(Message Authentication Code)
 *
 * @param content   è¦åŠ å¯†çš„å†…å®¹
 * @param password  å¯†ç 
 * @param algorithm å¸¸ç”¨çš„æœ‰ï¼š HmacSHA1, HmacSHA224, HmacSHA256, HmacSHA384, HmacSHA512, HmacSHAMD5
 * @return ç»è¿‡åŠ å¯†çš„æ•°æ®
 * @throws Exception å¼‚å¸¸
 */
public static String encryptWithMac(String content, String password, String algorithm) throws Exception {
	SecretKeySpec keySpec = new SecretKeySpec(password.getBytes(), algorithm);

	Mac mac = Mac.getInstance(algorithm);
	mac.init(keySpec);

	byte[] encrypted = mac.doFinal(content.getBytes(StandardCharsets.UTF_8));
	return EncryptUtil.byteArrayToHexString(encrypted);
//        return Base64.getEncoder().encodeToString(encrypted); // ä¹Ÿå¯ä»¥ä½¿ç”¨ Base64
}
</pre>
								</li>
								<li>
									<p><b>SHA</b> -- æ˜¯å®‰å…¨æ•£åˆ—ç®—æ³•ï¼ˆSecure Hash Algorithmï¼‰çš„ç®€ç§°ï¼ŒåŸåˆ™ä¸Šä¸èƒ½ç®—æ˜¯åŠ å¯†ç®—æ³•ã€‚å¸¸ç”¨çš„æœ‰ï¼š<code>SHA</code>, <code>SHA-224</code>, <code>SHA-256</code>, <code>SHA-384</code>, <code>SHA-512</code>ã€‚</p>
									<pre class="brush: java">
/** åŒä¸‹ï¼Œ å¦‚æœå°† content = String.format("%s%s", content, password); ä¹Ÿå¯ç”¨äºåŠ å¯† */
public static String encryptWithSHA(String content) throws Exception {
	return encryptWithSHA(content, "SHA-256");
}

/**
 * ç”Ÿæˆ SHA(è½¬ä¸º 16 è¿›åˆ¶å¤§å†™çš„å€¼)
 *
 * @param content éœ€è¦ç”Ÿæˆ SHA çš„å†…å®¹
 * @param algorithm å¸¸ç”¨çš„æœ‰ï¼š SHA, SHA-224, SHA-256, SHA-384, SHA-512
 * @return è½¬ä¸º 16 è¿›åˆ¶å¤§å†™çš„å€¼
 * @throws Exception å¼‚å¸¸
 */
public static String encryptWithSHA(String content, String algorithm) throws Exception {
	MessageDigest digest = MessageDigest.getInstance(algorithm);
	byte[] encrypted = digest.digest(content.getBytes(StandardCharsets.UTF_8));
	return EncryptUtil.byteArrayToHexString(encrypted);
//        return Base64.getEncoder().encodeToString(encrypted); // ä¹Ÿå¯ä»¥ä½¿ç”¨ Base64
}

/**
 * ä¸ºæ–‡ä»¶ç”Ÿæˆ SHA-256
 *
 * @param file æ–‡ä»¶
 * @return å¤§å†™ 16 è¿›åˆ¶ md5 å€¼
 */
public static String generateFileSHA(File file) {
	return generateFileDigest(file, "SHA-256");
}

/**
 * ä¸ºæ–‡ä»¶ç”Ÿæˆæ‘˜è¦(æ”¯æŒå¤§æ–‡ä»¶)
 *
 * @param file æ–‡ä»¶
 * @param algorithm ç®—æ³•ï¼Œæ”¯æŒï¼š MD5, SHA, SHA-224, SHA-256, SHA-384, SHA-512
 * @return å¤§å†™ 16 è¿›åˆ¶ md5 å€¼
 */
public static String generateFileDigest(File file, String algorithm) {
	FileInputStream fileInputStream = null;
	try {
		MessageDigest digest = MessageDigest.getInstance(algorithm);
		fileInputStream = new FileInputStream(file);
		byte[] buffer = new byte[8192];
		int length;
		while ((length = fileInputStream.read(buffer)) != -1) {
			digest.update(buffer, 0, length);
		}
		return byteArrayToHexString(digest.digest());
	} catch (Exception e) {
		e.printStackTrace();
		return null;
	} finally {
		try {
			if (fileInputStream != null) {
				fileInputStream.close();
			}
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
</pre>
								</li>
								<li>
									<p><b>MD5</b> -- æ˜¯æ¶ˆæ¯æ‘˜è¦ç®—æ³•ï¼ˆMessage Digest Algorithmï¼‰çš„ç®€ç§°ã€‚åŸåˆ™ä¸Šä¸èƒ½ç®—æ˜¯åŠ å¯†ç®—æ³•ã€‚</p>
									<pre class="brush: java">
/**
 * ç”Ÿæˆ MD5(è½¬ä¸º 16 è¿›åˆ¶å¤§å†™çš„å€¼)
 *
 * @param content éœ€è¦ç”Ÿæˆ md5 çš„å†…å®¹
 * @return è½¬ä¸º 16 è¿›åˆ¶å¤§å†™çš„å€¼
 * @throws Exception å¼‚å¸¸
 */
public static String encryptWithMD5(String content) throws Exception {
	MessageDigest digest = MessageDigest.getInstance("MD5");
	byte[] encrypted = digest.digest(content.getBytes(StandardCharsets.UTF_8));
	return EncryptUtil.byteArrayToHexString(encrypted);
//        return Base64.getEncoder().encodeToString(encrypted); // ä¹Ÿå¯ä»¥ä½¿ç”¨ Base64
}

/**
 * æ ¡éªŒ MD5
 *
 * @param content éœ€è¦æ ¡éªŒçš„å†…å®¹
 * @param md5     md5 å€¼
 * @return æ˜¯å¦ç¬¦åˆ
 */
public static boolean verifyMD5(String content, String md5) throws Exception {
	return encryptWithMD5(content).equals(md5);
}

/**
 * æ ¡éªŒæ–‡ä»¶çš„ MD5 å€¼(æ”¯æŒå¤§æ–‡ä»¶)
 *
 * @param path è·¯å¾„
 * @param md5 md5 å€¼
 * @return æ˜¯å¦ç¬¦åˆ
 */
public static boolean verifyFileWithMD5(String path, String md5) {
	return verifyFile(path, "MD5", md5);
}

/**
 * æ ¡éªŒæ–‡ä»¶
 *
 * @param path æ–‡ä»¶è·¯å¾„
 * @param algorithm ç®—æ³•ï¼Œæ”¯æŒï¼šMD5, SHA, SHA-224, SHA-256, SHA-384, SHA-512
 * @param value æ¯”å¯¹å€¼
 * @return æ˜¯å¦ç¬¦åˆ
 */
public static boolean verifyFile(String path, String algorithm, String value) {
	String degist = generateFileDigest(new File(path), algorithm);
	if(null == degist) {
		return false;
	}
	return degist.equals(value);
}

/**
 * ä¸ºæ–‡ä»¶ç”Ÿæˆ MD5
 *
 * @param file æ–‡ä»¶
 * @return å¤§å†™ 16 è¿›åˆ¶ md5 å€¼
 */
public static String generateFileMD5(File file) {
	return generateFileDigest(file, "MD5");
}
</pre>
								</li>
							</ul>
						</div>

                        <a id="encrypt_sign" class="offset"></a>
						<div class="sub-item">
							<p><b>æ•°å­—ç­¾å</b></p>
							<p><b>RSA / DSA è¿›è¡Œæ•°å­—ç­¾å</b></p>
							<ol type="I">
								<li><p>ç”Ÿæˆå”¯ä¸€çš„éå¯¹ç§°åŠ å¯†å…¬é’¥å’Œç§é’¥å¯¹ï¼Œä¸€èˆ¬æ˜¯ RSA / DSA ç®—æ³•ï¼›</p></li>
								<li><p>å¯¹è¦å‘é€çš„æ–‡ä»¶è®¡ç®—æ‘˜è¦ï¼Œä¸€èˆ¬æ˜¯ MD5 å’Œ SHA å®¶æ—ï¼›</p></li>
								<li><p>ä½¿ç”¨ç§é’¥å¯¹æ‘˜è¦è¿›è¡ŒåŠ å¯†ï¼Œå¾—åˆ°ç­¾åã€‚</p></li>
							</ol>
							<pre class="brush: java;">
/**
 * ç”Ÿæˆæ•°å­—ç­¾å
 *
 * ç”Ÿæˆå’Œä¿å­˜ RSA/DSA KeyPair:
 *      KeyPair dsaKeyPair = EncryptUtil.generateDSAKeyPair(1024);
 *      EncryptUtil.saveKeyPair(dsaKeyPair, dsa_public, dsa_private);
 * è¯»å– KeyPair
 *      String prvt = EncryptUtil.readText(dsa_private);
 *      String pblc = EncryptUtil.readText(dsa_public);
 *
 * @param content        åŸæ–‡
 * @param private_base64 ç»è¿‡ base64 ç¼–ç çš„ç§é’¥
 * @param algorithm      ç®—æ³•ï¼Œå¸¸ç”¨çš„æœ‰ï¼š
 *                       MD2withRSA,MD5withRSA,
 *                       NONEwithRSA,
 *                       SHA1withRSA,SHA224withRSA,SHA256withRSA,SHA384withRSA,SHA512withRSA
 *                       SHA1withDSA(æ­¤å¤„ç”Ÿæˆçš„ KeyPair è¦ä¸º 1024 ä½ï¼Œå¦åˆ™æŠ¥é”™),SHA224withDSA,SHA256withDSA
 * @return base64 ç¼–ç ç­¾åå€¼
 * @throws Exception å¼‚å¸¸
 */
public static String generateSignature(String content, String private_base64, String algorithm) throws Exception {
	Signature signature = Signature.getInstance(algorithm);
	signature.initSign(generatePrivateKey(private_base64, algorithm));
	signature.update(content.getBytes(StandardCharsets.UTF_8));
	byte[] md5WithRSA = signature.sign();
	return Base64.getEncoder().encodeToString(md5WithRSA);
}

/**
 * ç”Ÿæˆæ•°å­—ç­¾å
 *
 * @param file           éœ€è¦ç­¾åçš„æ–‡ä»¶
 * @param private_base64 ç»è¿‡ base64 ç¼–ç çš„ç§é’¥
 * @param algorithm      ç®—æ³•ï¼Œå¸¸ç”¨çš„æœ‰ï¼š
 *                       MD2withRSA,MD5withRSA,
 *                       NONEwithRSA,
 *                       SHA1withRSA,SHA224withRSA,SHA256withRSA,SHA384withRSA,SHA512withRSA
 *                       SHA1withDSA(æ­¤å¤„ç”Ÿæˆçš„ KeyPair è¦ä¸º 1024 ä½ï¼Œå¦åˆ™æŠ¥é”™),SHA224withDSA,SHA256withDSA
 * @return base64 ç¼–ç ç­¾åå€¼
 * @throws Exception å¼‚å¸¸
 */
public static String generateSignature(File file, String private_base64, String algorithm) throws Exception {
	byte[] bytes = new byte[(int) file.length()];

	FileInputStream fix = new FileInputStream(file);
	fix.read(bytes);
	fix.close();

	return generateSignature(Base64.getEncoder().encodeToString(bytes), private_base64, algorithm);
}

/**
 * æ ¡éªŒæ•°å­—ç­¾å
 *
 * @param content       åŸæ–‡
 * @param sign          ç­¾åå€¼
 * @param public_base64 ç»è¿‡ base64 ç¼–ç çš„å¯†é’¥
 * @param algorithm      ç®—æ³•ï¼Œå¸¸ç”¨çš„æœ‰ï¼š
 *                       MD2withRSA,MD5withRSA,
 *                       NONEwithRSA,
 *                       SHA1withRSA,SHA224withRSA,SHA256withRSA,SHA384withRSA,SHA512withRSA
 *                       SHA1withDSA(æ­¤å¤„ç”Ÿæˆçš„ KeyPair è¦ä¸º 1024 ä½ï¼Œå¦åˆ™æŠ¥é”™),SHA224withDSA,SHA256withDSA
 * @return æ˜¯å¦ç¬¦åˆ
 * @throws Exception å¼‚å¸¸
 */
public static boolean verifySignature(String content, String sign, String public_base64, String algorithm) throws Exception {
	Signature signature = Signature.getInstance(algorithm);

	signature.initVerify(generatePublicKey(public_base64, algorithm));
	signature.update(content.getBytes(StandardCharsets.UTF_8));
	return signature.verify(Base64.getDecoder().decode(sign));
}
</pre>
						</div>

                        <a id="encrypt_pki" class="offset"></a>
						<div class="sub-item">
							<p><b>PKI ä½“ç³»çš„ä¸€äº›æ¦‚å¿µ</b></p>
							<ul>
								<li>
									<p><b>CA(Certificate Authority)</b> è¯ä¹¦é¢å‘æœºæ„æ˜¯è´Ÿè´£å‘æ”¾å’Œç®¡ç†æ•°å­—è¯ä¹¦çš„æƒå¨æœºæ„ï¼Œå¹¶ä½œä¸ºç”µå­å•†åŠ¡äº¤æ˜“ä¸­å—ä¿¡ä»»çš„ç¬¬ä¸‰æ–¹ï¼Œæ‰¿æ‹…å…¬é’¥ä½“ç³»ä¸­å…¬é’¥çš„åˆæ³•æ€§æ£€éªŒçš„è´£ä»»ã€‚</p>
									<p>CA ä¸­å¿ƒä¸ºæ¯ä¸ªä½¿ç”¨å…¬å¼€å¯†é’¥çš„ç”¨æˆ·å‘æ”¾ä¸€ä¸ªæ•°å­—è¯ä¹¦ï¼Œæ•°å­—è¯ä¹¦çš„ä½œç”¨æ˜¯è¯æ˜è¯ä¹¦ä¸­åˆ—å‡ºçš„ç”¨æˆ·åˆæ³•æ‹¥æœ‰è¯ä¹¦ä¸­åˆ—å‡ºçš„å…¬å¼€å¯†é’¥ã€‚CA æœºæ„çš„æ•°å­—ç­¾åä½¿å¾—æ”»å‡»è€…ä¸èƒ½ä¼ªé€ å’Œç¯¡æ”¹è¯ä¹¦ã€‚</p>
								</li>
								<li>
									<p><b>PKI(Public Key Infrastructure)</b> å…¬é’¥åŸºç¡€è®¾æ–½æ˜¯ä¸€ç§éµå¾ªæ ‡å‡†çš„åˆ©ç”¨å…¬é’¥åŠ å¯†æŠ€æœ¯ä¸ºç”µå­å•†åŠ¡çš„å¼€å±•æä¾›ä¸€å¥—å®‰å…¨åŸºç¡€å¹³å°çš„æŠ€æœ¯å’Œè§„èŒƒã€‚èƒ½å¤Ÿä¸ºäº’è”ç½‘çš„åº”ç”¨æä¾›åŠ å¯†æœåŠ¡ä»¥åŠæ•°å­—ç­¾åæœåŠ¡ã€‚</p>
								</li>
								<li>
									<p><b>PKCS(The Public-Key Cryptography Standards)</b> æ˜¯ç”±ç¾å›½ RSA æ•°æ®å®‰å…¨å…¬å¸åŠå…¶åˆä½œä¼™ä¼´åˆ¶å®šçš„ä¸€ç»„å…¬é’¥å¯†ç å­¦æ ‡å‡†ï¼Œå…¶ä¸­åŒ…æ‹¬è¯ä¹¦ç”³è¯·ã€è¯ä¹¦æ›´æ–°ã€è¯ä¹¦ä½œåºŸè¡¨å‘å¸ƒã€æ‰©å±•è¯ä¹¦å†…å®¹ä»¥åŠæ•°å­—ç­¾åã€æ•°å­—ä¿¡å°çš„æ ¼å¼ç­‰æ–¹é¢çš„ä¸€ç³»åˆ—ç›¸å…³åè®®ã€‚</p>
								</li>
								<li>
									<p><b>æ•°å­—è¯ä¹¦</b> æ˜¯æŒ‡ CA æœºæ„å‘è¡Œçš„ä¸€ç§ç”µå­æ–‡æ¡£ï¼Œæ˜¯ä¸€ä¸²èƒ½å¤Ÿè¡¨æ˜ç½‘ç»œç”¨æˆ·èº«ä»½ä¿¡æ¯çš„æ•°å­—ï¼Œæä¾›äº†ä¸€ç§åœ¨è®¡ç®—æœºç½‘ç»œä¸ŠéªŒè¯ç½‘ç»œç”¨æˆ·èº«ä»½çš„æ–¹å¼ï¼Œå› æ­¤æ•°å­—è¯ä¹¦åˆç§°ä¸ºæ•°å­—æ ‡è¯†ã€‚æ•°å­—è¯ä¹¦å¯¹ç½‘ç»œç”¨æˆ·åœ¨è®¡ç®—æœºç½‘ç»œäº¤æµä¸­çš„ä¿¡æ¯å’Œæ•°æ®ç­‰ä»¥åŠ å¯†æˆ–è§£å¯†çš„å½¢å¼ä¿è¯äº†ä¿¡æ¯å’Œæ•°æ®çš„å®Œæ•´æ€§å’Œå®‰å…¨æ€§ã€‚</p>
									<p>æ•°å­—è¯ä¹¦çš„å¸¸è§æ ¼å¼ï¼š</p>
									<table class="table table-bordered table-response">
										<tr>
											<td><b>æ ¼å¼</b></td>
											<td><b>æ‰©å±•å</b></td>
											<td><b>ç‰¹ç‚¹</b></td>
										</tr>
										<tr>
											<td>PEM</td>
											<td><code>.pem</code></td>
											<td>1ã€è¯¥ç¼–ç æ ¼å¼åœ¨ RFC1421 ä¸­å®šä¹‰ï¼Œå¹¿æ³›è¿ç”¨äºå¯†é’¥ç®¡ç†<br>2ã€ASCII æ–‡ä»¶<br>3ã€ä¸€èˆ¬åŸºäº Base64 ç¼–ç </td>
										</tr>
										<tr>
											<td>DER</td>
											<td><code>.cer</code> / <code>.crt</code> / <code>.rsa</code></td>
											<td>ç”¨äºå­˜æ”¾è¯ä¹¦ï¼Œä¸å«ç§é’¥ã€äºŒè¿›åˆ¶</td>
										</tr>
										<tr>
											<td>PKCS7</td>
											<td><code>.p7b</code> / <code>.p7r</code></td>
											<td>1ã€p7b ä»¥æ ‘çŠ¶å±•ç¤ºè¯ä¹¦é“¾ï¼Œä¸å«ç§é’¥<br>2ã€p7r ä¸º CA å¯¹è¯ä¹¦è¯·æ±‚ç­¾åçš„å›å¤ï¼Œåªèƒ½ç”¨äºå¯¼å…¥</td>
										</tr>
										<tr>
											<td>PKCS10</td>
											<td><code>.p10</code> / <code>.csr</code></td>
											<td>1ã€è¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶<br>2ã€ASCII æ–‡ä»¶<br>3ã€CA ç­¾ååä»¥ p7r æ–‡ä»¶å›å¤</td>
										</tr>
										<tr>
											<td>CMS</td>
											<td><code>.p7c</code> / <code>.p7m</code> / <code>.p7s</code></td>
											<td>1ã€p7c åªä¿å­˜è¯ä¹¦<br>2ã€p7mï¼šå¸¦ä¿¡å°æ•°æ®çš„ç­¾å<br>3ã€p7sï¼šæ—¶é—´æˆ³ç­¾åæ–‡ä»¶</td>
										</tr>
										<tr>
											<td>SPC</td>
											<td><code>.pvk</code> / <code>.spc</code></td>
											<td>å¾®è½¯ç‰¹æœ‰çš„åŒè¯ä¹¦æ–‡ä»¶æ ¼å¼ï¼Œç»å¸¸ç”¨äºä»£ç ç­¾åï¼Œå…¶ä¸­ pvk ç”¨äºä¿å­˜ç§é’¥ï¼Œ spc ç”¨äºä¿å­˜å…¬é’¥</td>
										</tr>
									</table>
								</li>
								<li>
									<p><b>å¯†é’¥åº“</b> æ˜¯å­˜æ”¾æ•°å­—è¯ä¹¦çš„æ•°æ®åº“æ–‡ä»¶ï¼Œæ‰€æœ‰çš„å…¬é’¥æˆ–ç§é’¥å¹¶è¯ä¹¦éƒ½ä¼šè¢«å­˜å‚¨åœ¨å¯†é’¥åº“ä¸­ã€‚å¸¸è§çš„å¯†é’¥åº“æœ‰ä»¥ä¸‹æ ¼å¼ï¼š</p>
									<table class="table table-bordered table-response">
										<tr>
											<td><b>æ ¼å¼</b></td>
											<td><b>æ‰©å±•å</b></td>
											<td><b>æè¿°</b></td>
											<td><b>ç‰¹ç‚¹</b></td>
										</tr>
										<tr>
											<td>JKS</td>
											<td><code>.jks</code>/<code>.ks</code></td>
											<td>å¯†é’¥åº“çš„ Java å®ç°ç‰ˆæœ¬ï¼Œprovider ä¸º SUN</td>
											<td>å¯†é’¥åº“å’Œç§é’¥ç”¨ä¸åŒçš„å¯†ç è¿›è¡Œä¿æŠ¤</td>
										</tr>
										<tr>
											<td>JCEKS</td>
											<td><code>.jce</code></td>
											<td>å¯†é’¥åº“çš„ JCE å®ç°ç‰ˆæœ¬ï¼Œprovider ä¸º SUN JCE</td>
											<td>ç›¸å¯¹äº JKS å®‰å…¨çº§åˆ«æ›´é«˜ï¼Œä¿æŠ¤ Keystore ç§é’¥æ—¶é‡‡ç”¨ TripleDES</td>
										</tr>
										<tr>
											<td>PKCS12</td>
											<td><code>.p12</code>/<code>.pfx</code></td>
											<td>ã€PKCS #12ã€‘ä¸ªäººä¿¡æ¯äº¤æ¢è¯­æ³•æ ‡å‡†</td>
											<td>1ã€åŒ…å«ç§é’¥ã€å…¬é’¥åŠå…¶è¯ä¹¦<br>2ã€å¯†é’¥åº“å’Œç§é’¥ç”¨ç›¸åŒå¯†ç è¿›è¡Œä¿æŠ¤</td>
										</tr>
										<tr>
											<td>BKS</td>
											<td><code>.bks</code></td>
											<td>å¯†é’¥åº“çš„ BC å®ç°ç‰ˆæœ¬ï¼Œprovider ä¸º BC</td>
											<td>åŸºäº JCE å®ç°</td>
										</tr>
										<tr>
											<td>UBER</td>
											<td><code>.ubr</code></td>
											<td>å¯†é’¥åº“çš„ BC æ›´å®‰å…¨å®ç°ç‰ˆæœ¬ï¼Œprovider ä¸º BC</td>
											<td>&nbsp;</td>
										</tr>
									</table>
								</li>
								<li>
									<p><b>X.509</b> æ˜¯ç”±å›½é™…ç”µä¿¡è”ç›Ÿåˆ¶å®šçš„æ•°å­—è¯ä¹¦æ ‡å‡†ã€‚æ‰€æœ‰çš„è¯ä¹¦éƒ½ç¬¦åˆä¸º PKI åˆ¶å®šçš„ ITU-T X509 å›½é™…æ ‡å‡†ã€‚</p>
								</li>
								<li>
									<p><b>SSL(Secure Sockets Layer)</b> -- å®‰å…¨å¥—æ¥å±‚åè®®å¯ä»¥åœ¨ Internet ä¸Šæä¾›ç§˜å¯†æ€§ä¼ è¾“ã€‚å…¶ç›®æ ‡æ˜¯ä¿è¯ä¸¤ä¸ªåº”ç”¨é—´é€šä¿¡çš„ä¿å¯†æ€§å’Œå¯é æ€§,å¯åœ¨æœåŠ¡å™¨ç«¯å’Œç”¨æˆ·ç«¯åŒæ—¶å®ç°æ”¯æŒã€‚å·²ç»æˆä¸º Internet ä¸Šä¿å¯†é€šè®¯çš„å·¥ä¸šæ ‡å‡†ã€‚</p>
								</li>
								<li>
									<p><b>TLS(Transport Layer Security)</b> -- ä¼ è¾“å±‚å®‰å…¨æ€§åè®®æ˜¯ IETF å°† SSL è¿›è¡Œæ ‡å‡†åŒ–ï¼Œ1999 å¹´å…¬å¸ƒç¬¬ä¸€ç‰ˆ TLS æ ‡å‡†æ–‡ä»¶ã€‚</p>
								</li>
							</ul>

							<p><b>PKCS æ ‡å‡†ï¼š</b></p>
							<table class="table table-response">
								<tr>
									<th width="58"></th>
									<th width="69">ç‰ˆæœ¬</th>
									<th width="178">åç§°</th>
									<th width="306">ç®€ä»‹</th>
								</tr>
								<tr>
									<th>PKCS #1</th>
									<td align="center">2.1</td>
									<td width="178" valign="top" align="left">RSA å¯†ç ç¼–è¯‘æ ‡å‡†ï¼ˆRSA Cryptography Standardï¼‰</td>
									<td width="306" valign="top" align="left">å®šä¹‰äº† RSA çš„æ•°ç†åŸºç¡€ã€å…¬/ç§é’¥æ ¼å¼ï¼Œä»¥åŠåŠ /è§£å¯†ã€ç­¾/éªŒç« çš„æµç¨‹ã€‚</td>
								</tr>
								<tr>
									<th>PKCS #3</th>
									<td align="center">1.4</td>
									<td width="178" valign="top" align="left">DH å¯†é’¥äº¤æ¢åè®®æ ‡å‡†ï¼ˆDiffie-Hellman key agreement Standardï¼‰</td>
									<td width="306" valign="top" align="left">è§„èŒƒä»¥ DH å¯†é’¥äº¤æ¢åè®®ä¸ºåŸºç¡€çš„å¯†é’¥åè®®æ ‡å‡†ã€‚å…¶åŠŸèƒ½ï¼Œå¯ä»¥è®©ä¸¤æ–¹é€šè¿‡é‡‘è®®åè®®ï¼Œæ‹Ÿå®šä¼šè®®å¯†é’¥ã€‚</td>
								</tr>
								<tr>
									<th>PKCS #5</th>
									<td align="center">2.0</td>
									<td width="178" valign="top" align="left">å¯†ç åŸºæ¤åŠ å¯†æ ‡å‡†ï¼ˆPassword-based Encryption Standardï¼‰</td>
									<td width="306" valign="top" align="left">æè¿°ä¸€ç§åˆ©ç”¨ä»å£ä»¤æ´¾ç”Ÿå‡ºæ¥çš„å®‰å…¨å¯†é’¥åŠ å¯†å­—ç¬¦ä¸²çš„æ–¹æ³•ã€‚</td>
								</tr>
								<tr>
									<th>PKCS #6</th>
									<td align="center">1.5</td>
									<td width="178" valign="top" align="left">è¯ä¹¦æ‰©å±•è¯­æ³•æ ‡å‡†ï¼ˆExtended-Certificate Syntax Standardï¼‰</td>
									<td width="306" valign="top" align="left">å°†åŸæœ¬ X.509 çš„è¯ä¹¦æ ¼å¼æ ‡å‡†åŠ ä»¥æ‰©å……ã€‚</td>
								</tr>
								<tr>
									<th>PKCS #7</th>
									<td align="center">1.5</td>
									<td width="178" valign="top" align="left">å¯†ç æ¶ˆæ¯è¯­æ³•æ ‡å‡†ï¼ˆCryptographic Message Syntax Standardï¼‰</td>
									<td width="306" valign="top" align="left">å…¬å¼€å¯†é’¥åŸºç¡€è®¾æ–½ï¼ˆPKIï¼‰æ‰€äº§ç”Ÿä¹‹ç­¾å/å¯†æ–‡ä¹‹æ ¼å¼ã€‚å…¶ç›®çš„ä¸€æ ·æ˜¯ä¸ºäº†æ‹“å±•æ•°å­—è¯ä¹¦çš„åº”ç”¨ã€‚</td>
								</tr>
								<tr>
									<th>PKCS #8</th>
									<td align="center">1.2</td>
									<td width="178" valign="top" align="left">ç§é’¥æ¶ˆæ¯è¡¨ç¤ºæ ‡å‡†ï¼ˆPrivate-Key Information Syntax Standardï¼‰.</td>
									<td width="306" valign="top" align="left">æè¿°ç§æœ‰å¯†é’¥ä¿¡æ¯æ ¼å¼ï¼Œè¯¥ä¿¡æ¯åŒ…æ‹¬å…¬å¼€å¯†é’¥ç®—æ³•çš„ç§æœ‰å¯†é’¥ä»¥åŠå¯é€‰çš„å±æ€§é›†ç­‰ã€‚</td>
								</tr>
								<tr>
									<th>PKCS #9</th>
									<td align="center">2.0</td>
									<td width="178" valign="top" align="left">é€‰æ‹©å±æ€§æ ¼å¼ï¼ˆSelected Attribute Typesï¼‰</td>
									<td width="306" valign="top" align="left">å®šä¹‰å¯é€‰å±æ€§ç±»å‹ã€‚å·²å®šä¹‰çš„è¯ä¹¦å±æ€§åŒ…æ‹¬ E-mail åœ°å€ã€æ— æ ¼å¼å§“åã€å†…å®¹ç±»å‹ã€æ¶ˆæ¯æ‘˜è¦ã€ç­¾åæ—¶é—´ã€ç­¾åå‰¯æœ¬ï¼ˆcounter signatureï¼‰ã€è´¨è¯¢å£ä»¤å­—å’Œæ‰©å±•è¯ä¹¦å±æ€§ã€‚</td>
								</tr>
								<tr>
									<th width="58">PKCS #10</th>
									<td align="center">1.7</td>
									<td width="178" valign="top" align="left">è¯ä¹¦è¯·æ±‚è¯­æ³•æ ‡å‡†ï¼ˆCertification Request Standardï¼‰</td>
									<td width="306" valign="top" align="left">å®šä¹‰äº†è¯ä¹¦è¯·æ±‚çš„è¯­æ³•ã€‚è¯ä¹¦è¯·æ±‚åŒ…å«äº†ä¸€ä¸ªå”¯ä¸€è¯†åˆ«åã€å…¬é’¥å’Œå¯é€‰çš„ä¸€ç»„å±æ€§ï¼Œå®ƒä»¬ä¸€èµ·è¢«è¯·æ±‚è¯ä¹¦çš„å®ä½“ç­¾åã€‚</td>
								</tr>
								<tr>
									<th>PKCS #11</th>
									<td align="center">2.20</td>
									<td width="178" valign="top" align="left">å¯†ç è®¾å¤‡æ ‡å‡†æ¥å£ï¼ˆCryptographic Token Interface (Cryptoki)ï¼‰</td>
									<td width="306" valign="top" align="left">å®šä¹‰äº†å¯†ç è®¾å¤‡çš„åº”ç”¨ç¨‹åºæ¥å£ï¼ˆAPIï¼‰ä¹‹è§„æ ¼ã€‚</td>
								</tr>
								<tr>
									<th>PKCS #12</th>
									<td align="center">1.0</td>
									<td width="178" valign="top" align="left">ä¸ªäººæ¶ˆæ¯äº¤æ¢æ ‡å‡†ï¼ˆPersonal Information Exchange Syntax Standardï¼‰</td>
									<td width="306" valign="top" align="left">å®šä¹‰äº†åŒ…å«ç§é’¥ä¸å…¬é’¥è¯ä¹¦ï¼ˆpublic key certificateï¼‰çš„æ–‡ä»¶æ ¼å¼ã€‚ç§é’¥é‡‡å¯†ç ä¿æŠ¤ã€‚å¸¸è§çš„ PFX å°±å±¥è¡Œäº† PKCS#12ã€‚</td>
								</tr>
								<tr>
									<th>PKCS #13</th>
									<td align="center">â€“</td>
									<td width="178" valign="top" align="left">æ¤­åœ†æ›²çº¿å¯†ç å­¦æ ‡å‡†ï¼ˆElliptic curve cryptography Standardï¼‰</td>
									<td width="306" valign="top" align="left">åˆ¶å®šä¸­ã€‚è§„èŒƒä»¥æ¤­åœ†æ›²çº¿å¯†ç å­¦ä¸ºåŸºç¡€æ‰€å‘å±•ä¹‹å¯†ç æŠ€æœ¯åº”ç”¨ã€‚æ¤­åœ†æ›²çº¿å¯†ç å­¦æ˜¯æ–°çš„å¯†ç å­¦æŠ€æœ¯ï¼Œå…¶å¼ºåº¦ä¸æ•ˆç‡çš†æ¯”ç°è¡Œä»¥æŒ‡æ•°è¿ç®—ä¸ºåŸºç¡€ä¹‹å¯†ç å­¦ç®—æ³•æ¥çš„ä¼˜ç§€ã€‚</td>
								</tr>
								<tr>
									<th>PKCS #14</th>
									<td align="center">â€“</td>
									<td width="178" valign="top" align="left">ä¼ªéšæœºæ•°äº§ç”Ÿå™¨æ ‡å‡†ï¼ˆPseudo-random Number Generationï¼‰</td>
									<td width="306" valign="top" align="left">åˆ¶å®šä¸­ã€‚è§„èŒƒä¼ªéšæœºæ•°äº§ç”Ÿå™¨çš„ä½¿ç”¨ä¸è®¾è®¡ã€‚</td>
								</tr>
								<tr>
									<th>PKCS #15</th>
									<td align="center">1.1</td>
									<td width="178" valign="top" align="left">å¯†ç è®¾å¤‡æ¶ˆæ¯æ ¼å¼æ ‡å‡†ï¼ˆCryptographic Token Information Format Standardï¼‰</td>
									<td width="306" valign="top" align="left">å®šä¹‰äº†å¯†ç è®¾å¤‡å†…éƒ¨æ•°æ®çš„ç»„ç»‡ç»“æ„ã€‚</td>
								</tr>
							</table>
						</div>

                        <a id="encrypt_cert" class="offset"></a>
						<div class="sub-item">
							<p><b>ä¸»æµçš„æ•°å­—è¯ä¹¦å’Œç›¸äº’è½¬æ¢</b></p>
							<p>ä¸»æµçš„ Web æœåŠ¡è½¯ä»¶ï¼Œé€šå¸¸éƒ½åŸºäº OpenSSL å’Œ Java ä¸¤ç§åŸºç¡€å¯†ç åº“ã€‚</p>
							<ul>
								<li>
									<p>Tomcat, Weblogic, JBoss ç­‰ Web æœåŠ¡è½¯ä»¶ï¼Œä¸€èˆ¬ä½¿ç”¨ Java æä¾›çš„å¯†ç åº“ã€‚é€šè¿‡ JDK å·¥å…·åŒ…ä¸­çš„ <code>keytool</code> å·¥å…·ï¼Œç”Ÿæˆ Java Keystoreï¼ˆJKSï¼‰æ ¼å¼çš„è¯ä¹¦æ–‡ä»¶ã€‚</p>
								</li>
								<li>
									<p>Apache, Nginx ç­‰ Web æœåŠ¡è½¯ä»¶ï¼Œä¸€èˆ¬ä½¿ç”¨ OpenSSL å·¥å…·æä¾›çš„å¯†ç åº“ï¼Œç”Ÿæˆ PEM, KEY, CRT ç­‰æ ¼å¼çš„è¯ä¹¦æ–‡ä»¶ã€‚</p>
								</li>
								<li>
									<p>IBM çš„ Web æœåŠ¡äº§å“ï¼Œå¦‚ Websphere, IBM Http Serverï¼ˆIHSï¼‰ç­‰ï¼Œä¸€èˆ¬ä½¿ç”¨ IBM äº§å“è‡ªå¸¦çš„ <code>iKeyman</code> å·¥å…·ï¼Œç”Ÿæˆ KDB æ ¼å¼çš„è¯ä¹¦æ–‡ä»¶ã€‚</p>
								</li>
								<li>
									<p>å¾®è½¯ Windows Server ä¸­çš„ Internet Information Servicesï¼ˆIISï¼‰æœåŠ¡ï¼Œä½¿ç”¨ Windows è‡ªå¸¦çš„è¯ä¹¦åº“ç”Ÿæˆ PFX æ ¼å¼çš„è¯ä¹¦æ–‡ä»¶ã€‚</p>
								</li>
							</ul>
							<p><b>æ•°å­—è¯ä¹¦æ ¼å¼ç›¸äº’è½¬æ¢</b></p>
							<p>1.å°† JKS(.jks/.ks/.jce) æ ¼å¼è¯ä¹¦è½¬æ¢æˆ PFX æ ¼å¼</p>
							<pre class="brush: bash">
## JKS åŒ…æ‹¬ JKS/JCEKS, è¦çœ‹ç”Ÿæˆæ—¶å€™çš„ -storetype æŒ‡å®šçš„æ˜¯ä»€ä¹ˆæ ¼å¼
## 1.ç”Ÿæˆä¸€ä¸ª storetype ä¸º JKS çš„ keystore
$ keytool -genkeypair -alias rsa -storepass ilesson -keystore test.jks -keyalg RSA -validity 365 \
				-dname "CN=lesson1234.com, OU=ilesson, O=ilesson, L=ShenZhen, ST=GuangDong, C=CN"
## 2.è½¬åŒ–ä¸º PFX æ ¼å¼
$ keytool -importkeystore -srckeystore test.jks -srcstorepass ilesson -destkeystore test.pfx \
				-deststoretype pkcs12 -deststorepass ilesson -destkeypass IlessonModify

</pre>
							<p>2.å°† PFX æ ¼å¼è¯ä¹¦è½¬æ¢ä¸º JKS(.jks/.ks/.jce) æ ¼å¼</p>
							<pre class="brush: bash">
## JKS åŒ…æ‹¬ JKS/JCEKS
$ keytool -importkeystore -srckeystore test.pfx -srcstorepass ilesson -destkeystore test.jks \
				-srcstoretype PKCS12 -deststoretype JKS -deststorepass ilesson
</pre>
							<p>3.å°† PFX è½¬æ¢ä¸º PEM/KEY/CRT æ ¼å¼</p>
							<pre class="brush: bash">
$ openssl pkcs12 -in server.pfx -nodes -out server.pem
$ openssl rsa -in server.pem -out server.key
$ openssl x509 -in server.pem -out server.crt
</pre>
							<p>4.å°† PKCS8çš„ç§é’¥å’Œç§é’¥è¯ä¹¦ è½¬æ¢ä¸º PFX æ ¼å¼</p>
							<pre class="brush: bash">
$ openssl genrsa -out rsa_private_key.pem                                         ## ç”Ÿæˆç§é’¥
$ openssl req -new -x509 -days 365 -key rsa_private_key.pem -out cert.crt         ## ç”Ÿæˆç§é’¥è¯ä¹¦
$ openssl pkcs8 -topk8 -in rsa_private_key.pem -out rsa_private_key.key -nocrypt  ## ç§é’¥è½¬ä¸º PKCS8

$ openssl pkcs12 -export -out server.pfx -inkey rsa_private_key.key -in cert.crt
</pre>
						</div>

                        <a id="encrypt_" class="offset"></a>
                        <div class="sub-item">
                            <p><code>EncryptUtil</code> æ˜¯è‡ªå·±å†™çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œæä¾›äº†ï¼šAES åŠ è§£å¯†, DES åŠ è§£å¯†, DESede åŠ è§£å¯†, RC4 åŠ è§£å¯†, Blowfish åŠ è§£å¯†, RSA åŠ è§£å¯†, Mac åŠ å¯†ï¼Œ MD5 æ‘˜è¦ï¼Œ SHA æ‘˜è¦ï¼Œ å„ç§ Signatureï¼Œ ä» KeyStore åŠ è½½å…¬é’¥ï¼Œç§é’¥ç­‰ã€‚</p>
                            <pre class="brush: java;">
/**
 * author:  nate
 * email:   jiwanger@126.com
 * os:      Linux Mint 64 Bit
 * date:    3/12/19.
 */
public class EncryptUtil {
    /**
     * AES CBC æ¨¡å¼åŠ å¯†
     *
     * @param content  è¦åŠ å¯†çš„å†…å®¹
     * @param password ç”Ÿæˆå¯†é’¥çš„å¯†ç 
     * @return åŠ å¯†åå†…å®¹ï¼Œè½¬ä¸º 16 è¿›åˆ¶æˆ– Base64 ç¼–ç æ–¹ä¾¿ä¿å­˜
     */
    public static String encryptWithAES(String content, String password) throws Exception {
        byte[] md5 = MessageDigest.getInstance("MD5").digest(password.getBytes());
        Key secretKey = new SecretKeySpec(md5, "AES"); // byte æ•°ç»„çš„é•¿åº¦ä¸º 16 å­—èŠ‚ï¼Œè¿™é‡Œä½¿ç”¨å¯†ç çš„ md5 å€¼

        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        // AES åŠ å¯†åœ¨ CBC æ¨¡å¼ä¸‹æ˜¯éœ€è¦æœ‰ä¸€ä¸ªåˆå§‹å‘é‡æ•°ç»„ byte[] initializeVector
        IvParameterSpec ivParameterSpec = new IvParameterSpec(md5);
        cipher.init(Cipher.ENCRYPT_MODE, secretKey, ivParameterSpec);

        byte[] encrypted = cipher.doFinal(content.getBytes(StandardCharsets.UTF_8));
//        return byteArrayToHexString(encrypted);
        return Base64.getEncoder().encodeToString(encrypted); // ä¹Ÿå¯ä»¥ä½¿ç”¨ Base64
    }

    /**
     * AES CBC æ¨¡å¼è§£å¯†
     *
     * @param encrypted è¦è§£å¯†çš„å†…å®¹ï¼Œå¯¹åº”åŠ å¯†æ–¹æ³•ï¼Œè¦å…ˆè½¬ä¸º byte æ•°ç»„
     * @param password  ç”Ÿæˆå¯†é’¥çš„å¯†ç 
     * @return è§£å¯†åå†…å®¹
     */
    public static String decryptWithAES(String encrypted, String password) throws Exception {
        byte[] md5 = MessageDigest.getInstance("MD5").digest(password.getBytes());
        Key secretKey = new SecretKeySpec(md5, "AES");

        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(md5));

//        byte[] decrypted = cipher.doFinal(hexStringToByteArray(encrypted));
        byte[] decrypted = cipher.doFinal(Base64.getDecoder().decode(encrypted)); // Base64ï¼Œè¿™é‡Œè¿˜åŸ
        return new String(decrypted, StandardCharsets.UTF_8);
    }

    /**
     * DES CBC æ¨¡å¼åŠ å¯†
     *
     * @param content  è¦åŠ å¯†çš„å†…å®¹
     * @param password ç”Ÿæˆå¯†é’¥çš„å¯†ç 
     * @return åŠ å¯†åå†…å®¹ï¼Œè½¬ä¸º 16 è¿›åˆ¶æˆ– Base64 ç¼–ç æ–¹ä¾¿ä¿å­˜
     */
    public static String encryptWithDES(String content, String password) throws Exception {
        byte[] md5 = MessageDigest.getInstance("MD5").digest(password.getBytes());

        DESKeySpec keySpec = new DESKeySpec(md5); // DES åŠ å¯†å…¶å®åªä½¿ç”¨äº†å‰ 8 ä¸ªå­—èŠ‚
        Key secretKey = SecretKeyFactory.getInstance("DES").generateSecret(keySpec);

        Cipher cipher = Cipher.getInstance("DES/CBC/PKCS5Padding");
        byte[] iv = new byte[8];
        System.arraycopy(md5, 0, iv, 0, 8);
        cipher.init(Cipher.ENCRYPT_MODE, secretKey, new IvParameterSpec(iv));

        byte[] encrypted = cipher.doFinal(content.getBytes(StandardCharsets.UTF_8));
//        return byteArrayToHexString(encrypted);
        return Base64.getEncoder().encodeToString(encrypted); // ä¹Ÿå¯ä»¥ä½¿ç”¨ Base64
    }

    /**
     * DESede CBC æ¨¡å¼è§£å¯†
     *
     * @param encrypted è¦è§£å¯†çš„å†…å®¹ï¼Œå¯¹åº”åŠ å¯†æ–¹æ³•ï¼Œè¦å…ˆè½¬ä¸º byte æ•°ç»„
     * @param password  ç”Ÿæˆå¯†é’¥çš„å¯†ç 
     * @return è§£å¯†åå†…å®¹
     */
    public static String decryptWithDES(String encrypted, String password) throws Exception {
        byte[] md5 = MessageDigest.getInstance("MD5").digest(password.getBytes());

        DESKeySpec keySpec = new DESKeySpec(md5);  // DESede éœ€è¦ä½¿ç”¨ 24 å­—èŠ‚
        Key secretKey = SecretKeyFactory.getInstance("DES").generateSecret(keySpec);

        Cipher cipher = Cipher.getInstance("DES/CBC/PKCS5Padding");
        byte[] iv = new byte[8];
        System.arraycopy(md5, 0, iv, 0, 8);
        cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(iv));

//        byte[] decrypted = cipher.doFinal(hexStringToByteArray(encrypted));
        byte[] decrypted = cipher.doFinal(Base64.getDecoder().decode(encrypted)); // Base64ï¼Œè¿™é‡Œè¿˜åŸ
        return new String(decrypted, StandardCharsets.UTF_8);
    }

    /**
     * DESede CBC æ¨¡å¼åŠ å¯†
     *
     * @param content  è¦åŠ å¯†çš„å†…å®¹
     * @param password ç”Ÿæˆå¯†é’¥çš„å¯†ç 
     * @return åŠ å¯†åå†…å®¹ï¼Œè½¬ä¸º 16 è¿›åˆ¶æˆ– Base64 ç¼–ç æ–¹ä¾¿ä¿å­˜
     */
    public static String encryptWithDESede(String content, String password) throws Exception {
        byte[] md5 = MessageDigest.getInstance("MD5").digest(password.getBytes());

        byte[] key = new byte[24]; // DESede éœ€è¦ä½¿ç”¨ 24 å­—èŠ‚
        System.arraycopy(md5, 0, key, 0, 16);
        DESedeKeySpec keySpec = new DESedeKeySpec(key);
        Key secretKey = SecretKeyFactory.getInstance("DESede").generateSecret(keySpec);

        Cipher cipher = Cipher.getInstance("DESede/CBC/PKCS5Padding");
        byte[] iv = new byte[8];
        System.arraycopy(md5, 0, iv, 0, 8);
        cipher.init(Cipher.ENCRYPT_MODE, secretKey, new IvParameterSpec(iv));

        byte[] encrypted = cipher.doFinal(content.getBytes(StandardCharsets.UTF_8));
//        return byteArrayToHexString(encrypted);
        return Base64.getEncoder().encodeToString(encrypted); // ä¹Ÿå¯ä»¥ä½¿ç”¨ Base64
    }

    /**
     * DES CBC æ¨¡å¼è§£å¯†
     *
     * @param encrypted è¦è§£å¯†çš„å†…å®¹ï¼Œå¯¹åº”åŠ å¯†æ–¹æ³•ï¼Œè¦å…ˆè½¬ä¸º byte æ•°ç»„
     * @param password  ç”Ÿæˆå¯†é’¥çš„å¯†ç 
     * @return è§£å¯†åå†…å®¹
     */
    public static String decryptWithDESede(String encrypted, String password) throws Exception {
        byte[] md5 = MessageDigest.getInstance("MD5").digest(password.getBytes());

        byte[] key = new byte[24];
        System.arraycopy(md5, 0, key, 0, 16);
        DESedeKeySpec keySpec = new DESedeKeySpec(key); // DESede éœ€è¦ä½¿ç”¨ 24 å­—èŠ‚
        Key secretKey = SecretKeyFactory.getInstance("DESede").generateSecret(keySpec);

        Cipher cipher = Cipher.getInstance("DESede/CBC/PKCS5Padding");
        byte[] iv = new byte[8];
        System.arraycopy(md5, 0, iv, 0, 8);
        cipher.init(Cipher.DECRYPT_MODE, secretKey, new IvParameterSpec(iv));

//        byte[] decrypted = cipher.doFinal(hexStringToByteArray(encrypted));
        byte[] decrypted = cipher.doFinal(Base64.getDecoder().decode(encrypted)); // Base64ï¼Œè¿™é‡Œè¿˜åŸ
        return new String(decrypted, StandardCharsets.UTF_8);
    }

    /**
     * RC4 / ARCFOUR åŠ å¯†
     *
     * @param content  è¦æœºå¯†çš„å†…å®¹
     * @param password å¯†ç 
     * @return åŠ å¯†åå†…å®¹ï¼Œè½¬ä¸º 16 è¿›åˆ¶æˆ– Base64 ç¼–ç æ–¹ä¾¿ä¿å­˜
     * @throws Exception å¼‚å¸¸
     */
    public static String encryptWithRC4(String content, String password) throws Exception {
        SecretKeySpec keySpec = new SecretKeySpec(password.getBytes(StandardCharsets.UTF_8), "RC4");

        Cipher cipher = Cipher.getInstance(keySpec.getAlgorithm());
        cipher.init(Cipher.ENCRYPT_MODE, keySpec);

        byte[] encrypted = cipher.doFinal(content.getBytes(StandardCharsets.UTF_8));
//        return byteArrayToHexString(encrypted);
        return Base64.getEncoder().encodeToString(encrypted); // ä¹Ÿå¯ä»¥ä½¿ç”¨ Base64
    }

    /**
     * RC4 / ARCFOUR è§£å¯†
     *
     * @param encrypted åŠ å¯†åçš„ 16 è¿›åˆ¶æˆ– Base64 ç¼–ç 
     * @param password  å¯†ç 
     * @return åŸä¸²
     * @throws Exception å¼‚å¸¸
     */
    public static String decryptWithRC4(String encrypted, String password) throws Exception {
        SecretKeySpec keySpec = new SecretKeySpec(password.getBytes(StandardCharsets.UTF_8), "RC4");

        Cipher cipher = Cipher.getInstance(keySpec.getAlgorithm());
        cipher.init(Cipher.DECRYPT_MODE, keySpec);

//        byte[] decrypted = cipher.doFinal(hexStringToByteArray(encrypted));
        byte[] decrypted = cipher.doFinal(Base64.getDecoder().decode(encrypted)); // Base64ï¼Œè¿™é‡Œè¿˜åŸ
        return new String(decrypted, StandardCharsets.UTF_8);
    }

    /**
     * Blowfish åŠ å¯†
     *
     * @param content  è¦æœºå¯†çš„å†…å®¹
     * @param password å¯†ç 
     * @return åŠ å¯†åå†…å®¹ï¼Œè½¬ä¸º 16 è¿›åˆ¶æˆ– Base64 ç¼–ç æ–¹ä¾¿ä¿å­˜
     * @throws Exception å¼‚å¸¸
     */
    public static String encryptWithBlowfish(String content, String password) throws Exception {
        SecretKeySpec keySpec = new SecretKeySpec(password.getBytes(StandardCharsets.UTF_8), "Blowfish");

        Cipher cipher = Cipher.getInstance(keySpec.getAlgorithm());
        cipher.init(Cipher.ENCRYPT_MODE, keySpec);

        byte[] encrypted = cipher.doFinal(content.getBytes(StandardCharsets.UTF_8));
//        return byteArrayToHexString(encrypted);
        return Base64.getEncoder().encodeToString(encrypted); // ä¹Ÿå¯ä»¥ä½¿ç”¨ Base64
    }

    /**
     * Blowfish è§£å¯†
     *
     * @param encrypted åŠ å¯†åçš„ 16 è¿›åˆ¶æˆ– Base64 ç¼–ç 
     * @param password  å¯†ç 
     * @return åŸä¸²
     * @throws Exception å¼‚å¸¸
     */
    public static String decryptWithBlowfish(String encrypted, String password) throws Exception {
        SecretKeySpec keySpec = new SecretKeySpec(password.getBytes(StandardCharsets.UTF_8), "Blowfish");

        Cipher cipher = Cipher.getInstance(keySpec.getAlgorithm());
        cipher.init(Cipher.DECRYPT_MODE, keySpec);

//        byte[] decrypted = cipher.doFinal(hexStringToByteArray(encrypted));
        byte[] decrypted = cipher.doFinal(Base64.getDecoder().decode(encrypted)); // Base64ï¼Œè¿™é‡Œè¿˜åŸ
        return new String(decrypted, StandardCharsets.UTF_8);
    }


    /**
     * RSA åŠ å¯†
     *
     * @param content            è¦åŠ å¯†çš„å†…å®¹
     * @param base64             ç»è¿‡ Base64 ç¼–ç çš„å…¬é’¥/å¯†é’¥
     * @param pub_true_pri_false æ˜¯å…¬é’¥è¿˜æ˜¯å¯†é’¥
     * @return ç»è¿‡ Base64 åŠ å¯†åçš„å†…å®¹
     * @throws Exception åŠ å¯†å¼‚å¸¸
     */
    public static String encryptWithRSA(String content, String base64, boolean pub_true_pri_false) throws Exception {
        Key key = generateKey(base64, "RSA", pub_true_pri_false);

        Cipher cipher = Cipher.getInstance(key.getAlgorithm());
        cipher.init(Cipher.ENCRYPT_MODE, key);

        byte[] encrypted = cipher.doFinal(content.getBytes(StandardCharsets.UTF_8));
//        return byteArrayToHexString(encrypted);
        return Base64.getEncoder().encodeToString(encrypted);
    }

    /**
     * RSA è§£å¯†ï¼Œå¦‚æœç”¨å…¬é’¥åŠ å¯†ï¼Œé‚£ä¹ˆå¿…é¡»ç”¨ç§é’¥è§£å¯†ï¼›å¦‚æœç”¨ç§é’¥åŠ å¯†ï¼Œé‚£ä¹ˆå¿…é¡»ç”¨å…¬é’¥è§£å¯†
     *
     * @param encrypted          è¦è§£å¯†çš„å†…å®¹
     * @param base64             ç»è¿‡ Base64 ç¼–ç çš„å…¬é’¥/å¯†é’¥
     * @param pub_true_pri_false æ˜¯å…¬é’¥è¿˜æ˜¯å¯†é’¥
     * @return åŸå§‹å†…å®¹
     * @throws Exception è§£å¯†å¼‚å¸¸
     */
    public static String decryptWithRSA(String encrypted, String base64, boolean pub_true_pri_false) throws Exception {
        Key key = generateKey(base64, "RSA", pub_true_pri_false);

        Cipher cipher = Cipher.getInstance(key.getAlgorithm());
        cipher.init(Cipher.DECRYPT_MODE, key);

//        byte[] decrypted = cipher.doFinal(hexStringToByteArray(encrypted));
        byte[] decrypted = cipher.doFinal(Base64.getDecoder().decode(encrypted));
        return new String(decrypted, StandardCharsets.UTF_8);
    }


    /**
     * ä» base64 ç¼–ç çš„å…¬é’¥/ç§é’¥æ–‡ä»¶ç”Ÿæˆ KEY
     *
     * @param base64             ç»è¿‡ base64 ç¼–ç çš„å¯†é’¥æ–‡ä»¶
     * @param algorithm          æ”¯æŒï¼šRSA / DSA / EC / DH(DiffieHellman)
     * @param pub_true_pri_false å…¬é’¥/ç§é’¥
     * @return Key
     * @throws Exception å¼‚å¸¸
     */
    public static Key generateKey(String base64, String algorithm, boolean pub_true_pri_false) throws Exception {
        KeyFactory keyFactory = KeyFactory.getInstance(algorithm);
        if (pub_true_pri_false) {
            X509EncodedKeySpec keySpec = new X509EncodedKeySpec(Base64.getDecoder().decode(base64));
            return keyFactory.generatePublic(keySpec);
        } else {
            PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(Base64.getDecoder().decode(base64));
            return keyFactory.generatePrivate(keySpec);
        }
    }

    /**
     * ä» base64 ç¼–ç çš„å…¬é’¥æ–‡ä»¶ç”Ÿæˆ PrivateKey
     *
     * @param base64    ç»è¿‡ base64 ç¼–ç çš„ç§é’¥æ–‡ä»¶
     * @param algorithm æ”¯æŒï¼šRSA / DSA / EC / DH(DiffieHellman)
     * @return PrivateKey
     * @throws Exception å¼‚å¸¸
     */
    public static PrivateKey generatePrivateKey(String base64, String algorithm) throws Exception {
        return (PrivateKey) generateKey(base64, algorithm, false);
    }

    /**
     * ä» base64 ç¼–ç çš„å…¬é’¥æ–‡ä»¶ç”Ÿæˆ PublicKey
     *
     * @param base64    ç»è¿‡ base64 ç¼–ç çš„å…¬é’¥æ–‡ä»¶
     * @param algorithm æ”¯æŒï¼šRSA / DSA / EC / DH(DiffieHellman)
     * @return PublicKey
     * @throws Exception å¼‚å¸¸
     */
    public static PublicKey generatePublicKey(String base64, String algorithm) throws Exception {
        return (PublicKey) generateKey(base64, algorithm, true);
    }

    /**
     * RSA åŠ å¯†ï¼Œä½¿ç”¨ openssl åˆ›å»ºçš„ .pem å¯†é’¥å¯¹
     *
     * openssl ç”Ÿæˆå¯†é’¥å¯¹:
     * 1.ç”Ÿæˆ 2048 ä½çš„ç§é’¥
     * $ openssl genrsa -out rsa_private_key.pem 2048
     * 2.ä»ç§é’¥ç”Ÿæˆå…¬é’¥
     * $ openssl rsa -in rsa_private_key.pem -pubout -out rsa_public_key.pem
     * 3.å°†ç§é’¥è¿›è¡Œ pkcs8 ç¼–ç (åŠ å¯†/è§£å¯†è¦ä½¿ç”¨è¿™ä¸ªç»è¿‡ pkcs8 ç¼–ç åçš„æ–‡ä»¶)
     * $ openssl pkcs8 -topk8 -in rsa_private_key.pem -out rsa_private_key.key -nocrypt
     *
     * @param content            è¦åŠ å¯†çš„å†…å®¹
     * @param pemPath            pem æ–‡ä»¶è·¯å¾„
     * @param pub_true_pri_false æ˜¯å…¬é’¥è¿˜æ˜¯å¯†é’¥
     * @return ç»è¿‡ Base64 åŠ å¯†åçš„å†…å®¹
     * @throws Exception åŠ å¯†å¼‚å¸¸
     */
    public static String encryptWithRSAPem(String content, String pemPath, boolean pub_true_pri_false) throws Exception {
        return encryptWithRSA(content, readPem(pemPath), pub_true_pri_false);
    }

    /**
     * RSA è§£å¯†ï¼Œä½¿ç”¨ openssl åˆ›å»ºçš„ .pem å¯†é’¥å¯¹
     *
     * @param encrypted          è¦è§£å¯†çš„å†…å®¹
     * @param pemPath            pem æ–‡ä»¶è·¯å¾„
     * @param pub_true_pri_false æ˜¯å…¬é’¥è¿˜æ˜¯å¯†é’¥
     * @return ç»è¿‡ Base64 è§£å¯†åçš„å†…å®¹
     * @throws Exception è§£å¯†å¼‚å¸¸
     */
    public static String decryptWithRSAPem(String encrypted, String pemPath, boolean pub_true_pri_false) throws Exception {
        return decryptWithRSA(encrypted, readPem(pemPath), pub_true_pri_false);
    }

    /**
     * åŒä¸‹
     */
    public static String encryptWithMac(String content, String password) throws Exception {
        return encryptWithMac(content, password, "HmacSHA256");
    }

    /**
     * å“ˆå¸ŒåŠ å¯†ï¼Œ æ¶ˆæ¯éªŒè¯ç MAC(Message Authentication Code)
     *
     * @param content   è¦åŠ å¯†çš„å†…å®¹
     * @param password  å¯†ç 
     * @param algorithm å¸¸ç”¨çš„æœ‰ï¼š HmacSHA1, HmacSHA224, HmacSHA256, HmacSHA384, HmacSHA512, HmacSHAMD5
     * @return ç»è¿‡åŠ å¯†çš„æ•°æ®
     * @throws Exception å¼‚å¸¸
     */
    public static String encryptWithMac(String content, String password, String algorithm) throws Exception {
        SecretKeySpec keySpec = new SecretKeySpec(password.getBytes(StandardCharsets.UTF_8), algorithm);

        Mac mac = Mac.getInstance(algorithm);
        mac.init(keySpec);

        byte[] encrypted = mac.doFinal(content.getBytes(StandardCharsets.UTF_8));
        return byteArrayToHexString(encrypted);
//        return Base64.getEncoder().encodeToString(encrypted); // ä¹Ÿå¯ä»¥ä½¿ç”¨ Base64
    }

    /**
     * ç”Ÿæˆ MD5(è½¬ä¸º 16 è¿›åˆ¶å¤§å†™çš„å€¼)
     *
     * @param content éœ€è¦ç”Ÿæˆ md5 çš„å†…å®¹
     * @return è½¬ä¸º 16 è¿›åˆ¶å¤§å†™çš„å€¼
     * @throws Exception å¼‚å¸¸
     */
    public static String encryptWithMD5(String content) throws Exception {
        MessageDigest digest = MessageDigest.getInstance("MD5");
        byte[] encrypted = digest.digest(content.getBytes(StandardCharsets.UTF_8));
        return byteArrayToHexString(encrypted);
//        return Base64.getEncoder().encodeToString(encrypted); // ä¹Ÿå¯ä»¥ä½¿ç”¨ Base64
    }

    /**
     * æ ¡éªŒ MD5
     *
     * @param content éœ€è¦æ ¡éªŒçš„å†…å®¹
     * @param md5     md5 å€¼
     * @return æ˜¯å¦ç¬¦åˆ
     */
    public static boolean verifyMD5(String content, String md5) throws Exception {
        return encryptWithMD5(content).equals(md5);
    }

    /**
     * æ ¡éªŒæ–‡ä»¶çš„ MD5 å€¼(æ”¯æŒå¤§æ–‡ä»¶)
     *
     * @param path è·¯å¾„
     * @param md5  md5 å€¼
     * @return æ˜¯å¦ç¬¦åˆ
     */
    public static boolean verifyFileWithMD5(String path, String md5) {
        return verifyFile(path, "MD5", md5);
    }

    /**
     * æ ¡éªŒæ–‡ä»¶çš„ SHA-256 å€¼(æ”¯æŒå¤§æ–‡ä»¶)
     *
     * @param path   è·¯å¾„
     * @param sha256 SHA-256 å€¼
     * @return æ˜¯å¦ç¬¦åˆ
     */
    public static boolean verifyFileWithSHA(String path, String sha256) {
        return verifyFile(path, "SHA-256", sha256);
    }

    /**
     * æ ¡éªŒæ–‡ä»¶
     *
     * @param path      æ–‡ä»¶è·¯å¾„
     * @param algorithm ç®—æ³•ï¼Œæ”¯æŒï¼šMD5, SHA, SHA-224, SHA-256, SHA-384, SHA-512
     * @param value     æ¯”å¯¹å€¼
     * @return æ˜¯å¦ç¬¦åˆ
     */
    public static boolean verifyFile(String path, String algorithm, String value) {
        String degist = generateFileDigest(new File(path), algorithm);
        if (null == degist) {
            return false;
        }
        return degist.equals(value);
    }

    /**
     * ä¸ºæ–‡ä»¶ç”Ÿæˆ MD5
     *
     * @param file æ–‡ä»¶
     * @return å¤§å†™ 16 è¿›åˆ¶ md5 å€¼
     */
    public static String generateFileMD5(File file) {
        return generateFileDigest(file, "MD5");
    }

    /**
     * åŒä¸‹
     */
    public static String encryptWithSHA(String content) throws Exception {
        return encryptWithSHA(content, "SHA-256");
    }

    /**
     * ç”Ÿæˆ SHA(è½¬ä¸º 16 è¿›åˆ¶å¤§å†™çš„å€¼)
     *
     * @param content   éœ€è¦ç”Ÿæˆ SHA çš„å†…å®¹
     * @param algorithm å¸¸ç”¨çš„æœ‰ï¼š SHA, SHA-224, SHA-256, SHA-384, SHA-512
     * @return è½¬ä¸º 16 è¿›åˆ¶å¤§å†™çš„å€¼
     * @throws Exception å¼‚å¸¸
     */
    public static String encryptWithSHA(String content, String algorithm) throws Exception {
        MessageDigest digest = MessageDigest.getInstance(algorithm);
        byte[] encrypted = digest.digest(content.getBytes(StandardCharsets.UTF_8));
        return EncryptUtil.byteArrayToHexString(encrypted);
//        return Base64.getEncoder().encodeToString(encrypted); // ä¹Ÿå¯ä»¥ä½¿ç”¨ Base64
    }

    /**
     * ä¸ºæ–‡ä»¶ç”Ÿæˆ SHA-256
     *
     * @param file æ–‡ä»¶
     * @return å¤§å†™ 16 è¿›åˆ¶ md5 å€¼
     */
    public static String generateFileSHA(File file) {
        return generateFileDigest(file, "SHA-256");
    }

    /**
     * ä¸ºæ–‡ä»¶ç”Ÿæˆæ‘˜è¦(æ”¯æŒå¤§æ–‡ä»¶)
     *
     * @param file      æ–‡ä»¶
     * @param algorithm ç®—æ³•ï¼Œæ”¯æŒï¼š MD5, SHA, SHA-224, SHA-256, SHA-384, SHA-512
     * @return å¤§å†™ 16 è¿›åˆ¶ md5 å€¼
     */
    public static String generateFileDigest(File file, String algorithm) {
        FileInputStream fileInputStream = null;
        try {
            MessageDigest digest = MessageDigest.getInstance(algorithm);
            fileInputStream = new FileInputStream(file);
            byte[] buffer = new byte[8192];
            int length;
            while ((length = fileInputStream.read(buffer)) != -1) {
                digest.update(buffer, 0, length);
            }
            return byteArrayToHexString(digest.digest());
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        } finally {
            try {
                if (fileInputStream != null) {
                    fileInputStream.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    /**
     * ç”Ÿæˆæ•°å­—ç­¾å
     *
     * ç”Ÿæˆå’Œä¿å­˜ RSA/DSA KeyPair:
     * KeyPair dsaKeyPair = EncryptUtil.generateDSAKeyPair(1024);
     * EncryptUtil.saveKeyPair(dsaKeyPair, dsa_public, dsa_private);
     * è¯»å– KeyPair
     * String prvt = EncryptUtil.readText(dsa_private);
     * String pblc = EncryptUtil.readText(dsa_public);
     *
     * @param content        åŸæ–‡
     * @param private_base64 ç»è¿‡ base64 ç¼–ç çš„ç§é’¥
     * @param algorithm      ç®—æ³•ï¼Œå¸¸ç”¨çš„æœ‰ï¼š
     *                       MD2withRSA,MD5withRSA,
     *                       NONEwithRSA,
     *                       SHA1withRSA,SHA224withRSA,SHA256withRSA,SHA384withRSA,SHA512withRSA
     *                       SHA1withDSA(æ­¤å¤„ç”Ÿæˆçš„ KeyPair è¦ä¸º 1024 ä½ï¼Œå¦åˆ™æŠ¥é”™),SHA224withDSA,SHA256withDSA
     *                       NONEwithECDSA
     *                       SHA1withECDSA,SHA224withECDSA,SHA256withECDSA,SHA384withECDSA,SHA512withECDSA
     * @return base64 ç¼–ç ç­¾åå€¼
     * @throws Exception å¼‚å¸¸
     */
    public static String generateSignature(String content, String private_base64, String algorithm) throws Exception {
        Signature signature = Signature.getInstance(algorithm);
        signature.initSign(generatePrivateKey(private_base64, algorithm.endsWith("ECDSA") ? "EC" : algorithm.endsWith("DSA") ? "DSA" : " RSA"));
        signature.update(content.getBytes(StandardCharsets.UTF_8));
        byte[] md5WithRSA = signature.sign();
        return Base64.getEncoder().encodeToString(md5WithRSA);
    }

    /**
     * ä¸ºæ–‡ä»¶ç”Ÿæˆæ•°å­—ç­¾å(æ–‡ä»¶å¤ªå¤§å¯èƒ½æœ‰é—®é¢˜)
     *
     * @param file           éœ€è¦ç­¾åçš„æ–‡ä»¶
     * @param private_base64 ç»è¿‡ base64 ç¼–ç çš„ç§é’¥
     * @param algorithm      ç®—æ³•ï¼Œå¸¸ç”¨çš„æœ‰ï¼š
     *                       MD2withRSA,MD5withRSA,
     *                       NONEwithRSA,
     *                       SHA1withRSA,SHA224withRSA,SHA256withRSA,SHA384withRSA,SHA512withRSA
     *                       SHA1withDSA(æ­¤å¤„ç”Ÿæˆçš„ KeyPair è¦ä¸º 1024 ä½ï¼Œå¦åˆ™æŠ¥é”™),SHA224withDSA,SHA256withDSA
     * @return base64 ç¼–ç ç­¾åå€¼
     * @throws Exception å¼‚å¸¸
     */
    public static String generateSignature(File file, String private_base64, String algorithm) throws Exception {
        byte[] bytes = new byte[(int) file.length()];

        FileInputStream fix = new FileInputStream(file);
        fix.read(bytes);
        fix.close();

        return generateSignature(Base64.getEncoder().encodeToString(bytes), private_base64, algorithm);
    }

    /**
     * æ ¡éªŒæ•°å­—ç­¾å
     *
     * @param content       åŸæ–‡
     * @param sign          ç­¾åå€¼
     * @param public_base64 ç»è¿‡ base64 ç¼–ç çš„å¯†é’¥
     * @param algorithm     ç®—æ³•ï¼Œå¸¸ç”¨çš„æœ‰ï¼š
     *                      MD2withRSA,MD5withRSA,
     *                      NONEwithRSA,
     *                      SHA1withRSA,SHA224withRSA,SHA256withRSA,SHA384withRSA,SHA512withRSA
     *                      SHA1withDSA(æ­¤å¤„ç”Ÿæˆçš„ KeyPair è¦ä¸º 1024 ä½ï¼Œå¦åˆ™æŠ¥é”™),SHA224withDSA,SHA256withDSA
     *                      NONEwithECDSA
     *                      SHA1withECDSA,SHA224withECDSA,SHA256withECDSA,SHA384withECDSA,SHA512withECDSA
     * @return æ˜¯å¦ç¬¦åˆ
     * @throws Exception å¼‚å¸¸
     */
    public static boolean verifySignature(String content, String sign, String public_base64, String algorithm) throws Exception {
        Signature signature = Signature.getInstance(algorithm);

        signature.initVerify(generatePublicKey(public_base64, algorithm.endsWith("ECDSA") ? "EC" : algorithm.endsWith("DSA") ? "DSA" : " RSA"));
        signature.update(content.getBytes(StandardCharsets.UTF_8));
        return signature.verify(Base64.getDecoder().decode(sign));
    }

    /**
     * ç”Ÿæˆ 2048 ä½çš„ RSA å¯†é’¥å¯¹
     *
     * @return KeyPair
     * @throws Exception å¼‚å¸¸
     */
    public static KeyPair generateRSAKeyPair() throws Exception {
        KeyPairGenerator generator = KeyPairGenerator.getInstance("RSA");
        generator.initialize(2048);
        return generator.generateKeyPair();
    }

    /**
     * ç”Ÿæˆ DSA å¯†é’¥å¯¹
     *
     * @param bit 1024/2048ï¼Œ å¦‚æœæ˜¯ SHA1withDSA ä½¿ç”¨ï¼Œé‚£ä¹ˆåº”è¯¥ç”Ÿæˆ 1024 ä½
     * @return KeyPair
     * @throws Exception å¼‚å¸¸
     */
    public static KeyPair generateDSAKeyPair(int bit) throws Exception {
        if (bit != 2048) {
            bit = 1024;
        }
        KeyPairGenerator generator = KeyPairGenerator.getInstance("DSA");
        generator.initialize(bit);
        return generator.generateKeyPair();
    }

    /**
     * ç”Ÿæˆ DSA å¯†é’¥å¯¹
     *
     * @return KeyPair
     * @throws Exception å¼‚å¸¸
     */
    public static KeyPair generateECKeyPair() throws Exception {
        ECKeyPairGenerator generator = new ECKeyPairGenerator();
        return generator.generateKeyPair();
    }

    /**
     * åŠ è½½ä¸€ä¸ª KeyStore
     *
     * @param path      è·¯å¾„, ç”¨ keytool ç”Ÿæˆçš„ä¸€èˆ¬ä¿å­˜ä¸º: .keystore, .jce, .jks, .ks, .pfx, .p12
     * @param storeType ç±»å‹ï¼šJKS, JCEKS, DKS, PKCS11, PKCS12
     * @param storePass keystore å¯†ç 
     * @return KeyStore
     * @throws Exception å¼‚å¸¸
     */
    public static KeyStore loadKeyStore(String path, String storeType, String storePass) throws Exception {
        KeyStore keyStore = KeyStore.getInstance(storeType);
        FileInputStream fis = new FileInputStream(path);
        keyStore.load(fis, storePass.toCharArray());
        fis.close();

        return keyStore;
    }

    /**
     * ä» KeyStore åŠ è½½æŒ‡å®šåˆ«åé¡¹çš„ç§é’¥
     *
     * @param keyStore KeyStore
     * @param alias    åˆ«å
     * @param keyPass  å¯†ç 
     * @return ç§é’¥
     * @throws Exception å¼‚å¸¸
     */
    public static PrivateKey getPrivateKeyByAlias(KeyStore keyStore, String alias, String keyPass) throws Exception {
        if (!keyStore.containsAlias(alias)) {
            return null;
        }
        return keyStore.isKeyEntry(alias) ? (PrivateKey) keyStore.getKey(alias, keyPass.toCharArray()) : null;
    }

    /**
     * ä» KeyStore è·å–æŒ‡å®šåˆ«åé¡¹çš„è¯ä¹¦
     *
     * @param keyStore KeyStore
     * @param alias    åˆ«å
     * @return è¯ä¹¦
     * @throws Exception å¼‚å¸¸
     */
    public static Certificate getCertificateByAlias(KeyStore keyStore, String alias) throws Exception {
        if (!keyStore.containsAlias(alias)) {
            return null;
        }
        return keyStore.isKeyEntry(alias) ? keyStore.getCertificate(alias) : null;
    }

    /**
     * ä» KeyStore è·å–æŒ‡å®šåˆ«åé¡¹çš„å…¬é’¥
     *
     * @param keyStore KeyStore
     * @param alias    åˆ«å
     * @return å…¬é’¥
     * @throws Exception å¼‚å¸¸
     */
    public static PublicKey getPublicKeyByAlias(KeyStore keyStore, String alias) throws Exception {
        return keyStore.isKeyEntry(alias) ? keyStore.getCertificate(alias).getPublicKey() : null;
    }

	/**
     * ä»æ–‡ä»¶è¯»å–è¯ä¹¦
     *
     * @param path è¯ä¹¦æ–‡ä»¶è·¯å¾„ï¼Œ openssl çš„ crt æ–‡ä»¶
     * @return Certificate
     * @throws Exception å¼‚å¸¸
     */
    public static Certificate getCertificate(String path) throws Exception {
        BufferedInputStream bis = new BufferedInputStream(new FileInputStream(path));

        CertificateFactory cf = CertificateFactory.getInstance("X.509");

        Certificate cert = null;
        while (bis.available() > 0) {
            cert = cf.generateCertificate(bis);
        }
        bis.close();
        return cert;
    }

    /**
     * ä¿å­˜ KeyPair
     *
     * @param keyPair     éœ€è¦ä¿å­˜çš„ KeyPair
     * @param publicPath  å…¬é’¥ä¿å­˜è·¯å¾„
     * @param privatePath ç§é’¥ä¿å­˜è·¯å¾„
     */
    public static void saveKeyPair(KeyPair keyPair, String publicPath, String privatePath) throws IOException {
        String pblc = Base64.getEncoder().encodeToString(keyPair.getPublic().getEncoded());
        writeText(publicPath, pblc);

        String prvt = Base64.getEncoder().encodeToString(keyPair.getPrivate().getEncoded());
        writeText(privatePath, prvt);
    }

    /**
     * è¯»å– openssl ç”Ÿæˆçš„ .pem æ–‡ä»¶
     *
     * @param path è·¯å¾„
     * @return å»æ‰é¦–å°¾è¡Œçš„å†…å®¹
     * @throws IOException è·¯å¾„å¼‚å¸¸
     */
    public static String readPem(String path) throws IOException {
        BufferedReader br = new BufferedReader(new FileReader(path));
        br.readLine();
        StringBuilder str = new StringBuilder();
        String s = br.readLine();
        while (s.charAt(0) != '-') {
            str.append(s);
            s = br.readLine();
        }
        return str.toString();
    }

    /**
     * è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶
     *
     * @param path è·¯å¾„
     * @return è½¬ä¸º base64 çš„ String
     * @throws IOException è·¯å¾„å¼‚å¸¸
     */
    public static String readByte(String path) throws IOException {
        File file = new File(path);

        byte[] bytes = new byte[(int) file.length()];
        FileInputStream fis = new FileInputStream(file);
        fis.read(bytes);

        return Base64.getEncoder().encodeToString(bytes);
    }

    /**
     * byte[]æ•°ç»„è½¬æ¢ä¸º16è¿›åˆ¶çš„å­—ç¬¦ä¸²
     *
     * @param data è¦è½¬æ¢çš„å­—èŠ‚æ•°ç»„
     * @return è½¬æ¢åçš„ç»“æœ
     */
    public static String byteArrayToHexString(byte[] data) {
        StringBuilder sb = new StringBuilder(data.length * 2);
        for (byte b : data) {
            int v = b & 0xff;
            if (v < 16) {
                sb.append('0');
            }
            sb.append(Integer.toHexString(v));
        }
        return sb.toString().toUpperCase(Locale.getDefault());
    }

    /**
     * 16è¿›åˆ¶è¡¨ç¤ºçš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„
     *
     * @param s 16è¿›åˆ¶è¡¨ç¤ºçš„å­—ç¬¦ä¸²
     * @return byte[] å­—èŠ‚æ•°ç»„
     */
    public static byte[] hexStringToByteArray(String s) {
        int len = s.length();
        byte[] d = new byte[len / 2];
        for (int i = 0; i < len; i += 2) {
            // ä¸¤ä½ä¸€ç»„ï¼Œè¡¨ç¤ºä¸€ä¸ªå­—èŠ‚,æŠŠè¿™æ ·è¡¨ç¤ºçš„16è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œè¿˜åŸæˆä¸€ä¸ªè¿›åˆ¶å­—èŠ‚
            d[i / 2] = (byte) ((Character.digit(s.charAt(i), 16) << 4) + Character
                    .digit(s.charAt(i + 1), 16));
        }
        return d;
    }

    /**
     * è¯»å–æ–‡æœ¬æ–‡ä»¶
     *
     * @param path è·¯å¾„
     * @return å†…å®¹
     * @throws IOException å¼‚å¸¸
     */
    public static String readText(String path) throws IOException {
        StringBuilder builder = new StringBuilder();

        BufferedReader reader = new BufferedReader(new FileReader(path));
        String tmp;
        while ((tmp = reader.readLine()) != null) {
            builder.append(tmp);
        }
        reader.close();

        return builder.toString();
    }

    /**
     * å†™æ–‡æœ¬æ–‡ä»¶
     *
     * @param path    è·¯å¾„
     * @param content å†…å®¹
     * @throws IOException å¼‚å¸¸
     */
    public static void writeText(String path, String content) throws IOException {
        BufferedWriter writer = new BufferedWriter(new FileWriter(path));
        writer.write(content);
        writer.flush();
        writer.close();
    }
}
</pre>
                        </div>
					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-openssl"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">OpenSSL</h3>
					</div>
					<div class="panel-body">
						<p><b>OpenSSL</b>æ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç çš„è½¯ä»¶åº“åŒ…(<a href="https://github.com/openssl/openssl.git" target="_blank">æºç </a>)ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨è¿™ä¸ªåŒ…æ¥è¿›è¡Œå®‰å…¨é€šä¿¡ï¼Œé¿å…çªƒå¬ï¼ŒåŒæ—¶ç¡®è®¤å¦ä¸€ç«¯è¿æ¥è€…çš„èº«ä»½ã€‚</p>
						<p><b>OpenSSL</b> æ˜¯ä¸€ä¸ªå¼€æºç¨‹åºçš„å¥—ä»¶ã€ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p>
						<ol type="I">
							<li><p><code>libcrypto</code> -- æä¾› SSL/TLS æ‰€éœ€çš„å¸¸è§„åŠ å¯†å’Œ X.509 æ”¯æŒï¼›</p></li>
							<li><p><code>libssl</code> -- ä¸º SSLv3 å’Œ TLS æä¾›å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å®ç°ï¼›</p></li>
							<li><p><code>openssl</code> -- æ˜¯ä¸ªå¤šåŠŸèƒ½å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥:</p>
								<ul>
									<li><p>åˆ›å»º Key å‚æ•°ï¼›</p></li>
									<li><p>åˆ›å»º X.509 è¯ä¹¦ã€CSR å’Œ CRLï¼›</p></li>
									<li><p>æ¶ˆæ¯æ‘˜è¦çš„è®¡ç®—ï¼›</p></li>
									<li><p>åŠ å¯†å’Œè§£å¯†ï¼›</p></li>
									<li><p>SSL/TLS å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æµ‹è¯•ï¼›</p></li>
									<li><p>å¤„ç† S/MIME ç­¾åæˆ–åŠ å¯†é‚®ä»¶ã€‚</p></li>
								</ul>
							</li>
						</ol>
						<p><b>OpenSSL å‘½ä»¤</b> åˆ†ä¸ºä¸‰å¤§ç±»ï¼š<b>æ ‡å‡†å‘½ä»¤</b>ï¼Œ <b>æ¶ˆæ¯æ‘˜è¦å‘½ä»¤</b> å’Œ <b>ç¼–ç å’ŒåŠ å¯†å‘½ä»¤</b></p>
						<pre class="brush: bash;">
## 1.æ ‡å‡†å‘½ä»¤
	asn1parse Parse an ASN.1 sequence.
	ca        Certificate Authority (CA) Management.
	ciphers   Cipher Suite Description Determination.
	cms       CMS (Cryptographic Message Syntax) utility
	crl       Certificate Revocation List (CRL) Management.
	crl2pkcs7 CRL to PKCS#7 Conversion.
	dgst      Message Digest Calculation.
	dh        Diffie-Hellman Parameter Management.  Obsoleted by dhparam.
	dhparam   Generation and Management of Diffie-Hellman Parameters. Superseded by genpkey and pkeyparam
	dsa       DSA Data Management.
	dsaparam  DSA Parameter Generation and Management. Superseded by genpkey and pkeyparam
	ec        EC (Elliptic curve) key processing
	ecparam   EC parameter manipulation and generation
	enc       Encoding with Ciphers.
	engine    Engine (loadble module) information and manipulation.
	errstr    Error Number to Error String Conversion.
	gendh     Generation of Diffie-Hellman Parameters.  Obsoleted by dhparam.
	gendsa    Generation of DSA Private Key from Parameters. Superseded by genpkey and pkey
	genpkey   Generation of Private Key or Parameters.
	genrsa    Generation of RSA Private Key. Superceded by genpkey.
	nseq      Create or examine a netscape certificate sequence
	ocsp      Online Certificate Status Protocol utility.
	passwd    Generation of hashed passwords.
	pkcs12    PKCS#12 Data Management.
	pkcs7     PKCS#7 Data Management.
	pkey      Public and private key management.
	pkeyparam Public key algorithm parameter management.
	pkeyutl   Public key algorithm cryptographic operation utility.
	rand      Generate pseudo-random bytes.
	req       PKCS#10 X.509 Certificate Signing Request (CSR) Management.
	rsa       RSA key management.
	rsautl    RSA utility for signing, verification, encryption, and decryption. Superseded by pkeyutl
	s_client  This implements a generic SSL/TLS client which can establish a transparent
			 connection to a remote server speaking SSL/TLS. It's intended for testing
			 purposes only and provides only rudimentary interface functionality but
			 internally uses mostly all functionality of the OpenSSL ssl library.
	s_server  This implements a generic SSL/TLS server which accepts connections from remote
			 clients speaking SSL/TLS. It's intended for testing purposes only and provides
			 only rudimentary interface functionality but internally uses mostly all
			 functionality of the OpenSSL ssl library.  It provides both an own command line
			 oriented protocol for testing SSL functions and a simple HTTP response facility
			 to emulate an SSL/TLS-aware webserver.
	s_time    SSL Connection Timer.
	sess_id   SSL Session Data Management.
	smime     S/MIME mail processing.
	speed     Algorithm Speed Measurement.
	spkac     SPKAC printing and generating utility
	ts        Time Stamping Authority tool (client/server)
	verify    X.509 Certificate Verification.
	version   OpenSSL Version Information.
	x509      X.509 Certificate Data Management.

## 2.æ¶ˆæ¯æ‘˜è¦å‘½ä»¤
       md2       MD2 Digest
       md5       MD5 Digest
       mdc2      MDC2 Digest
       rmd160    RMD-160 Digest
       sha       SHA Digest
       sha1      SHA-1 Digest
       sha224    SHA-224 Digest
       sha256    SHA-256 Digest
       sha384    SHA-384 Digest
       sha512    SHA-512 Digest

## 3.ç¼–ç å’ŒåŠ å¯†å‘½ä»¤
       base64    Base64 Encoding
       bf bf-cbc bf-cfb bf-ecb bf-ofb
                 Blowfish Cipher
       cast cast-cbc
                 CAST Cipher
       cast5-cbc cast5-cfb cast5-ecb cast5-ofb
                 CAST5 Cipher
       des des-cbc des-cfb des-ecb des-ede des-ede-cbc des-ede-cfb des-ede-ofb des-ofb
                 DES Cipher
       des3 desx des-ede3 des-ede3-cbc des-ede3-cfb des-ede3-ofb
                 Triple-DES Cipher
       idea idea-cbc idea-cfb idea-ecb idea-ofb
                 IDEA Cipher
       rc2 rc2-cbc rc2-cfb rc2-ecb rc2-ofb
                 RC2 Cipher
       rc4       RC4 Cipher
       rc5 rc5-cbc rc5-cfb rc5-ecb rc5-ofb
                 RC5 Cipher
</pre>

						<p><b>OpenSSL å®ä¾‹</b></p>
						<pre class="brush: bash;">
## 1.ç”Ÿæˆ RSA ç§é’¥
$ openssl genrsa -out rsa_private_key.pem        ## é»˜è®¤ä¸º 2048 ä½
## 2.é€šè¿‡ç§é’¥ç”Ÿæˆå…¬é’¥
$ openssl rsa -in rsa_private_key.pem -pubout -out rsa_public_key.pem
## 3.å¯¹ç§é’¥è¿›è¡Œ PKCS8 ç¼–ç 
$ openssl pkcs8 -topk8 -in rsa_private_key.pem -out rsa_private_key.key -nocrypt
## 4.å°†ç§é’¥è½¬ä¸º DER æ ¼å¼
$ openssl rsa -in rsa_private_key.pem -outform der -out rsa_private_key.der

## 5.ç”ŸæˆåŠ å¯†çš„ç§é’¥
$ openssl genrsa -aes256 -passout pass:123456 -out aes_rsa_private_key.pem
## 6.é€šè¿‡åŠ å¯†ç§é’¥ç”Ÿæˆå…¬é’¥
$ openssl rsa -in aes_rsa_private_key.pem -passin pass:123456 -pubout  -out aes_rsa_public_key.pem

## 7.é€šè¿‡ç§é’¥ç”Ÿæˆç­¾åè¯ä¹¦
$ openssl req -new -x509 -days 365 -key rsa_private_key.pem -out cert.crt
$ openssl x509 -in cert.crt -noout -text    ## æŸ¥çœ‹è¯ä¹¦ä¿¡æ¯
## 8.åŒæ—¶ç”Ÿæˆç§é’¥å’Œç­¾åè¯ä¹¦
$ openssl req -newkey rsa:2048 -nodes -keyout rsa_private_key.pem -x509 -days 365 -out cert.crt

## 9.é€šè¿‡ç§é’¥ç”Ÿæˆ CA ç­¾å
$ openssl req -new -key rsa_private_key.pem -passin pass:123456 -out server.csr
$ openssl req -noout -text -in server.csr   ## æŸ¥çœ‹ CSR ä¿¡æ¯

## 10.é€šè¿‡ pem è¯ä¹¦å’Œç§é’¥ç”Ÿæˆ PKCS#12 è¯ä¹¦
$ openssl pkcs12 -export -password pass:123456 -in cert.crt -inkey rsa_private_key.pem -out server.p12
</pre>
					</div>
				</div>
				<!-- item over -->
				
				<!-- item start -->
				<a class="offset" id="java-jni"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">Java æœ¬åœ°ç¼–ç¨‹ -- JNI</h3>
					</div>
					<div class="panel-body">
						<p><code>System.getProperty("java.library.path");</code></p>
					</div>
				</div>
				<!-- item over -->

				<!-- item start -->
				<a class="offset" id="java-"></a>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">Java</h3>
					</div>
					<div class="panel-body"></div>
				</div>
				<!-- item over -->
			</div>
		</div>
	</div>

	<div class="btn-group-vertical bottom-button">
		<a href="#" type="button"
			class="btn btn-default dropdown-toggle dropup" data-toggle="dropup">
			<span class="caret"></span>
		</a>
		<a href="#" type="button"
			class="btn btn-default dropdown-toggle btn-primary"
			data-toggle="dropup"> TOP </a>

		<a target="_blank" href="./docs/docs-java/api-zh/index.html"
		   type="button" class="btn btn-default dropdown-toggle btn-primary"
		   data-toggle="dropup"> DOCS-6 </a>
		<a target="_blank" href="./docs/docs-java/api/index.html"
		   type="button" class="btn btn-default dropdown-toggle btn-primary"
		   data-toggle="dropup"> DOCS-8 </a>
		<a target="_blank" href="./docs/jdk-8-zh-google/index.html"
                   type="button" class="btn btn-default dropdown-toggle btn-primary"
                   data-toggle="dropup"> DOCS-8-ZH </a>

	</div>

	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="../support/jquery/jquery-3.1.1.min.js"></script>
	<!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="../support/bootstrap/js/bootstrap.min.js"></script>
	<script src="../support/syntaxhighlighter/scripts/shCore.js"></script>
	<script src="../support/syntaxhighlighter/scripts/shBrushBash.js"></script>
	<script src="../support/syntaxhighlighter/scripts/shBrushJava.js"></script>
	<script src="res/menu.js"></script>
	<script src="../commons/js/common.js"></script>
</body>
</html>
